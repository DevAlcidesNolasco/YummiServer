{"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nrequire(\"dotenv/config\");\n\nvar _app = _interopRequireDefault(require(\"./app\"));\n\nrequire(\"./database\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import 'regenerator-runtime/runtime'\n// import 'core-js/stable'\nconst PORT = process.env.NODE_PORT;\n\n_app.default.listen(PORT);\n\nconsole.info('Server listen on port', PORT);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlBPUlQiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9QT1JUIiwiYXBwIiwibGlzdGVuIiwiY29uc29sZSIsImluZm8iXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsU0FBekI7O0FBQ0FDLGFBQUlDLE1BQUosQ0FBV0wsSUFBWDs7QUFDQU0sT0FBTyxDQUFDQyxJQUFSLENBQWEsdUJBQWIsRUFBc0NQLElBQXRDIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ2RvdGVudi9jb25maWcnXG5pbXBvcnQgYXBwIGZyb20gJy4vYXBwJ1xuaW1wb3J0ICcuL2RhdGFiYXNlJ1xuLy8gaW1wb3J0ICdyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUnXG4vLyBpbXBvcnQgJ2NvcmUtanMvc3RhYmxlJ1xuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52Lk5PREVfUE9SVFxuYXBwLmxpc3RlbihQT1JUKVxuY29uc29sZS5pbmZvKCdTZXJ2ZXIgbGlzdGVuIG9uIHBvcnQnLCBQT1JUKVxuIl19","map":{"version":3,"sources":["index.js"],"names":["PORT","process","env","NODE_PORT","app","listen","console","info"],"mappings":";;AAAA;;AACA;;AACA;;;;AACA;AACA;AACA,MAAMA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,SAAzB;;AACAC,aAAIC,MAAJ,CAAWL,IAAX;;AACAM,OAAO,CAACC,IAAR,CAAa,uBAAb,EAAsCP,IAAtC","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import 'dotenv/config'\nimport app from './app'\nimport './database'\n// import 'regenerator-runtime/runtime'\n// import 'core-js/stable'\nconst PORT = process.env.NODE_PORT\napp.listen(PORT)\nconsole.info('Server listen on port', PORT)\n"]}},"mtime":1647679518494},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _package = _interopRequireDefault(require(\"../package.json\"));\n\nvar _places = _interopRequireDefault(require(\"./routes/places\"));\n\nvar _authentication = _interopRequireDefault(require(\"./routes/authentication\"));\n\nvar _users = _interopRequireDefault(require(\"./routes/users\"));\n\nvar _initSetup = require(\"./libs/initSetup\");\n\nvar _config = require(\"./config\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import morgan from 'morgan'\n//  import { randomBytes } from 'crypto'\n// import dotenv from 'dotenv'\nconst app = (0, _express.default)();\n(0, _config.createFolder)(['uploads/profile']);\n(0, _initSetup.createRoles)(); // dotenv.config()\n//  console.log(randomBytes(64).toString('hex'))\n\napp.set('pkg', _package.default); // app.use(morgan('dev'))\n\napp.use(_express.default.json());\napp.use('/gallery/profile', _express.default.static('./uploads/profile'));\napp.get('/', (req, res) => {\n  const {\n    name,\n    author,\n    description,\n    version\n  } = app.get('pkg');\n  res.json({\n    author,\n    name,\n    description,\n    version\n  });\n});\napp.use('/api/places', _places.default);\napp.use('/api/authentication', _authentication.default);\napp.use('/api/users', _users.default);\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJzZXQiLCJwa2ciLCJ1c2UiLCJleHByZXNzIiwianNvbiIsInN0YXRpYyIsImdldCIsInJlcSIsInJlcyIsIm5hbWUiLCJhdXRob3IiLCJkZXNjcmlwdGlvbiIsInZlcnNpb24iLCJwbGFjZXNSb3V0ZXMiLCJhdXRoZW50aWNhdGlvblJvdXRlcyIsInVzZXJzUm91dGVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFOQTtBQU9BO0FBQ0E7QUFDQSxNQUFNQSxHQUFHLEdBQUcsdUJBQVo7QUFDQSwwQkFBYSxDQUFDLGlCQUFELENBQWI7QUFDQSw4QixDQUNBO0FBQ0E7O0FBQ0FBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLEtBQVIsRUFBZUMsZ0JBQWYsRSxDQUNBOztBQUNBRixHQUFHLENBQUNHLEdBQUosQ0FBUUMsaUJBQVFDLElBQVIsRUFBUjtBQUNBTCxHQUFHLENBQUNHLEdBQUosQ0FBUSxrQkFBUixFQUE0QkMsaUJBQVFFLE1BQVIsQ0FBZSxtQkFBZixDQUE1QjtBQUNBTixHQUFHLENBQUNPLEdBQUosQ0FBUSxHQUFSLEVBQWEsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDekIsUUFBTTtBQUFFQyxJQUFBQSxJQUFGO0FBQVFDLElBQUFBLE1BQVI7QUFBZ0JDLElBQUFBLFdBQWhCO0FBQTZCQyxJQUFBQTtBQUE3QixNQUF5Q2IsR0FBRyxDQUFDTyxHQUFKLENBQVEsS0FBUixDQUEvQztBQUNBRSxFQUFBQSxHQUFHLENBQUNKLElBQUosQ0FBUztBQUFFTSxJQUFBQSxNQUFGO0FBQVVELElBQUFBLElBQVY7QUFBZ0JFLElBQUFBLFdBQWhCO0FBQTZCQyxJQUFBQTtBQUE3QixHQUFUO0FBQ0QsQ0FIRDtBQUlBYixHQUFHLENBQUNHLEdBQUosQ0FBUSxhQUFSLEVBQXVCVyxlQUF2QjtBQUNBZCxHQUFHLENBQUNHLEdBQUosQ0FBUSxxQkFBUixFQUErQlksdUJBQS9CO0FBQ0FmLEdBQUcsQ0FBQ0csR0FBSixDQUFRLFlBQVIsRUFBc0JhLGNBQXRCO2VBQ2VoQixHIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJ1xuLy8gaW1wb3J0IG1vcmdhbiBmcm9tICdtb3JnYW4nXG5pbXBvcnQgcGtnIGZyb20gJy4uL3BhY2thZ2UuanNvbidcbmltcG9ydCBwbGFjZXNSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvcGxhY2VzJ1xuaW1wb3J0IGF1dGhlbnRpY2F0aW9uUm91dGVzIGZyb20gJy4vcm91dGVzL2F1dGhlbnRpY2F0aW9uJ1xuaW1wb3J0IHVzZXJzUm91dGVzIGZyb20gJy4vcm91dGVzL3VzZXJzJ1xuaW1wb3J0IHsgY3JlYXRlUm9sZXMgfSBmcm9tICcuL2xpYnMvaW5pdFNldHVwJ1xuaW1wb3J0IHsgY3JlYXRlRm9sZGVyIH0gZnJvbSAnLi9jb25maWcnXG4vLyAgaW1wb3J0IHsgcmFuZG9tQnl0ZXMgfSBmcm9tICdjcnlwdG8nXG4vLyBpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudidcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKVxuY3JlYXRlRm9sZGVyKFsndXBsb2Fkcy9wcm9maWxlJ10pXG5jcmVhdGVSb2xlcygpXG4vLyBkb3RlbnYuY29uZmlnKClcbi8vICBjb25zb2xlLmxvZyhyYW5kb21CeXRlcyg2NCkudG9TdHJpbmcoJ2hleCcpKVxuYXBwLnNldCgncGtnJywgcGtnKVxuLy8gYXBwLnVzZShtb3JnYW4oJ2RldicpKVxuYXBwLnVzZShleHByZXNzLmpzb24oKSlcbmFwcC51c2UoJy9nYWxsZXJ5L3Byb2ZpbGUnLCBleHByZXNzLnN0YXRpYygnLi91cGxvYWRzL3Byb2ZpbGUnKSlcbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBuYW1lLCBhdXRob3IsIGRlc2NyaXB0aW9uLCB2ZXJzaW9uIH0gPSBhcHAuZ2V0KCdwa2cnKVxuICByZXMuanNvbih7IGF1dGhvciwgbmFtZSwgZGVzY3JpcHRpb24sIHZlcnNpb24gfSlcbn0pXG5hcHAudXNlKCcvYXBpL3BsYWNlcycsIHBsYWNlc1JvdXRlcylcbmFwcC51c2UoJy9hcGkvYXV0aGVudGljYXRpb24nLCBhdXRoZW50aWNhdGlvblJvdXRlcylcbmFwcC51c2UoJy9hcGkvdXNlcnMnLCB1c2Vyc1JvdXRlcylcbmV4cG9ydCBkZWZhdWx0IGFwcFxuIl19","map":{"version":3,"sources":["app.js"],"names":["app","set","pkg","use","express","json","static","get","req","res","name","author","description","version","placesRoutes","authenticationRoutes","usersRoutes"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AANA;AAOA;AACA;AACA,MAAMA,GAAG,GAAG,uBAAZ;AACA,0BAAa,CAAC,iBAAD,CAAb;AACA,8B,CACA;AACA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,KAAR,EAAeC,gBAAf,E,CACA;;AACAF,GAAG,CAACG,GAAJ,CAAQC,iBAAQC,IAAR,EAAR;AACAL,GAAG,CAACG,GAAJ,CAAQ,kBAAR,EAA4BC,iBAAQE,MAAR,CAAe,mBAAf,CAA5B;AACAN,GAAG,CAACO,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA,WAAhB;AAA6BC,IAAAA;AAA7B,MAAyCb,GAAG,CAACO,GAAJ,CAAQ,KAAR,CAA/C;AACAE,EAAAA,GAAG,CAACJ,IAAJ,CAAS;AAAEM,IAAAA,MAAF;AAAUD,IAAAA,IAAV;AAAgBE,IAAAA,WAAhB;AAA6BC,IAAAA;AAA7B,GAAT;AACD,CAHD;AAIAb,GAAG,CAACG,GAAJ,CAAQ,aAAR,EAAuBW,eAAvB;AACAd,GAAG,CAACG,GAAJ,CAAQ,qBAAR,EAA+BY,uBAA/B;AACAf,GAAG,CAACG,GAAJ,CAAQ,YAAR,EAAsBa,cAAtB;eACehB,G","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import express from 'express'\n// import morgan from 'morgan'\nimport pkg from '../package.json'\nimport placesRoutes from './routes/places'\nimport authenticationRoutes from './routes/authentication'\nimport usersRoutes from './routes/users'\nimport { createRoles } from './libs/initSetup'\nimport { createFolder } from './config'\n//  import { randomBytes } from 'crypto'\n// import dotenv from 'dotenv'\nconst app = express()\ncreateFolder(['uploads/profile'])\ncreateRoles()\n// dotenv.config()\n//  console.log(randomBytes(64).toString('hex'))\napp.set('pkg', pkg)\n// app.use(morgan('dev'))\napp.use(express.json())\napp.use('/gallery/profile', express.static('./uploads/profile'))\napp.get('/', (req, res) => {\n  const { name, author, description, version } = app.get('pkg')\n  res.json({ author, name, description, version })\n})\napp.use('/api/places', placesRoutes)\napp.use('/api/authentication', authenticationRoutes)\napp.use('/api/users', usersRoutes)\nexport default app\n"]}},"mtime":1647677979220},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _package = _interopRequireDefault(require(\"../package.json\"));\n\nvar _places = _interopRequireDefault(require(\"./routes/places\"));\n\nvar _authentication = _interopRequireDefault(require(\"./routes/authentication\"));\n\nvar _users = _interopRequireDefault(require(\"./routes/users\"));\n\nvar _initSetup = require(\"./libs/initSetup\");\n\nvar _config = require(\"./config\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import morgan from 'morgan'\n//  import { randomBytes } from 'crypto'\nconst app = (0, _express.default)();\n(0, _config.createFolder)(['uploads/profile']);\n(0, _initSetup.createRoles)(); //  console.log(randomBytes(64).toString('hex'))\n\napp.set('pkg', _package.default); // app.use(morgan('dev'))\n\napp.use(_express.default.json());\napp.use('/gallery/profile', _express.default.static('./uploads/profile'));\napp.get('/', (req, res) => {\n  const {\n    name,\n    author,\n    description,\n    version\n  } = app.get('pkg');\n  res.json({\n    author,\n    name,\n    description,\n    version\n  });\n});\napp.use('/api/places', _places.default);\napp.use('/api/authentication', _authentication.default);\napp.use('/api/users', _users.default);\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJzZXQiLCJwa2ciLCJ1c2UiLCJleHByZXNzIiwianNvbiIsInN0YXRpYyIsImdldCIsInJlcSIsInJlcyIsIm5hbWUiLCJhdXRob3IiLCJkZXNjcmlwdGlvbiIsInZlcnNpb24iLCJwbGFjZXNSb3V0ZXMiLCJhdXRoZW50aWNhdGlvblJvdXRlcyIsInVzZXJzUm91dGVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFOQTtBQU9BO0FBQ0EsTUFBTUEsR0FBRyxHQUFHLHVCQUFaO0FBQ0EsMEJBQWEsQ0FBQyxpQkFBRCxDQUFiO0FBQ0EsOEIsQ0FDQTs7QUFDQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsS0FBUixFQUFlQyxnQkFBZixFLENBQ0E7O0FBQ0FGLEdBQUcsQ0FBQ0csR0FBSixDQUFRQyxpQkFBUUMsSUFBUixFQUFSO0FBQ0FMLEdBQUcsQ0FBQ0csR0FBSixDQUFRLGtCQUFSLEVBQTRCQyxpQkFBUUUsTUFBUixDQUFlLG1CQUFmLENBQTVCO0FBQ0FOLEdBQUcsQ0FBQ08sR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QixRQUFNO0FBQUVDLElBQUFBLElBQUY7QUFBUUMsSUFBQUEsTUFBUjtBQUFnQkMsSUFBQUEsV0FBaEI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXlDYixHQUFHLENBQUNPLEdBQUosQ0FBUSxLQUFSLENBQS9DO0FBQ0FFLEVBQUFBLEdBQUcsQ0FBQ0osSUFBSixDQUFTO0FBQUVNLElBQUFBLE1BQUY7QUFBVUQsSUFBQUEsSUFBVjtBQUFnQkUsSUFBQUEsV0FBaEI7QUFBNkJDLElBQUFBO0FBQTdCLEdBQVQ7QUFDRCxDQUhEO0FBSUFiLEdBQUcsQ0FBQ0csR0FBSixDQUFRLGFBQVIsRUFBdUJXLGVBQXZCO0FBQ0FkLEdBQUcsQ0FBQ0csR0FBSixDQUFRLHFCQUFSLEVBQStCWSx1QkFBL0I7QUFDQWYsR0FBRyxDQUFDRyxHQUFKLENBQVEsWUFBUixFQUFzQmEsY0FBdEI7ZUFDZWhCLEciLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG4vLyBpbXBvcnQgbW9yZ2FuIGZyb20gJ21vcmdhbidcbmltcG9ydCBwa2cgZnJvbSAnLi4vcGFja2FnZS5qc29uJ1xuaW1wb3J0IHBsYWNlc1JvdXRlcyBmcm9tICcuL3JvdXRlcy9wbGFjZXMnXG5pbXBvcnQgYXV0aGVudGljYXRpb25Sb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvYXV0aGVudGljYXRpb24nXG5pbXBvcnQgdXNlcnNSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvdXNlcnMnXG5pbXBvcnQgeyBjcmVhdGVSb2xlcyB9IGZyb20gJy4vbGlicy9pbml0U2V0dXAnXG5pbXBvcnQgeyBjcmVhdGVGb2xkZXIgfSBmcm9tICcuL2NvbmZpZydcbi8vICBpbXBvcnQgeyByYW5kb21CeXRlcyB9IGZyb20gJ2NyeXB0bydcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKVxuY3JlYXRlRm9sZGVyKFsndXBsb2Fkcy9wcm9maWxlJ10pXG5jcmVhdGVSb2xlcygpXG4vLyAgY29uc29sZS5sb2cocmFuZG9tQnl0ZXMoNjQpLnRvU3RyaW5nKCdoZXgnKSlcbmFwcC5zZXQoJ3BrZycsIHBrZylcbi8vIGFwcC51c2UobW9yZ2FuKCdkZXYnKSlcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpXG5hcHAudXNlKCcvZ2FsbGVyeS9wcm9maWxlJywgZXhwcmVzcy5zdGF0aWMoJy4vdXBsb2Fkcy9wcm9maWxlJykpXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgYXV0aG9yLCBkZXNjcmlwdGlvbiwgdmVyc2lvbiB9ID0gYXBwLmdldCgncGtnJylcbiAgcmVzLmpzb24oeyBhdXRob3IsIG5hbWUsIGRlc2NyaXB0aW9uLCB2ZXJzaW9uIH0pXG59KVxuYXBwLnVzZSgnL2FwaS9wbGFjZXMnLCBwbGFjZXNSb3V0ZXMpXG5hcHAudXNlKCcvYXBpL2F1dGhlbnRpY2F0aW9uJywgYXV0aGVudGljYXRpb25Sb3V0ZXMpXG5hcHAudXNlKCcvYXBpL3VzZXJzJywgdXNlcnNSb3V0ZXMpXG5leHBvcnQgZGVmYXVsdCBhcHBcbiJdfQ==","map":{"version":3,"sources":["app.js"],"names":["app","set","pkg","use","express","json","static","get","req","res","name","author","description","version","placesRoutes","authenticationRoutes","usersRoutes"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AANA;AAOA;AACA,MAAMA,GAAG,GAAG,uBAAZ;AACA,0BAAa,CAAC,iBAAD,CAAb;AACA,8B,CACA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,KAAR,EAAeC,gBAAf,E,CACA;;AACAF,GAAG,CAACG,GAAJ,CAAQC,iBAAQC,IAAR,EAAR;AACAL,GAAG,CAACG,GAAJ,CAAQ,kBAAR,EAA4BC,iBAAQE,MAAR,CAAe,mBAAf,CAA5B;AACAN,GAAG,CAACO,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA,WAAhB;AAA6BC,IAAAA;AAA7B,MAAyCb,GAAG,CAACO,GAAJ,CAAQ,KAAR,CAA/C;AACAE,EAAAA,GAAG,CAACJ,IAAJ,CAAS;AAAEM,IAAAA,MAAF;AAAUD,IAAAA,IAAV;AAAgBE,IAAAA,WAAhB;AAA6BC,IAAAA;AAA7B,GAAT;AACD,CAHD;AAIAb,GAAG,CAACG,GAAJ,CAAQ,aAAR,EAAuBW,eAAvB;AACAd,GAAG,CAACG,GAAJ,CAAQ,qBAAR,EAA+BY,uBAA/B;AACAf,GAAG,CAACG,GAAJ,CAAQ,YAAR,EAAsBa,cAAtB;eACehB,G","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import express from 'express'\n// import morgan from 'morgan'\nimport pkg from '../package.json'\nimport placesRoutes from './routes/places'\nimport authenticationRoutes from './routes/authentication'\nimport usersRoutes from './routes/users'\nimport { createRoles } from './libs/initSetup'\nimport { createFolder } from './config'\n//  import { randomBytes } from 'crypto'\nconst app = express()\ncreateFolder(['uploads/profile'])\ncreateRoles()\n//  console.log(randomBytes(64).toString('hex'))\napp.set('pkg', pkg)\n// app.use(morgan('dev'))\napp.use(express.json())\napp.use('/gallery/profile', express.static('./uploads/profile'))\napp.get('/', (req, res) => {\n  const { name, author, description, version } = app.get('pkg')\n  res.json({ author, name, description, version })\n})\napp.use('/api/places', placesRoutes)\napp.use('/api/authentication', authenticationRoutes)\napp.use('/api/users', usersRoutes)\nexport default app\n"]}},"mtime":1647679548586},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/places.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar placesController = _interopRequireWildcard(require(\"../controllers/places\"));\n\nvar authorization = _interopRequireWildcard(require(\"../middlewares/authorization\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.get('/', placesController.getPlaces);\nrouter.get('/similar/:placeId', [authorization.tokenVerification], placesController.similarPlaces);\nrouter.get('/recommendations/:placeId', [authorization.tokenVerification], placesController.recommendedPlaces);\nrouter.get('/likes', [authorization.tokenVerification], placesController.getLikes);\nrouter.get('/:placeId', placesController.getPlace);\nrouter.post('/', [authorization.tokenVerification, authorization.isModerator], placesController.createPlace);\nrouter.post('/like/:placeId', [authorization.tokenVerification], placesController.likeAPlace);\nrouter.put('/:placeId', [authorization.tokenVerification, authorization.isSeller], placesController.putPlace);\nrouter.delete('/:placeId', [authorization.tokenVerification, authorization.isAdmin]);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlcy5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJnZXQiLCJwbGFjZXNDb250cm9sbGVyIiwiZ2V0UGxhY2VzIiwiYXV0aG9yaXphdGlvbiIsInRva2VuVmVyaWZpY2F0aW9uIiwic2ltaWxhclBsYWNlcyIsInJlY29tbWVuZGVkUGxhY2VzIiwiZ2V0TGlrZXMiLCJnZXRQbGFjZSIsInBvc3QiLCJpc01vZGVyYXRvciIsImNyZWF0ZVBsYWNlIiwibGlrZUFQbGFjZSIsInB1dCIsImlzU2VsbGVyIiwicHV0UGxhY2UiLCJkZWxldGUiLCJpc0FkbWluIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUNBLE1BQU1BLE1BQU0sR0FBRyxzQkFBZjtBQUNBQSxNQUFNLENBQUNDLEdBQVAsQ0FBVyxHQUFYLEVBQWdCQyxnQkFBZ0IsQ0FBQ0MsU0FBakM7QUFDQUgsTUFBTSxDQUFDQyxHQUFQLENBQVcsbUJBQVgsRUFBZ0MsQ0FBQ0csYUFBYSxDQUFDQyxpQkFBZixDQUFoQyxFQUFtRUgsZ0JBQWdCLENBQUNJLGFBQXBGO0FBQ0FOLE1BQU0sQ0FBQ0MsR0FBUCxDQUFXLDJCQUFYLEVBQXdDLENBQUNHLGFBQWEsQ0FBQ0MsaUJBQWYsQ0FBeEMsRUFBMkVILGdCQUFnQixDQUFDSyxpQkFBNUY7QUFDQVAsTUFBTSxDQUFDQyxHQUFQLENBQVcsUUFBWCxFQUFxQixDQUFDRyxhQUFhLENBQUNDLGlCQUFmLENBQXJCLEVBQXdESCxnQkFBZ0IsQ0FBQ00sUUFBekU7QUFDQVIsTUFBTSxDQUFDQyxHQUFQLENBQVcsV0FBWCxFQUF3QkMsZ0JBQWdCLENBQUNPLFFBQXpDO0FBQ0FULE1BQU0sQ0FBQ1UsSUFBUCxDQUFZLEdBQVosRUFBaUIsQ0FBQ04sYUFBYSxDQUFDQyxpQkFBZixFQUFrQ0QsYUFBYSxDQUFDTyxXQUFoRCxDQUFqQixFQUErRVQsZ0JBQWdCLENBQUNVLFdBQWhHO0FBQ0FaLE1BQU0sQ0FBQ1UsSUFBUCxDQUFZLGdCQUFaLEVBQThCLENBQUNOLGFBQWEsQ0FBQ0MsaUJBQWYsQ0FBOUIsRUFBaUVILGdCQUFnQixDQUFDVyxVQUFsRjtBQUNBYixNQUFNLENBQUNjLEdBQVAsQ0FBVyxXQUFYLEVBQXdCLENBQUNWLGFBQWEsQ0FBQ0MsaUJBQWYsRUFBa0NELGFBQWEsQ0FBQ1csUUFBaEQsQ0FBeEIsRUFBbUZiLGdCQUFnQixDQUFDYyxRQUFwRztBQUNBaEIsTUFBTSxDQUFDaUIsTUFBUCxDQUFjLFdBQWQsRUFBMkIsQ0FBQ2IsYUFBYSxDQUFDQyxpQkFBZixFQUFrQ0QsYUFBYSxDQUFDYyxPQUFoRCxDQUEzQjtlQUVlbEIsTSIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgKiBhcyBwbGFjZXNDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL3BsYWNlcydcbmltcG9ydCAqIGFzIGF1dGhvcml6YXRpb24gZnJvbSAnLi4vbWlkZGxld2FyZXMvYXV0aG9yaXphdGlvbidcbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpXG5yb3V0ZXIuZ2V0KCcvJywgcGxhY2VzQ29udHJvbGxlci5nZXRQbGFjZXMpXG5yb3V0ZXIuZ2V0KCcvc2ltaWxhci86cGxhY2VJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5zaW1pbGFyUGxhY2VzKVxucm91dGVyLmdldCgnL3JlY29tbWVuZGF0aW9ucy86cGxhY2VJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5yZWNvbW1lbmRlZFBsYWNlcylcbnJvdXRlci5nZXQoJy9saWtlcycsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5nZXRMaWtlcylcbnJvdXRlci5nZXQoJy86cGxhY2VJZCcsIHBsYWNlc0NvbnRyb2xsZXIuZ2V0UGxhY2UpXG5yb3V0ZXIucG9zdCgnLycsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uLCBhdXRob3JpemF0aW9uLmlzTW9kZXJhdG9yXSwgcGxhY2VzQ29udHJvbGxlci5jcmVhdGVQbGFjZSlcbnJvdXRlci5wb3N0KCcvbGlrZS86cGxhY2VJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5saWtlQVBsYWNlKVxucm91dGVyLnB1dCgnLzpwbGFjZUlkJywgW2F1dGhvcml6YXRpb24udG9rZW5WZXJpZmljYXRpb24sIGF1dGhvcml6YXRpb24uaXNTZWxsZXJdLCBwbGFjZXNDb250cm9sbGVyLnB1dFBsYWNlKVxucm91dGVyLmRlbGV0ZSgnLzpwbGFjZUlkJywgW2F1dGhvcml6YXRpb24udG9rZW5WZXJpZmljYXRpb24sIGF1dGhvcml6YXRpb24uaXNBZG1pbl0pXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlclxuIl19","map":{"version":3,"sources":["places.js"],"names":["router","get","placesController","getPlaces","authorization","tokenVerification","similarPlaces","recommendedPlaces","getLikes","getPlace","post","isModerator","createPlace","likeAPlace","put","isSeller","putPlace","delete","isAdmin"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AACA,MAAMA,MAAM,GAAG,sBAAf;AACAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgBC,gBAAgB,CAACC,SAAjC;AACAH,MAAM,CAACC,GAAP,CAAW,mBAAX,EAAgC,CAACG,aAAa,CAACC,iBAAf,CAAhC,EAAmEH,gBAAgB,CAACI,aAApF;AACAN,MAAM,CAACC,GAAP,CAAW,2BAAX,EAAwC,CAACG,aAAa,CAACC,iBAAf,CAAxC,EAA2EH,gBAAgB,CAACK,iBAA5F;AACAP,MAAM,CAACC,GAAP,CAAW,QAAX,EAAqB,CAACG,aAAa,CAACC,iBAAf,CAArB,EAAwDH,gBAAgB,CAACM,QAAzE;AACAR,MAAM,CAACC,GAAP,CAAW,WAAX,EAAwBC,gBAAgB,CAACO,QAAzC;AACAT,MAAM,CAACU,IAAP,CAAY,GAAZ,EAAiB,CAACN,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACO,WAAhD,CAAjB,EAA+ET,gBAAgB,CAACU,WAAhG;AACAZ,MAAM,CAACU,IAAP,CAAY,gBAAZ,EAA8B,CAACN,aAAa,CAACC,iBAAf,CAA9B,EAAiEH,gBAAgB,CAACW,UAAlF;AACAb,MAAM,CAACc,GAAP,CAAW,WAAX,EAAwB,CAACV,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACW,QAAhD,CAAxB,EAAmFb,gBAAgB,CAACc,QAApG;AACAhB,MAAM,CAACiB,MAAP,CAAc,WAAd,EAA2B,CAACb,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACc,OAAhD,CAA3B;eAEelB,M","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/","sourcesContent":["import { Router } from 'express'\nimport * as placesController from '../controllers/places'\nimport * as authorization from '../middlewares/authorization'\nconst router = Router()\nrouter.get('/', placesController.getPlaces)\nrouter.get('/similar/:placeId', [authorization.tokenVerification], placesController.similarPlaces)\nrouter.get('/recommendations/:placeId', [authorization.tokenVerification], placesController.recommendedPlaces)\nrouter.get('/likes', [authorization.tokenVerification], placesController.getLikes)\nrouter.get('/:placeId', placesController.getPlace)\nrouter.post('/', [authorization.tokenVerification, authorization.isModerator], placesController.createPlace)\nrouter.post('/like/:placeId', [authorization.tokenVerification], placesController.likeAPlace)\nrouter.put('/:placeId', [authorization.tokenVerification, authorization.isSeller], placesController.putPlace)\nrouter.delete('/:placeId', [authorization.tokenVerification, authorization.isAdmin])\n\nexport default router\n"]}},"mtime":1647674649016},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/places.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.similarPlaces = exports.removePlace = exports.recommendedPlaces = exports.putPlace = exports.likeAPlace = exports.getPlaces = exports.getPlace = exports.getLikes = exports.createPlace = void 0;\n\nvar _places = _interopRequireDefault(require(\"../models/places\"));\n\nvar _validations = require(\"../libs/validations\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getPlaces = async (req, res) => {\n  // obtener distancia, ubicacion, y filtros de la busqueda\n  // validar datos de entrada\n  // buscar en la base de datos los sitios cercanos\n  // contar el resultado\n  const {\n    distance = 300,\n    coordinates = [13.482903, -88.175427]\n  } = req.body;\n\n  if (typeof distance !== 'number') {\n    return res.json({\n      message: 'Dato de la distancia erroneo'\n    });\n  }\n\n  if (typeof coordinates !== 'object' || coordinates.length < 2) {\n    return res.json({\n      message: 'No ha proporcionado ubicaciÃ³n'\n    });\n  }\n\n  const {\n    filters = {\n      delivery: null,\n      service: null\n    }\n  } = req.body;\n  const places = await _places.default.find({\n    location: {\n      $nearSphere: {\n        $geometry: {\n          type: 'Point',\n          coordinates: coordinates\n        },\n        $maxDistance: distance\n      }\n    }\n  });\n  const isFiltered = Object.values(filters).some(filterValue => filterValue !== null);\n  console.log(isFiltered); // const arrayFilters = Object.entries(filters)\n  // arrayFilters.forEach((filter) => {\n  //     if (filter[1]) {\n  //         console.log(filter[1])\n  //         places.where(filter[0], filter[1])\n  //     }\n  // })\n\n  res.json({\n    result: places,\n    count: places.length\n  });\n};\n\nexports.getPlaces = getPlaces;\n\nconst createPlace = async (req, res) => {\n  // obtener informacion de las propiedades del sitio\n  // guarda en la base de datos el sitio\n  const preparedPlace = new _places.default(req.body);\n  const savedPlace = await preparedPlace.save();\n  res.status(201).json(savedPlace);\n};\n\nexports.createPlace = createPlace;\n\nconst putPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener objeto con nuevas valores del sitio\n  // actualizar el sitio con ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const updatedPlace = await _places.default.replaceOne({\n    _id: placeId\n  }, req.body);\n\n  if (updatedPlace.n === 0) {\n    return res.json({\n      message: 'No existe ese lugar'\n    });\n  }\n\n  if (updatedPlace.nModified === 0) {\n    return res.json({\n      message: 'No se pudo editar el lugar'\n    });\n  }\n\n  res.json(updatedPlace);\n};\n\nexports.putPlace = putPlace;\n\nconst removePlace = async (req, res) => {\n  // obtener ID del sitio\n  // eliminar un sitio con ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const placeDeleted = await _places.default.findOneAndDelete({\n    _id: placeId\n  }); //  const placeDeleted = await Place.findByIdAndRemove(placeId)\n\n  if (!placeDeleted) {\n    return res.json({\n      message: 'No existe ese lugar'\n    });\n  }\n\n  res.json(placeDeleted);\n};\n\nexports.removePlace = removePlace;\n\nconst getPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener informacion del sitio con el ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const placeFound = await _places.default.findOne({\n    _id: placeId\n  });\n\n  if (!placeFound) {\n    return res.json({\n      message: 'No existe ese lugar'\n    });\n  }\n\n  res.json(placeFound);\n};\n\nexports.getPlace = getPlace;\n\nconst recommendedPlaces = (req, res) => {\n  // buscar los cercanos con las categorias mas buscadas del usuario\n  // obtener categorias mas buscadas\n  // filtrar por los mejores valorados\n  const {\n    placeId\n  } = req.params;\n  console.log(`Id Place is ${placeId}`);\n  console.log(req.body);\n  res.json({\n    message: 'Get Recommended Places'\n  });\n};\n\nexports.recommendedPlaces = recommendedPlaces;\n\nconst similarPlaces = async (req, res) => {\n  // obtener ID del sitio\n  // obtener categorias del sitio\n  // buscar sitios con las categorias del ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const placeFound = await _places.default.findOne({\n    _id: placeId\n  }, {\n    gallery: 0,\n    contact: 0,\n    description: 0,\n    ubication: 0,\n    rating: 0,\n    schedule: 0,\n    name: 0\n  });\n  searchByCategories(placeFound.category);\n  res.json({\n    message: 'Get Similar in 500mts Places'\n  });\n};\n\nexports.similarPlaces = similarPlaces;\n\nconst getLikes = async (req, res) => {\n  // obtener el ID del usuario\n  // obtener todos los sitios que el usuario ha likeado\n  const {\n    userId\n  } = req;\n  console.log(userId);\n  const likedPlaces = await _places.default.find({\n    rating: {\n      $elemMatch: {\n        user: userId\n      }\n    }\n  }); //  console.log('Get Liked Places')\n\n  res.json(likedPlaces);\n};\n\nexports.getLikes = getLikes;\n\nconst likeAPlace = async (req, res) => {\n  // obtener ID del sitio y el usuario\n  // obtener el valor del Rating\n  // obtener sitio del ID\n  // modificar el arreglo con los likes del sitio\n  const {\n    rating\n  } = req.body;\n  const {\n    userId\n  } = req;\n  const {\n    placeId\n  } = req.params;\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  if (rating > 5 || rating < 0 || !rating || isNaN(rating)) {\n    return res.json({\n      message: 'Calificacion no valida'\n    });\n  }\n\n  const place = await _places.default.findOne({\n    _id: placeId\n  });\n  const found = place.rating.findIndex(rate => rate.user.toString() === userId);\n\n  if (found > -1) {\n    place.rating[found].rate = rating;\n  } else {\n    place.rating.push({\n      user: userId,\n      rate: rating\n    });\n  }\n\n  const ratingSaved = await place.save();\n  res.json(ratingSaved);\n};\n\nexports.likeAPlace = likeAPlace;\n\nconst searchByCategories = categories => {\n  for (const category of categories) {\n    console.log(category);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlcy5qcyJdLCJuYW1lcyI6WyJnZXRQbGFjZXMiLCJyZXEiLCJyZXMiLCJkaXN0YW5jZSIsImNvb3JkaW5hdGVzIiwiYm9keSIsImpzb24iLCJtZXNzYWdlIiwibGVuZ3RoIiwiZmlsdGVycyIsImRlbGl2ZXJ5Iiwic2VydmljZSIsInBsYWNlcyIsIlBsYWNlIiwiZmluZCIsImxvY2F0aW9uIiwiJG5lYXJTcGhlcmUiLCIkZ2VvbWV0cnkiLCJ0eXBlIiwiJG1heERpc3RhbmNlIiwiaXNGaWx0ZXJlZCIsIk9iamVjdCIsInZhbHVlcyIsInNvbWUiLCJmaWx0ZXJWYWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJjb3VudCIsImNyZWF0ZVBsYWNlIiwicHJlcGFyZWRQbGFjZSIsInNhdmVkUGxhY2UiLCJzYXZlIiwic3RhdHVzIiwicHV0UGxhY2UiLCJwbGFjZUlkIiwicGFyYW1zIiwidXBkYXRlZFBsYWNlIiwicmVwbGFjZU9uZSIsIl9pZCIsIm4iLCJuTW9kaWZpZWQiLCJyZW1vdmVQbGFjZSIsInBsYWNlRGVsZXRlZCIsImZpbmRPbmVBbmREZWxldGUiLCJnZXRQbGFjZSIsInBsYWNlRm91bmQiLCJmaW5kT25lIiwicmVjb21tZW5kZWRQbGFjZXMiLCJzaW1pbGFyUGxhY2VzIiwiZ2FsbGVyeSIsImNvbnRhY3QiLCJkZXNjcmlwdGlvbiIsInViaWNhdGlvbiIsInJhdGluZyIsInNjaGVkdWxlIiwibmFtZSIsInNlYXJjaEJ5Q2F0ZWdvcmllcyIsImNhdGVnb3J5IiwiZ2V0TGlrZXMiLCJ1c2VySWQiLCJsaWtlZFBsYWNlcyIsIiRlbGVtTWF0Y2giLCJ1c2VyIiwibGlrZUFQbGFjZSIsImlzTmFOIiwicGxhY2UiLCJmb3VuZCIsImZpbmRJbmRleCIsInJhdGUiLCJ0b1N0cmluZyIsInB1c2giLCJyYXRpbmdTYXZlZCIsImNhdGVnb3JpZXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUNPLE1BQU1BLFNBQVMsR0FBRyxP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LEtBQUssR0FBRyxDQUFDLENBQWIsRUFBZ0I7QUFDZEQsSUFBQUEsS0FBSyxDQUFDWixNQUFOLENBQWFhLEtBQWIsRUFBb0JFLElBQXBCLEdBQTJCZixNQUEzQjtBQUNELEdBRkQsTUFFTztBQUNMWSxJQUFBQSxLQUFLLENBQUNaLE1BQU4sQ0FBYWlCLElBQWIsQ0FBa0I7QUFDaEJSLE1BQUFBLElBQUksRUFBRUgsTUFEVTtBQUVoQlMsTUFBQUEsSUFBSSxFQUFFZjtBQUZVLEtBQWxCO0FBSUQ7O0FBQ0QsUUFBTWtCLFdBQVcsR0FBRyxNQUFNTixLQUFLLENBQUNsQyxJQUFOLEVBQTFCO0FBQ0E5QixFQUFBQSxHQUFHLENBQUNJLElBQUosQ0FBU2tFLFdBQVQ7QUFDRCxDQWhDTTs7OztBQWlDUCxNQUFNZixrQkFBa0IsR0FBSWdCLFVBQUQsSUFBZ0I7QUFDekMsT0FBSyxNQUFNZixRQUFYLElBQXVCZSxVQUF2QixFQUFtQztBQUNqQ2hELElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZZ0MsUUFBWjtBQUNEO0FBQ0YsQ0FKRCIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBsYWNlIGZyb20gJy4uL21vZGVscy9wbGFjZXMnXG5pbXBvcnQgeyBpc1ZhbGlkT2JqZWN0SWQgfSBmcm9tICcuLi9saWJzL3ZhbGlkYXRpb25zJ1xuZXhwb3J0IGNvbnN0IGdldFBsYWNlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIGRpc3RhbmNpYSwgdWJpY2FjaW9uLCB5IGZpbHRyb3MgZGUgbGEgYnVzcXVlZGFcbiAgLy8gdmFsaWRhciBkYXRvcyBkZSBlbnRyYWRhXG4gIC8vIGJ1c2NhciBlbiBsYSBiYXNlIGRlIGRhdG9zIGxvcyBzaXRpb3MgY2VyY2Fub3NcbiAgLy8gY29udGFyIGVsIHJlc3VsdGFkb1xuICBjb25zdCB7IGRpc3RhbmNlID0gMzAwLCBjb29yZGluYXRlcyA9IFsxMy40ODI5MDMsIC04OC4xNzU0MjddIH0gPSByZXEuYm9keVxuICBpZiAodHlwZW9mIChkaXN0YW5jZSkgIT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdEYXRvIGRlIGxhIGRpc3RhbmNpYSBlcnJvbmVvJ1xuICAgIH0pXG4gIH1cbiAgaWYgKHR5cGVvZiAoY29vcmRpbmF0ZXMpICE9PSAnb2JqZWN0JyB8fCBjb29yZGluYXRlcy5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHsgbWVzc2FnZTogJ05vIGhhIHByb3BvcmNpb25hZG8gdWJpY2FjacOzbicgfSlcbiAgfVxuICBjb25zdCB7IGZpbHRlcnMgPSB7IGRlbGl2ZXJ5OiBudWxsLCBzZXJ2aWNlOiBudWxsIH0gfSA9IHJlcS5ib2R5XG4gIGNvbnN0IHBsYWNlcyA9IGF3YWl0IFBsYWNlLmZpbmQoe1xuICAgIGxvY2F0aW9uOiB7XG4gICAgICAkbmVhclNwaGVyZToge1xuICAgICAgICAkZ2VvbWV0cnk6IHtcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgICAgICB9LFxuICAgICAgICAkbWF4RGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICB9XG4gICAgfVxuICB9KVxuICBjb25zdCBpc0ZpbHRlcmVkID0gT2JqZWN0LnZhbHVlcyhmaWx0ZXJzKS5zb21lKChmaWx0ZXJWYWx1ZSkgPT4gZmlsdGVyVmFsdWUgIT09IG51bGwpXG4gIGNvbnNvbGUubG9nKGlzRmlsdGVyZWQpXG4gIC8vIGNvbnN0IGFycmF5RmlsdGVycyA9IE9iamVjdC5lbnRyaWVzKGZpbHRlcnMpXG4gIC8vIGFycmF5RmlsdGVycy5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgLy8gICAgIGlmIChmaWx0ZXJbMV0pIHtcbiAgLy8gICAgICAgICBjb25zb2xlLmxvZyhmaWx0ZXJbMV0pXG4gIC8vICAgICAgICAgcGxhY2VzLndoZXJlKGZpbHRlclswXSwgZmlsdGVyWzFdKVxuICAvLyAgICAgfVxuICAvLyB9KVxuICByZXMuanNvbih7XG4gICAgcmVzdWx0OiBwbGFjZXMsXG4gICAgY291bnQ6IHBsYWNlcy5sZW5ndGhcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBjcmVhdGVQbGFjZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIGluZm9ybWFjaW9uIGRlIGxhcyBwcm9waWVkYWRlcyBkZWwgc2l0aW9cbiAgLy8gZ3VhcmRhIGVuIGxhIGJhc2UgZGUgZGF0b3MgZWwgc2l0aW9cbiAgY29uc3QgcHJlcGFyZWRQbGFjZSA9IG5ldyBQbGFjZShyZXEuYm9keSlcbiAgY29uc3Qgc2F2ZWRQbGFjZSA9IGF3YWl0IHByZXBhcmVkUGxhY2Uuc2F2ZSgpXG4gIHJlcy5zdGF0dXMoMjAxKS5qc29uKHNhdmVkUGxhY2UpXG59XG5leHBvcnQgY29uc3QgcHV0UGxhY2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgLy8gb2J0ZW5lciBJRCBkZWwgc2l0aW9cbiAgLy8gb2J0ZW5lciBvYmpldG8gY29uIG51ZXZhcyB2YWxvcmVzIGRlbCBzaXRpb1xuICAvLyBhY3R1YWxpemFyIGVsIHNpdGlvIGNvbiBJRFxuICBjb25zdCB7IHBsYWNlSWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCFwbGFjZUlkKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlbCBsdWdhcidcbiAgICB9KVxuICB9XG4gIGlmICghaXNWYWxpZE9iamVjdElkKHBsYWNlSWQpKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdFbCBpZCBkZWwgbHVnYXIgbm8gZXMgdmFsaWRvJ1xuICAgIH0pXG4gIH1cbiAgY29uc3QgdXBkYXRlZFBsYWNlID0gYXdhaXQgUGxhY2UucmVwbGFjZU9uZSh7IF9pZDogcGxhY2VJZCB9LCByZXEuYm9keSlcbiAgaWYgKHVwZGF0ZWRQbGFjZS5uID09PSAwKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBleGlzdGUgZXNlIGx1Z2FyJ1xuICAgIH0pXG4gIH1cbiAgaWYgKHVwZGF0ZWRQbGFjZS5uTW9kaWZpZWQgPT09IDApIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ05vIHNlIHB1ZG8gZWRpdGFyIGVsIGx1Z2FyJ1xuICAgIH0pXG4gIH1cbiAgcmVzLmpzb24odXBkYXRlZFBsYWNlKVxufVxuZXhwb3J0IGNvbnN0IHJlbW92ZVBsYWNlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIG9idGVuZXIgSUQgZGVsIHNpdGlvXG4gIC8vIGVsaW1pbmFyIHVuIHNpdGlvIGNvbiBJRFxuICBjb25zdCB7IHBsYWNlSWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCFwbGFjZUlkKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlbCBsdWdhcidcbiAgICB9KVxuICB9XG4gIGlmICghaXNWYWxpZE9iamVjdElkKHBsYWNlSWQpKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdFbCBpZCBkZWwgbHVnYXIgbm8gZXMgdmFsaWRvJ1xuICAgIH0pXG4gIH1cbiAgY29uc3QgcGxhY2VEZWxldGVkID0gYXdhaXQgUGxhY2UuZmluZE9uZUFuZERlbGV0ZSh7IF9pZDogcGxhY2VJZCB9KVxuICAvLyAgY29uc3QgcGxhY2VEZWxldGVkID0gYXdhaXQgUGxhY2UuZmluZEJ5SWRBbmRSZW1vdmUocGxhY2VJZClcbiAgaWYgKCFwbGFjZURlbGV0ZWQpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ05vIGV4aXN0ZSBlc2UgbHVnYXInXG4gICAgfSlcbiAgfVxuXG4gIHJlcy5qc29uKHBsYWNlRGVsZXRlZClcbn1cbmV4cG9ydCBjb25zdCBnZXRQbGFjZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIElEIGRlbCBzaXRpb1xuICAvLyBvYnRlbmVyIGluZm9ybWFjaW9uIGRlbCBzaXRpbyBjb24gZWwgSURcbiAgY29uc3QgeyBwbGFjZUlkIH0gPSByZXEucGFyYW1zXG4gIGlmICghcGxhY2VJZCkge1xuICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiAnTm8gaGEgcHJvcG9yY2lvbmFkbyBpZCBkZWwgbHVnYXInXG4gICAgfSlcbiAgfVxuXG4gIGlmICghaXNWYWxpZE9iamVjdElkKHBsYWNlSWQpKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdFbCBpZCBkZWwgbHVnYXIgbm8gZXMgdmFsaWRvJ1xuICAgIH0pXG4gIH1cbiAgY29uc3QgcGxhY2VGb3VuZCA9IGF3YWl0IFBsYWNlLmZpbmRPbmUoeyBfaWQ6IHBsYWNlSWQgfSlcbiAgaWYgKCFwbGFjZUZvdW5kKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBleGlzdGUgZXNlIGx1Z2FyJ1xuICAgIH0pXG4gIH1cbiAgcmVzLmpzb24ocGxhY2VGb3VuZClcbn1cbmV4cG9ydCBjb25zdCByZWNvbW1lbmRlZFBsYWNlcyA9IChyZXEsIHJlcykgPT4ge1xuICAvLyBidXNjYXIgbG9zIGNlcmNhbm9zIGNvbiBsYXMgY2F0ZWdvcmlhcyBtYXMgYnVzY2FkYXMgZGVsIHVzdWFyaW9cbiAgLy8gb2J0ZW5lciBjYXRlZ29yaWFzIG1hcyBidXNjYWRhc1xuICAvLyBmaWx0cmFyIHBvciBsb3MgbWVqb3JlcyB2YWxvcmFkb3NcbiAgY29uc3QgeyBwbGFjZUlkIH0gPSByZXEucGFyYW1zXG4gIGNvbnNvbGUubG9nKGBJZCBQbGFjZSBpcyAke3BsYWNlSWR9YClcbiAgY29uc29sZS5sb2cocmVxLmJvZHkpXG4gIHJlcy5qc29uKHtcbiAgICBtZXNzYWdlOiAnR2V0IFJlY29tbWVuZGVkIFBsYWNlcydcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBzaW1pbGFyUGxhY2VzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIG9idGVuZXIgSUQgZGVsIHNpdGlvXG4gIC8vIG9idGVuZXIgY2F0ZWdvcmlhcyBkZWwgc2l0aW9cbiAgLy8gYnVzY2FyIHNpdGlvcyBjb24gbGFzIGNhdGVnb3JpYXMgZGVsIElEXG4gIGNvbnN0IHsgcGxhY2VJZCB9ID0gcmVxLnBhcmFtc1xuICBpZiAoIXBsYWNlSWQpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ05vIGhhIHByb3BvcmNpb25hZG8gaWQgZGVsIGx1Z2FyJ1xuICAgIH0pXG4gIH1cblxuICBpZiAoIWlzVmFsaWRPYmplY3RJZChwbGFjZUlkKSkge1xuICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiAnRWwgaWQgZGVsIGx1Z2FyIG5vIGVzIHZhbGlkbydcbiAgICB9KVxuICB9XG4gIGNvbnN0IHBsYWNlRm91bmQgPSBhd2FpdCBQbGFjZS5maW5kT25lKHtcbiAgICBfaWQ6IHBsYWNlSWRcbiAgfSwge1xuICAgIGdhbGxlcnk6IDAsXG4gICAgY29udGFjdDogMCxcbiAgICBkZXNjcmlwdGlvbjogMCxcbiAgICB1YmljYXRpb246IDAsXG4gICAgcmF0aW5nOiAwLFxuICAgIHNjaGVkdWxlOiAwLFxuICAgIG5hbWU6IDBcbiAgfSlcbiAgc2VhcmNoQnlDYXRlZ29yaWVzKHBsYWNlRm91bmQuY2F0ZWdvcnkpXG4gIHJlcy5qc29uKHtcbiAgICBtZXNzYWdlOiAnR2V0IFNpbWlsYXIgaW4gNTAwbXRzIFBsYWNlcydcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBnZXRMaWtlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIGVsIElEIGRlbCB1c3VhcmlvXG4gIC8vIG9idGVuZXIgdG9kb3MgbG9zIHNpdGlvcyBxdWUgZWwgdXN1YXJpbyBoYSBsaWtlYWRvXG4gIGNvbnN0IHsgdXNlcklkIH0gPSByZXFcbiAgY29uc29sZS5sb2codXNlcklkKVxuICBjb25zdCBsaWtlZFBsYWNlcyA9IGF3YWl0IFBsYWNlLmZpbmQoe1xuICAgIHJhdGluZzoge1xuICAgICAgJGVsZW1NYXRjaDoge1xuICAgICAgICB1c2VyOiB1c2VySWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIC8vICBjb25zb2xlLmxvZygnR2V0IExpa2VkIFBsYWNlcycpXG4gIHJlcy5qc29uKGxpa2VkUGxhY2VzKVxufVxuZXhwb3J0IGNvbnN0IGxpa2VBUGxhY2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgLy8gb2J0ZW5lciBJRCBkZWwgc2l0aW8geSBlbCB1c3VhcmlvXG4gIC8vIG9idGVuZXIgZWwgdmFsb3IgZGVsIFJhdGluZ1xuICAvLyBvYnRlbmVyIHNpdGlvIGRlbCBJRFxuICAvLyBtb2RpZmljYXIgZWwgYXJyZWdsbyBjb24gbG9zIGxpa2VzIGRlbCBzaXRpb1xuICBjb25zdCB7IHJhdGluZyB9ID0gcmVxLmJvZHlcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcVxuICBjb25zdCB7IHBsYWNlSWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCFpc1ZhbGlkT2JqZWN0SWQocGxhY2VJZCkpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ0VsIGlkIGRlbCBsdWdhciBubyBlcyB2YWxpZG8nXG4gICAgfSlcbiAgfVxuXG4gIGlmICgocmF0aW5nID4gNSB8fCByYXRpbmcgPCAwKSB8fCAhcmF0aW5nIHx8IGlzTmFOKHJhdGluZykpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ0NhbGlmaWNhY2lvbiBubyB2YWxpZGEnXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHBsYWNlID0gYXdhaXQgUGxhY2UuZmluZE9uZSh7IF9pZDogcGxhY2VJZCB9KVxuICBjb25zdCBmb3VuZCA9IHBsYWNlLnJhdGluZy5maW5kSW5kZXgoKHJhdGUpID0+IHJhdGUudXNlci50b1N0cmluZygpID09PSB1c2VySWQpXG4gIGlmIChmb3VuZCA+IC0xKSB7XG4gICAgcGxhY2UucmF0aW5nW2ZvdW5kXS5yYXRlID0gcmF0aW5nXG4gIH0gZWxzZSB7XG4gICAgcGxhY2UucmF0aW5nLnB1c2goe1xuICAgICAgdXNlcjogdXNlcklkLFxuICAgICAgcmF0ZTogcmF0aW5nXG4gICAgfSlcbiAgfVxuICBjb25zdCByYXRpbmdTYXZlZCA9IGF3YWl0IHBsYWNlLnNhdmUoKVxuICByZXMuanNvbihyYXRpbmdTYXZlZClcbn1cbmNvbnN0IHNlYXJjaEJ5Q2F0ZWdvcmllcyA9IChjYXRlZ29yaWVzKSA9PiB7XG4gIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgIGNvbnNvbGUubG9nKGNhdGVnb3J5KVxuICB9XG59XG4iXX0=","map":{"version":3,"sources":["places.js"],"names":["getPlaces","req","res","distance","coordinates","body","json","message","length","filters","delivery","service","places","Place","find","location","$nearSphere","$geometry","type","$maxDistance","isFiltered","Object","values","some","filterValue","console","log","result","count","createPlace","preparedPlace","savedPlace","save","status","putPlace","placeId","params","updatedPlace","replaceOne","_id","n","nModified","removePlace","placeDeleted","findOneAndDelete","getPlace","placeFound","findOne","recommendedPlaces","similarPlaces","gallery","contact","description","ubication","rating","schedule","name","searchByCategories","category","getLikes","userId","likedPlaces","$elemMatch","user","likeAPlace","isNaN","place","found","findIndex","rate","toString","push","ratingSaved","categories"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/","sourcesContent":["import Place from '../models/places'\nimport { isValidObjectId } from '../libs/validations'\nexport const getPlaces = async (req, res) => {\n  // obtener distancia, ubicacion, y filtros de la busqueda\n  // validar datos de entrada\n  // buscar en la base de datos los sitios cercanos\n  // contar el resultado\n  const { distance = 300, coordinates = [13.482903, -88.175427] } = req.body\n  if (typeof (distance) !== 'number') {\n    return res.json({\n      message: 'Dato de la distancia erroneo'\n    })\n  }\n  if (typeof (coordinates) !== 'object' || coordinates.length < 2) {\n    return res.json({ message: 'No ha proporcionado ubicaciÃ³n' })\n  }\n  const { filters = { delivery: null, service: null } } = req.body\n  const places = await Place.find({\n    location: {\n      $nearSphere: {\n        $geometry: {\n          type: 'Point',\n          coordinates: coordinates\n        },\n        $maxDistance: distance\n      }\n    }\n  })\n  const isFiltered = Object.values(filters).some((filterValue) => filterValue !== null)\n  console.log(isFiltered)\n  // const arrayFilters = Object.entries(filters)\n  // arrayFilters.forEach((filter) => {\n  //     if (filter[1]) {\n  //         console.log(filter[1])\n  //         places.where(filter[0], filter[1])\n  //     }\n  // })\n  res.json({\n    result: places,\n    count: places.length\n  })\n}\nexport const createPlace = async (req, res) => {\n  // obtener informacion de las propiedades del sitio\n  // guarda en la base de datos el sitio\n  const preparedPlace = new Place(req.body)\n  const savedPlace = await preparedPlace.save()\n  res.status(201).json(savedPlace)\n}\nexport const putPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener objeto con nuevas valores del sitio\n  // actualizar el sitio con ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const updatedPlace = await Place.replaceOne({ _id: placeId }, req.body)\n  if (updatedPlace.n === 0) {\n    return res.json({\n      message: 'No existe ese lugar'\n    })\n  }\n  if (updatedPlace.nModified === 0) {\n    return res.json({\n      message: 'No se pudo editar el lugar'\n    })\n  }\n  res.json(updatedPlace)\n}\nexport const removePlace = async (req, res) => {\n  // obtener ID del sitio\n  // eliminar un sitio con ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const placeDeleted = await Place.findOneAndDelete({ _id: placeId })\n  //  const placeDeleted = await Place.findByIdAndRemove(placeId)\n  if (!placeDeleted) {\n    return res.json({\n      message: 'No existe ese lugar'\n    })\n  }\n\n  res.json(placeDeleted)\n}\nexport const getPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener informacion del sitio con el ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const placeFound = await Place.findOne({ _id: placeId })\n  if (!placeFound) {\n    return res.json({\n      message: 'No existe ese lugar'\n    })\n  }\n  res.json(placeFound)\n}\nexport const recommendedPlaces = (req, res) => {\n  // buscar los cercanos con las categorias mas buscadas del usuario\n  // obtener categorias mas buscadas\n  // filtrar por los mejores valorados\n  const { placeId } = req.params\n  console.log(`Id Place is ${placeId}`)\n  console.log(req.body)\n  res.json({\n    message: 'Get Recommended Places'\n  })\n}\nexport const similarPlaces = async (req, res) => {\n  // obtener ID del sitio\n  // obtener categorias del sitio\n  // buscar sitios con las categorias del ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const placeFound = await Place.findOne({\n    _id: placeId\n  }, {\n    gallery: 0,\n    contact: 0,\n    description: 0,\n    ubication: 0,\n    rating: 0,\n    schedule: 0,\n    name: 0\n  })\n  searchByCategories(placeFound.category)\n  res.json({\n    message: 'Get Similar in 500mts Places'\n  })\n}\nexport const getLikes = async (req, res) => {\n  // obtener el ID del usuario\n  // obtener todos los sitios que el usuario ha likeado\n  const { userId } = req\n  console.log(userId)\n  const likedPlaces = await Place.find({\n    rating: {\n      $elemMatch: {\n        user: userId\n      }\n    }\n  })\n  //  console.log('Get Liked Places')\n  res.json(likedPlaces)\n}\nexport const likeAPlace = async (req, res) => {\n  // obtener ID del sitio y el usuario\n  // obtener el valor del Rating\n  // obtener sitio del ID\n  // modificar el arreglo con los likes del sitio\n  const { rating } = req.body\n  const { userId } = req\n  const { placeId } = req.params\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n\n  if ((rating > 5 || rating < 0) || !rating || isNaN(rating)) {\n    return res.json({\n      message: 'Calificacion no valida'\n    })\n  }\n\n  const place = await Place.findOne({ _id: placeId })\n  const found = place.rating.findIndex((rate) => rate.user.toString() === userId)\n  if (found > -1) {\n    place.rating[found].rate = rating\n  } else {\n    place.rating.push({\n      user: userId,\n      rate: rating\n    })\n  }\n  const ratingSaved = await place.save()\n  res.json(ratingSaved)\n}\nconst searchByCategories = (categories) => {\n  for (const category of categories) {\n    console.log(category)\n  }\n}\n"]}},"mtime":1647679208771},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/places.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst socialMediaSchema = new _mongoose.Schema({\n  media: {\n    type: String,\n    enum: ['Instagram', 'Facebook', 'Twitter'],\n    required: true\n  },\n  user: {\n    type: String,\n    require: true\n  }\n});\nconst contactSchema = new _mongoose.Schema({\n  socialMedia: [socialMediaSchema],\n  telephone: [String]\n});\nconst locationSchema = new _mongoose.Schema({\n  type: {\n    type: String,\n    enum: ['Point'],\n    required: true\n  },\n  coordinates: {\n    type: [Number],\n    required: true\n  }\n});\nconst ratingScheme = new _mongoose.Schema({\n  user: {\n    ref: 'User',\n    type: _mongoose.Schema.Types.ObjectId\n  },\n  rate: Number\n});\nconst workDays = new _mongoose.Schema({\n  interval: String | [String],\n  from: String,\n  to: String\n}); // const foodSchema = new Schema({\n//     name: {\n//         type: String,\n//         required: true\n//     },\n//     description: {\n//         type: String,\n//         required: true,\n//     },\n//     price: {\n//         type: Number,\n//         required: true\n//     },\n//     photo: {\n//         type: String,\n//         required: true\n//     },\n//     category: {\n//         type: [String],\n//         required: true\n//     }\n// })\n\nconst placeSchema = new _mongoose.Schema({\n  category: {\n    type: [String],\n    required: [true, 'No se proporcionÃ³ categoria']\n  },\n  contact: contactSchema,\n  description: String,\n  gallery: [String],\n  ubication: String,\n  location: locationSchema,\n  name: {\n    type: String,\n    required: [true, 'No se proporcionÃ³ nombre']\n  },\n  rating: [ratingScheme],\n  schedule: [workDays] // menu: [foodSchema]\n\n});\nplaceSchema.index({\n  location: '2dsphere'\n}); // placeModel.createIndexes({ location: '2dsphere' })\n\nvar _default = (0, _mongoose.model)('Place', placeSchema);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlcy5qcyJdLCJuYW1lcyI6WyJzb2NpYWxNZWRpYVNjaGVtYSIsIlNjaGVtYSIsIm1lZGlhIiwidHlwZSIsIlN0cmluZyIsImVudW0iLCJyZXF1aXJlZCIsInVzZXIiLCJyZXF1aXJlIiwiY29udGFjdFNjaGVtYSIsInNvY2lhbE1lZGlhIiwidGVsZXBob25lIiwibG9jYXRpb25TY2hlbWEiLCJjb29yZGluYXRlcyIsIk51bWJlciIsInJhdGluZ1NjaGVtZSIsInJlZiIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyYXRlIiwid29ya0RheXMiLCJpbnRlcnZhbCIsImZyb20iLCJ0byIsInBsYWNlU2NoZW1hIiwiY2F0ZWdvcnkiLCJjb250YWN0IiwiZGVzY3JpcHRpb24iLCJnYWxsZXJ5IiwidWJpY2F0aW9uIiwibG9jYXRpb24iLCJuYW1lIiwicmF0aW5nIiwic2NoZWR1bGUiLCJpbmRleCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBLE1BQU1BLGlCQUFpQixHQUFHLElBQUlDLGdCQUFKLENBQVc7QUFDbkNDLEVBQUFBLEtBQUssRUFBRTtBQUNMQyxJQUFBQSxJQUFJLEVBQUVDLE1BREQ7QUFFTEMsSUFBQUEsSUFBSSxFQUFFLENBQUMsV0FBRCxFQUFjLFVBQWQsRUFBMEIsU0FBMUIsQ0FGRDtBQUdMQyxJQUFBQSxRQUFRLEVBQUU7QUFITCxHQUQ0QjtBQU1uQ0MsRUFBQUEsSUFBSSxFQUFFO0FBQ0pKLElBQUFBLElBQUksRUFBRUMsTUFERjtBQUVKSSxJQUFBQSxPQUFPLEVBQUU7QUFGTDtBQU42QixDQUFYLENBQTFCO0FBV0EsTUFBTUMsYUFBYSxHQUFHLElBQUlSLGdCQUFKLENBQVc7QUFDL0JTLEVBQUFBLFdBQVcsRUFBRSxDQUFDVixpQkFBRCxDQURrQjtBQUUvQlcsRUFBQUEsU0FBUyxFQUFFLENBQUNQLE1BQUQ7QUFGb0IsQ0FBWCxDQUF0QjtBQUlBLE1BQU1RLGNBQWMsR0FBRyxJQUFJWCxnQkFBSixDQUFXO0FBQ2hDRSxFQUFBQSxJQUFJLEVBQUU7QUFDSkEsSUFBQUEsSUFBSSxFQUFFQyxNQURGO0FBRUpDLElBQUFBLElBQUksRUFBRSxDQUFDLE9BQUQsQ0FGRjtBQUdKQyxJQUFBQSxRQUFRLEVBQUU7QUFITixHQUQwQjtBQU1oQ08sRUFBQUEsV0FBVyxFQUFFO0FBQ1hWLElBQUFBLElBQUksRUFBRSxDQUFDVyxNQUFELENBREs7QUFFWFIsSUFBQUEsUUFBUSxFQUFFO0FBRkM7QUFObUIsQ0FBWCxDQUF2QjtBQVdBLE1BQU1TLFlBQVksR0FBRyxJQUFJZCxnQkFBSixDQUFXO0FBQzlCTSxFQUFBQSxJQUFJLEVBQUU7QUFDSlMsSUFBQUEsR0FBRyxFQUFFLE1BREQ7QUFFSmIsSUFBQUEsSUFBSSxFQUFFRixpQkFBT2dCLEtBQVAsQ0FBYUM7QUFGZixHQUR3QjtBQUs5QkMsRUFBQUEsSUFBSSxFQUFFTDtBQUx3QixDQUFYLENBQXJCO0FBT0EsTUFBTU0sUUFBUSxHQUFHLElBQUluQixnQkFBSixDQUFXO0FBQzFCb0IsRUFBQUEsUUFBUSxFQUFFakIsTUFBTSxHQUFHLENBQUNBLE1BQUQsQ0FETztBQUUxQmtCLEVBQUFBLElBQUksRUFBRWxCLE1BRm9CO0FBRzFCbUIsRUFBQUEsRUFBRSxFQUFFbkI7QUFIc0IsQ0FBWCxDQUFqQixDLENBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsTUFBTW9CLFdBQVcsR0FBRyxJQUFJdkIsZ0JBQUosQ0FBVztBQUM3QndCLEVBQUFBLFFBQVEsRUFBRTtBQUNSdEIsSUFBQUEsSUFBSSxFQUFFLENBQUNDLE1BQUQsQ0FERTtBQUVSRSxJQUFBQSxRQUFRLEVBQUUsQ0FBQyxJQUFELEVBQU8sNkJBQVA7QUFGRixHQURtQjtBQUs3Qm9CLEVBQUFBLE9BQU8sRUFBRWpCLGFBTG9CO0FBTTdCa0IsRUFBQUEsV0FBVyxFQUFFdkIsTUFOZ0I7QUFPN0J3QixFQUFBQSxPQUFPLEVBQUUsQ0FBQ3hCLE1BQUQsQ0FQb0I7QUFRN0J5QixFQUFBQSxTQUFTLEVBQUV6QixNQVJrQjtBQVM3QjBCLEVBQUFBLFFBQVEsRUFBRWxCLGNBVG1CO0FBVTdCbUIsRUFBQUEsSUFBSSxFQUFFO0FBQ0o1QixJQUFBQSxJQUFJLEVBQUVDLE1BREY7QUFFSkUsSUFBQUEsUUFBUSxFQUFFLENBQUMsSUFBRCxFQUFPLDBCQUFQO0FBRk4sR0FWdUI7QUFjN0IwQixFQUFBQSxNQUFNLEVBQUUsQ0FBQ2pCLFlBQUQsQ0FkcUI7QUFlN0JrQixFQUFBQSxRQUFRLEVBQUUsQ0FBQ2IsUUFBRCxDQWZtQixDQWdCN0I7O0FBaEI2QixDQUFYLENBQXBCO0FBbUJBSSxXQUFXLENBQUNVLEtBQVosQ0FBa0I7QUFBRUosRUFBQUEsUUFBUSxFQUFFO0FBQVosQ0FBbEIsRSxDQUNBOztlQUNlLHFCQUFNLE9BQU4sRUFBZU4sV0FBZixDIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hLCBtb2RlbCB9IGZyb20gJ21vbmdvb3NlJ1xuY29uc3Qgc29jaWFsTWVkaWFTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgbWVkaWE6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydJbnN0YWdyYW0nLCAnRmFjZWJvb2snLCAnVHdpdHRlciddLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIHVzZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZTogdHJ1ZVxuICB9XG59KVxuY29uc3QgY29udGFjdFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBzb2NpYWxNZWRpYTogW3NvY2lhbE1lZGlhU2NoZW1hXSxcbiAgdGVsZXBob25lOiBbU3RyaW5nXVxufSlcbmNvbnN0IGxvY2F0aW9uU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHR5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydQb2ludCddLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIGNvb3JkaW5hdGVzOiB7XG4gICAgdHlwZTogW051bWJlcl0sXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfVxufSlcbmNvbnN0IHJhdGluZ1NjaGVtZSA9IG5ldyBTY2hlbWEoe1xuICB1c2VyOiB7XG4gICAgcmVmOiAnVXNlcicsXG4gICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkXG4gIH0sXG4gIHJhdGU6IE51bWJlclxufSlcbmNvbnN0IHdvcmtEYXlzID0gbmV3IFNjaGVtYSh7XG4gIGludGVydmFsOiBTdHJpbmcgfCBbU3RyaW5nXSxcbiAgZnJvbTogU3RyaW5nLFxuICB0bzogU3RyaW5nXG59KVxuLy8gY29uc3QgZm9vZFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuLy8gICAgIG5hbWU6IHtcbi8vICAgICAgICAgdHlwZTogU3RyaW5nLFxuLy8gICAgICAgICByZXF1aXJlZDogdHJ1ZVxuLy8gICAgIH0sXG4vLyAgICAgZGVzY3JpcHRpb246IHtcbi8vICAgICAgICAgdHlwZTogU3RyaW5nLFxuLy8gICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbi8vICAgICB9LFxuLy8gICAgIHByaWNlOiB7XG4vLyAgICAgICAgIHR5cGU6IE51bWJlcixcbi8vICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbi8vICAgICB9LFxuLy8gICAgIHBob3RvOiB7XG4vLyAgICAgICAgIHR5cGU6IFN0cmluZyxcbi8vICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbi8vICAgICB9LFxuLy8gICAgIGNhdGVnb3J5OiB7XG4vLyAgICAgICAgIHR5cGU6IFtTdHJpbmddLFxuLy8gICAgICAgICByZXF1aXJlZDogdHJ1ZVxuLy8gICAgIH1cbi8vIH0pXG5jb25zdCBwbGFjZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBjYXRlZ29yeToge1xuICAgIHR5cGU6IFtTdHJpbmddLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ05vIHNlIHByb3BvcmNpb27DsyBjYXRlZ29yaWEnXVxuICB9LFxuICBjb250YWN0OiBjb250YWN0U2NoZW1hLFxuICBkZXNjcmlwdGlvbjogU3RyaW5nLFxuICBnYWxsZXJ5OiBbU3RyaW5nXSxcbiAgdWJpY2F0aW9uOiBTdHJpbmcsXG4gIGxvY2F0aW9uOiBsb2NhdGlvblNjaGVtYSxcbiAgbmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdObyBzZSBwcm9wb3JjaW9uw7Mgbm9tYnJlJ11cbiAgfSxcbiAgcmF0aW5nOiBbcmF0aW5nU2NoZW1lXSxcbiAgc2NoZWR1bGU6IFt3b3JrRGF5c11cbiAgLy8gbWVudTogW2Zvb2RTY2hlbWFdXG59KVxuXG5wbGFjZVNjaGVtYS5pbmRleCh7IGxvY2F0aW9uOiAnMmRzcGhlcmUnIH0pXG4vLyBwbGFjZU1vZGVsLmNyZWF0ZUluZGV4ZXMoeyBsb2NhdGlvbjogJzJkc3BoZXJlJyB9KVxuZXhwb3J0IGRlZmF1bHQgbW9kZWwoJ1BsYWNlJywgcGxhY2VTY2hlbWEpXG4iXX0=","map":{"version":3,"sources":["places.js"],"names":["socialMediaSchema","Schema","media","type","String","enum","required","user","require","contactSchema","socialMedia","telephone","locationSchema","coordinates","Number","ratingScheme","ref","Types","ObjectId","rate","workDays","interval","from","to","placeSchema","category","contact","description","gallery","ubication","location","name","rating","schedule","index"],"mappings":";;;;;;;AAAA;;AACA,MAAMA,iBAAiB,GAAG,IAAIC,gBAAJ,CAAW;AACnCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,IAAI,EAAE,CAAC,WAAD,EAAc,UAAd,EAA0B,SAA1B,CAFD;AAGLC,IAAAA,QAAQ,EAAE;AAHL,GAD4B;AAMnCC,EAAAA,IAAI,EAAE;AACJJ,IAAAA,IAAI,EAAEC,MADF;AAEJI,IAAAA,OAAO,EAAE;AAFL;AAN6B,CAAX,CAA1B;AAWA,MAAMC,aAAa,GAAG,IAAIR,gBAAJ,CAAW;AAC/BS,EAAAA,WAAW,EAAE,CAACV,iBAAD,CADkB;AAE/BW,EAAAA,SAAS,EAAE,CAACP,MAAD;AAFoB,CAAX,CAAtB;AAIA,MAAMQ,cAAc,GAAG,IAAIX,gBAAJ,CAAW;AAChCE,EAAAA,IAAI,EAAE;AACJA,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,IAAI,EAAE,CAAC,OAAD,CAFF;AAGJC,IAAAA,QAAQ,EAAE;AAHN,GAD0B;AAMhCO,EAAAA,WAAW,EAAE;AACXV,IAAAA,IAAI,EAAE,CAACW,MAAD,CADK;AAEXR,IAAAA,QAAQ,EAAE;AAFC;AANmB,CAAX,CAAvB;AAWA,MAAMS,YAAY,GAAG,IAAId,gBAAJ,CAAW;AAC9BM,EAAAA,IAAI,EAAE;AACJS,IAAAA,GAAG,EAAE,MADD;AAEJb,IAAAA,IAAI,EAAEF,iBAAOgB,KAAP,CAAaC;AAFf,GADwB;AAK9BC,EAAAA,IAAI,EAAEL;AALwB,CAAX,CAArB;AAOA,MAAMM,QAAQ,GAAG,IAAInB,gBAAJ,CAAW;AAC1BoB,EAAAA,QAAQ,EAAEjB,MAAM,GAAG,CAACA,MAAD,CADO;AAE1BkB,EAAAA,IAAI,EAAElB,MAFoB;AAG1BmB,EAAAA,EAAE,EAAEnB;AAHsB,CAAX,CAAjB,C,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMoB,WAAW,GAAG,IAAIvB,gBAAJ,CAAW;AAC7BwB,EAAAA,QAAQ,EAAE;AACRtB,IAAAA,IAAI,EAAE,CAACC,MAAD,CADE;AAERE,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,6BAAP;AAFF,GADmB;AAK7BoB,EAAAA,OAAO,EAAEjB,aALoB;AAM7BkB,EAAAA,WAAW,EAAEvB,MANgB;AAO7BwB,EAAAA,OAAO,EAAE,CAACxB,MAAD,CAPoB;AAQ7ByB,EAAAA,SAAS,EAAEzB,MARkB;AAS7B0B,EAAAA,QAAQ,EAAElB,cATmB;AAU7BmB,EAAAA,IAAI,EAAE;AACJ5B,IAAAA,IAAI,EAAEC,MADF;AAEJE,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,0BAAP;AAFN,GAVuB;AAc7B0B,EAAAA,MAAM,EAAE,CAACjB,YAAD,CAdqB;AAe7BkB,EAAAA,QAAQ,EAAE,CAACb,QAAD,CAfmB,CAgB7B;;AAhB6B,CAAX,CAApB;AAmBAI,WAAW,CAACU,KAAZ,CAAkB;AAAEJ,EAAAA,QAAQ,EAAE;AAAZ,CAAlB,E,CACA;;eACe,qBAAM,OAAN,EAAeN,WAAf,C","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/","sourcesContent":["import { Schema, model } from 'mongoose'\nconst socialMediaSchema = new Schema({\n  media: {\n    type: String,\n    enum: ['Instagram', 'Facebook', 'Twitter'],\n    required: true\n  },\n  user: {\n    type: String,\n    require: true\n  }\n})\nconst contactSchema = new Schema({\n  socialMedia: [socialMediaSchema],\n  telephone: [String]\n})\nconst locationSchema = new Schema({\n  type: {\n    type: String,\n    enum: ['Point'],\n    required: true\n  },\n  coordinates: {\n    type: [Number],\n    required: true\n  }\n})\nconst ratingScheme = new Schema({\n  user: {\n    ref: 'User',\n    type: Schema.Types.ObjectId\n  },\n  rate: Number\n})\nconst workDays = new Schema({\n  interval: String | [String],\n  from: String,\n  to: String\n})\n// const foodSchema = new Schema({\n//     name: {\n//         type: String,\n//         required: true\n//     },\n//     description: {\n//         type: String,\n//         required: true,\n//     },\n//     price: {\n//         type: Number,\n//         required: true\n//     },\n//     photo: {\n//         type: String,\n//         required: true\n//     },\n//     category: {\n//         type: [String],\n//         required: true\n//     }\n// })\nconst placeSchema = new Schema({\n  category: {\n    type: [String],\n    required: [true, 'No se proporcionÃ³ categoria']\n  },\n  contact: contactSchema,\n  description: String,\n  gallery: [String],\n  ubication: String,\n  location: locationSchema,\n  name: {\n    type: String,\n    required: [true, 'No se proporcionÃ³ nombre']\n  },\n  rating: [ratingScheme],\n  schedule: [workDays]\n  // menu: [foodSchema]\n})\n\nplaceSchema.index({ location: '2dsphere' })\n// placeModel.createIndexes({ location: '2dsphere' })\nexport default model('Place', placeSchema)\n"]}},"mtime":1647678627799},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/validations.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidObjectId = void 0;\n\nconst isValidObjectId = id => id.match(/^[0-9a-fA-F]{24}$/);\n\nexports.isValidObjectId = isValidObjectId;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRpb25zLmpzIl0sIm5hbWVzIjpbImlzVmFsaWRPYmplY3RJZCIsImlkIiwibWF0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTyxNQUFNQSxlQUFlLEdBQUlDLEVBQUQsSUFBUUEsRUFBRSxDQUFDQyxLQUFILENBQVMsbUJBQVQsQ0FBaEMiLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjL2xpYnMvIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlzVmFsaWRPYmplY3RJZCA9IChpZCkgPT4gaWQubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLylcbiJdfQ==","map":{"version":3,"sources":["validations.js"],"names":["isValidObjectId","id","match"],"mappings":";;;;;;;AAAO,MAAMA,eAAe,GAAIC,EAAD,IAAQA,EAAE,CAACC,KAAH,CAAS,mBAAT,CAAhC","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/","sourcesContent":["export const isValidObjectId = (id) => id.match(/^[0-9a-fA-F]{24}$/)\n"]}},"mtime":1647679332634},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/middlewares/authorization.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tokenVerification = exports.isSeller = exports.isModerator = exports.isAdmin = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _users = _interopRequireDefault(require(\"../models/users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst noNeededInfo = {\n  password: 0,\n  photoUrl: 0,\n  email: 0,\n  fullName: 0,\n  createdAt: 0,\n  updatedAt: 0\n};\n\nconst tokenVerification = async (req, res, next) => {\n  const {\n    authorization\n  } = req.headers;\n  if (!authorization) return res.status(403).json({\n    message: 'No token provided'\n  });\n\n  try {\n    const decoded = _jsonwebtoken.default.verify(authorization, process.env.TOKEN_SECRET);\n\n    req.userId = decoded?.id; //  console.log(`userId is ${req.userId}`)\n\n    const userFound = await _users.default.findOne({\n      _id: decoded?.id\n    }, {\n      password: 0\n    });\n    if (!userFound) return res.status(404).json({\n      message: 'User doesnt exist'\n    });\n    next();\n  } catch (error) {\n    //  console.error(error)\n    if (error.name === 'TokenExpiredError') res.status(401).json({\n      message: 'Token Expired'\n    });\n    if (error.name === 'JsonWebTokenError') res.status(401).json({\n      message: 'Token Invalido'\n    });\n  }\n};\n\nexports.tokenVerification = tokenVerification;\n\nconst isModerator = async (req, res, next) => {\n  const user = await _users.default.findOne({\n    _id: req.userId\n  }, {\n    noNeededInfo\n  }).populate('roles');\n\n  for (const role of user.roles) {\n    if (role.name === 'Moderator') {\n      next();\n      return;\n    }\n  }\n\n  res.status(403).json(getMessageResponse({\n    role: 'Moderator'\n  }));\n};\n\nexports.isModerator = isModerator;\n\nconst isAdmin = async (req, res, next) => {\n  const user = await _users.default.findOne({\n    _id: req.userId\n  }, {\n    noNeededInfo\n  }).populate('roles');\n\n  for (const role of user.roles) {\n    if (role.name === 'Admin') {\n      next();\n      return;\n    }\n  }\n\n  res.status(403).json(getMessageResponse({\n    role: 'Admin'\n  }));\n};\n\nexports.isAdmin = isAdmin;\n\nconst isSeller = async (req, res, next) => {\n  const user = await _users.default.findOne({\n    _id: req.userId\n  }, {\n    noNeededInfo\n  }).populate('roles');\n\n  for (const role of user.roles) {\n    if (role.name === 'Seller') {\n      next();\n      return;\n    }\n  }\n\n  res.status(403).json(getMessageResponse({\n    role: 'Seller'\n  }));\n};\n\nexports.isSeller = isSeller;\n\nconst getMessageResponse = ({\n  role\n}) => {\n  return {\n    message: `Require ${role} Role`\n  };\n}; // (getMessageResponse('admin'))()\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsibm9OZWVkZWRJbmZvIiwicGFzc3dvcmQiLCJwaG90b1VybCIsImVtYWlsIiwiZnVsbE5hbWUiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJ0b2tlblZlcmlmaWNhdGlvbiIsInJlcSIsInJlcyIsIm5leHQiLCJhdXRob3JpemF0aW9uIiwiaGVhZGVycyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZGVjb2RlZCIsImp3dCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJUT0tFTl9TRUNSRVQiLCJ1c2VySWQiLCJpZCIsInVzZXJGb3VuZCIsIlVzZXIiLCJmaW5kT25lIiwiX2lkIiwiZXJyb3IiLCJuYW1lIiwiaXNNb2RlcmF0b3IiLCJ1c2VyIiwicG9wdWxhdGUiLCJyb2xlIiwicm9sZXMiLCJnZXRNZXNzYWdlUmVzcG9uc2UiLCJpc0FkbWluIiwiaXNTZWxsZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLFlBQVksR0FBRztBQUNuQkMsRUFBQUEsUUFBUSxFQUFFLENBRFM7QUFFbkJDLEVBQUFBLFFBQVEsRUFBRSxDQUZTO0FBR25CQyxFQUFBQSxLQUFLLEVBQUUsQ0FIWTtBQUluQkMsRUFBQUEsUUFBUSxFQUFFLENBSlM7QUFLbkJDLEVBQUFBLFNBQVMsRUFBRSxDQUxRO0FBTW5CQyxFQUFBQSxTQUFTLEVBQUU7QUFOUSxDQUFyQjs7QUFTTyxNQUFNQyxpQkFBaUIsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0FBQ3pELFFBQU07QUFBRUMsSUFBQUE7QUFBRixNQUFvQkgsR0FBRyxDQUFDSSxPQUE5QjtBQUNBLE1BQUksQ0FBQ0QsYUFBTCxFQUFvQixPQUFPRixHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUFyQixDQUFQOztBQUNw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bkIsR0FBRyxDQUFDYztBQUFYLEdBQWIsRUFBa0M7QUFBRXRCLElBQUFBO0FBQUYsR0FBbEMsRUFBb0RnQyxRQUFwRCxDQUE2RCxPQUE3RCxDQUFuQjs7QUFDQSxPQUFLLE1BQU1DLElBQVgsSUFBbUJGLElBQUksQ0FBQ0csS0FBeEIsRUFBK0I7QUFDN0IsUUFBSUQsSUFBSSxDQUFDSixJQUFMLEtBQWMsUUFBbEIsRUFBNEI7QUFDMUJuQixNQUFBQSxJQUFJO0FBQ0o7QUFDRDtBQUNGOztBQUNERCxFQUFBQSxHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQnFCLGtCQUFrQixDQUFDO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQUQsQ0FBdkM7QUFDRCxDQVRNOzs7O0FBV1AsTUFBTUUsa0JBQWtCLEdBQUcsQ0FBQztBQUFFRixFQUFBQTtBQUFGLENBQUQsS0FBYztBQUN2QyxTQUFPO0FBQUVsQixJQUFBQSxPQUFPLEVBQUcsV0FBVWtCLElBQUs7QUFBM0IsR0FBUDtBQUNELENBRkQsQyxDQUdBIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VycydcblxuY29uc3Qgbm9OZWVkZWRJbmZvID0ge1xuICBwYXNzd29yZDogMCxcbiAgcGhvdG9Vcmw6IDAsXG4gIGVtYWlsOiAwLFxuICBmdWxsTmFtZTogMCxcbiAgY3JlYXRlZEF0OiAwLFxuICB1cGRhdGVkQXQ6IDBcbn1cblxuZXhwb3J0IGNvbnN0IHRva2VuVmVyaWZpY2F0aW9uID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgYXV0aG9yaXphdGlvbiB9ID0gcmVxLmhlYWRlcnNcbiAgaWYgKCFhdXRob3JpemF0aW9uKSByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnTm8gdG9rZW4gcHJvdmlkZWQnIH0pXG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkoYXV0aG9yaXphdGlvbiwgcHJvY2Vzcy5lbnYuVE9LRU5fU0VDUkVUKVxuICAgIHJlcS51c2VySWQgPSBkZWNvZGVkPy5pZFxuICAgIC8vICBjb25zb2xlLmxvZyhgdXNlcklkIGlzICR7cmVxLnVzZXJJZH1gKVxuICAgIGNvbnN0IHVzZXJGb3VuZCA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogZGVjb2RlZD8uaWQgfSwgeyBwYXNzd29yZDogMCB9KVxuICAgIGlmICghdXNlckZvdW5kKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBkb2VzbnQgZXhpc3QnIH0pXG4gICAgbmV4dCgpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdUb2tlbkV4cGlyZWRFcnJvcicpIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1Rva2VuIEV4cGlyZWQnIH0pXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdKc29uV2ViVG9rZW5FcnJvcicpIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1Rva2VuIEludmFsaWRvJyB9KVxuICB9XG59XG5leHBvcnQgY29uc3QgaXNNb2RlcmF0b3IgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogcmVxLnVzZXJJZCB9LCB7IG5vTmVlZGVkSW5mbyB9KS5wb3B1bGF0ZSgncm9sZXMnKVxuICBmb3IgKGNvbnN0IHJvbGUgb2YgdXNlci5yb2xlcykge1xuICAgIGlmIChyb2xlLm5hbWUgPT09ICdNb2RlcmF0b3InKSB7XG4gICAgICBuZXh0KClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxuICByZXMuc3RhdHVzKDQwMykuanNvbihnZXRNZXNzYWdlUmVzcG9uc2UoeyByb2xlOiAnTW9kZXJhdG9yJyB9KSlcbn1cbmV4cG9ydCBjb25zdCBpc0FkbWluID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHJlcS51c2VySWQgfSwgeyBub05lZWRlZEluZm8gfSkucG9wdWxhdGUoJ3JvbGVzJylcbiAgZm9yIChjb25zdCByb2xlIG9mIHVzZXIucm9sZXMpIHtcbiAgICBpZiAocm9sZS5uYW1lID09PSAnQWRtaW4nKSB7XG4gICAgICBuZXh0KClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxuICByZXMuc3RhdHVzKDQwMykuanNvbihnZXRNZXNzYWdlUmVzcG9uc2UoeyByb2xlOiAnQWRtaW4nIH0pKVxufVxuZXhwb3J0IGNvbnN0IGlzU2VsbGVyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHJlcS51c2VySWQgfSwgeyBub05lZWRlZEluZm8gfSkucG9wdWxhdGUoJ3JvbGVzJylcbiAgZm9yIChjb25zdCByb2xlIG9mIHVzZXIucm9sZXMpIHtcbiAgICBpZiAocm9sZS5uYW1lID09PSAnU2VsbGVyJykge1xuICAgICAgbmV4dCgpXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cbiAgcmVzLnN0YXR1cyg0MDMpLmpzb24oZ2V0TWVzc2FnZVJlc3BvbnNlKHsgcm9sZTogJ1NlbGxlcicgfSkpXG59XG5cbmNvbnN0IGdldE1lc3NhZ2VSZXNwb25zZSA9ICh7IHJvbGUgfSkgPT4ge1xuICByZXR1cm4geyBtZXNzYWdlOiBgUmVxdWlyZSAke3JvbGV9IFJvbGVgIH1cbn1cbi8vIChnZXRNZXNzYWdlUmVzcG9uc2UoJ2FkbWluJykpKClcbiJdfQ==","map":{"version":3,"sources":["authorization.js"],"names":["noNeededInfo","password","photoUrl","email","fullName","createdAt","updatedAt","tokenVerification","req","res","next","authorization","headers","status","json","message","decoded","jwt","verify","process","env","TOKEN_SECRET","userId","id","userFound","User","findOne","_id","error","name","isModerator","user","populate","role","roles","getMessageResponse","isAdmin","isSeller"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/middlewares/","sourcesContent":["import jwt from 'jsonwebtoken'\nimport User from '../models/users'\n\nconst noNeededInfo = {\n  password: 0,\n  photoUrl: 0,\n  email: 0,\n  fullName: 0,\n  createdAt: 0,\n  updatedAt: 0\n}\n\nexport const tokenVerification = async (req, res, next) => {\n  const { authorization } = req.headers\n  if (!authorization) return res.status(403).json({ message: 'No token provided' })\n  try {\n    const decoded = jwt.verify(authorization, process.env.TOKEN_SECRET)\n    req.userId = decoded?.id\n    //  console.log(`userId is ${req.userId}`)\n    const userFound = await User.findOne({ _id: decoded?.id }, { password: 0 })\n    if (!userFound) return res.status(404).json({ message: 'User doesnt exist' })\n    next()\n  } catch (error) {\n    //  console.error(error)\n    if (error.name === 'TokenExpiredError') res.status(401).json({ message: 'Token Expired' })\n    if (error.name === 'JsonWebTokenError') res.status(401).json({ message: 'Token Invalido' })\n  }\n}\nexport const isModerator = async (req, res, next) => {\n  const user = await User.findOne({ _id: req.userId }, { noNeededInfo }).populate('roles')\n  for (const role of user.roles) {\n    if (role.name === 'Moderator') {\n      next()\n      return\n    }\n  }\n  res.status(403).json(getMessageResponse({ role: 'Moderator' }))\n}\nexport const isAdmin = async (req, res, next) => {\n  const user = await User.findOne({ _id: req.userId }, { noNeededInfo }).populate('roles')\n  for (const role of user.roles) {\n    if (role.name === 'Admin') {\n      next()\n      return\n    }\n  }\n  res.status(403).json(getMessageResponse({ role: 'Admin' }))\n}\nexport const isSeller = async (req, res, next) => {\n  const user = await User.findOne({ _id: req.userId }, { noNeededInfo }).populate('roles')\n  for (const role of user.roles) {\n    if (role.name === 'Seller') {\n      next()\n      return\n    }\n  }\n  res.status(403).json(getMessageResponse({ role: 'Seller' }))\n}\n\nconst getMessageResponse = ({ role }) => {\n  return { message: `Require ${role} Role` }\n}\n// (getMessageResponse('admin'))()\n"]}},"mtime":1647678294668},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userSchema = new _mongoose.Schema({\n  email: {\n    type: String,\n    require: true,\n    unique: true\n  },\n  fullName: {\n    type: String,\n    require: true\n  },\n  password: {\n    type: String,\n    require: true\n  },\n  roles: [{\n    ref: 'Role',\n    type: _mongoose.Schema.Types.ObjectId\n  }],\n  photoUrl: {\n    type: String,\n    default: 'http://localhost:3000/users/photo/default.png'\n  }\n}, {\n  timestamps: true,\n  versionKey: false\n});\n\nuserSchema.statics.encryptPassword = async password => {\n  const salt = await _bcrypt.default.genSalt(12);\n  return await _bcrypt.default.hash(password, salt);\n};\n\nuserSchema.statics.verifyPassword = async (password, hash) => {\n  return await _bcrypt.default.compare(password, hash);\n};\n\nvar _default = (0, _mongoose.model)('User', userSchema);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJlbWFpbCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlIiwidW5pcXVlIiwiZnVsbE5hbWUiLCJwYXNzd29yZCIsInJvbGVzIiwicmVmIiwiVHlwZXMiLCJPYmplY3RJZCIsInBob3RvVXJsIiwiZGVmYXVsdCIsInRpbWVzdGFtcHMiLCJ2ZXJzaW9uS2V5Iiwic3RhdGljcyIsImVuY3J5cHRQYXNzd29yZCIsInNhbHQiLCJiY3J5cHQiLCJnZW5TYWx0IiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBQ0EsTUFBTUEsVUFBVSxHQUFHLElBQUlDLGdCQUFKLENBQVc7QUFDNUJDLEVBQUFBLEtBQUssRUFBRTtBQUNMQyxJQUFBQSxJQUFJLEVBQUVDLE1BREQ7QUFFTEMsSUFBQUEsT0FBTyxFQUFFLElBRko7QUFHTEMsSUFBQUEsTUFBTSxFQUFFO0FBSEgsR0FEcUI7QUFNNUJDLEVBQUFBLFFBQVEsRUFBRTtBQUNSSixJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUkMsSUFBQUEsT0FBTyxFQUFFO0FBRkQsR0FOa0I7QUFVNUJHLEVBQUFBLFFBQVEsRUFBRTtBQUNSTCxJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUkMsSUFBQUEsT0FBTyxFQUFFO0FBRkQsR0FWa0I7QUFjNUJJLEVBQUFBLEtBQUssRUFBRSxDQUNMO0FBQ0VDLElBQUFBLEdBQUcsRUFBRSxNQURQO0FBRUVQLElBQUFBLElBQUksRUFBRUYsaUJBQU9VLEtBQVAsQ0FBYUM7QUFGckIsR0FESyxDQWRxQjtBQW9CNUJDLEVBQUFBLFFBQVEsRUFBRTtBQUNSVixJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUlUsSUFBQUEsT0FBTyxFQUFFO0FBRkQ7QUFwQmtCLENBQVgsRUF3QmhCO0FBQ0RDLEVBQUFBLFVBQVUsRUFBRSxJQURYO0FBRURDLEVBQUFBLFVBQVUsRUFBRTtBQUZYLENBeEJnQixDQUFuQjs7QUE0QkFoQixVQUFVLENBQUNpQixPQUFYLENBQW1CQyxlQUFuQixHQUFxQyxNQUFPVixRQUFQLElBQW9CO0FBQ3ZELFFBQU1XLElBQUksR0FBRyxNQUFNQyxnQkFBT0MsT0FBUCxDQUFlLEVBQWYsQ0FBbkI7QUFDQSxTQUFPLE1BQU1ELGdCQUFPRSxJQUFQLENBQVlkLFFBQVosRUFBc0JXLElBQXRCLENBQWI7QUFDRCxDQUhEOztBQUlBbkIsVUFBVSxDQUFDaUIsT0FBWCxDQUFtQk0sY0FBbkIsR0FBb0MsT0FBT2YsUUFBUCxFQUFpQmMsSUFBakIsS0FBMEI7QUFDNUQsU0FBTyxNQUFNRixnQkFBT0ksT0FBUCxDQUFlaEIsUUFBZixFQUF5QmMsSUFBekIsQ0FBYjtBQUNELENBRkQ7O2VBR2UscUJBQU0sTUFBTixFQUFjdEIsVUFBZCxDIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hLCBtb2RlbCB9IGZyb20gJ21vbmdvb3NlJ1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGVtYWlsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmU6IHRydWUsXG4gICAgdW5pcXVlOiB0cnVlXG4gIH0sXG4gIGZ1bGxOYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmU6IHRydWVcbiAgfSxcbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZTogdHJ1ZVxuICB9LFxuICByb2xlczogW1xuICAgIHtcbiAgICAgIHJlZjogJ1JvbGUnLFxuICAgICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkXG4gICAgfVxuICBdLFxuICBwaG90b1VybDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzL3Bob3RvL2RlZmF1bHQucG5nJ1xuICB9XG59LCB7XG4gIHRpbWVzdGFtcHM6IHRydWUsXG4gIHZlcnNpb25LZXk6IGZhbHNlXG59KVxudXNlclNjaGVtYS5zdGF0aWNzLmVuY3J5cHRQYXNzd29yZCA9IGFzeW5jIChwYXNzd29yZCkgPT4ge1xuICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTIpXG4gIHJldHVybiBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdClcbn1cbnVzZXJTY2hlbWEuc3RhdGljcy52ZXJpZnlQYXNzd29yZCA9IGFzeW5jIChwYXNzd29yZCwgaGFzaCkgPT4ge1xuICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2gpXG59XG5leHBvcnQgZGVmYXVsdCBtb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpXG4iXX0=","map":{"version":3,"sources":["users.js"],"names":["userSchema","Schema","email","type","String","require","unique","fullName","password","roles","ref","Types","ObjectId","photoUrl","default","timestamps","versionKey","statics","encryptPassword","salt","bcrypt","genSalt","hash","verifyPassword","compare"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,OAAO,EAAE,IAFJ;AAGLC,IAAAA,MAAM,EAAE;AAHH,GADqB;AAM5BC,EAAAA,QAAQ,EAAE;AACRJ,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,OAAO,EAAE;AAFD,GANkB;AAU5BG,EAAAA,QAAQ,EAAE;AACRL,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,OAAO,EAAE;AAFD,GAVkB;AAc5BI,EAAAA,KAAK,EAAE,CACL;AACEC,IAAAA,GAAG,EAAE,MADP;AAEEP,IAAAA,IAAI,EAAEF,iBAAOU,KAAP,CAAaC;AAFrB,GADK,CAdqB;AAoB5BC,EAAAA,QAAQ,EAAE;AACRV,IAAAA,IAAI,EAAEC,MADE;AAERU,IAAAA,OAAO,EAAE;AAFD;AApBkB,CAAX,EAwBhB;AACDC,EAAAA,UAAU,EAAE,IADX;AAEDC,EAAAA,UAAU,EAAE;AAFX,CAxBgB,CAAnB;;AA4BAhB,UAAU,CAACiB,OAAX,CAAmBC,eAAnB,GAAqC,MAAOV,QAAP,IAAoB;AACvD,QAAMW,IAAI,GAAG,MAAMC,gBAAOC,OAAP,CAAe,EAAf,CAAnB;AACA,SAAO,MAAMD,gBAAOE,IAAP,CAAYd,QAAZ,EAAsBW,IAAtB,CAAb;AACD,CAHD;;AAIAnB,UAAU,CAACiB,OAAX,CAAmBM,cAAnB,GAAoC,OAAOf,QAAP,EAAiBc,IAAjB,KAA0B;AAC5D,SAAO,MAAMF,gBAAOI,OAAP,CAAehB,QAAf,EAAyBc,IAAzB,CAAb;AACD,CAFD;;eAGe,qBAAM,MAAN,EAActB,UAAd,C","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/","sourcesContent":["import { Schema, model } from 'mongoose'\nimport bcrypt from 'bcrypt'\nconst userSchema = new Schema({\n  email: {\n    type: String,\n    require: true,\n    unique: true\n  },\n  fullName: {\n    type: String,\n    require: true\n  },\n  password: {\n    type: String,\n    require: true\n  },\n  roles: [\n    {\n      ref: 'Role',\n      type: Schema.Types.ObjectId\n    }\n  ],\n  photoUrl: {\n    type: String,\n    default: 'http://localhost:3000/users/photo/default.png'\n  }\n}, {\n  timestamps: true,\n  versionKey: false\n})\nuserSchema.statics.encryptPassword = async (password) => {\n  const salt = await bcrypt.genSalt(12)\n  return await bcrypt.hash(password, salt)\n}\nuserSchema.statics.verifyPassword = async (password, hash) => {\n  return await bcrypt.compare(password, hash)\n}\nexport default model('User', userSchema)\n"]}},"mtime":1647678695356},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/places.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar placesController = _interopRequireWildcard(require(\"../controllers/places\"));\n\nvar authorization = _interopRequireWildcard(require(\"../middlewares/authorization\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.get('/', placesController.getPlaces);\nrouter.get('/similar/:placeId', [authorization.tokenVerification], placesController.similarPlaces);\nrouter.get('/recommendations/:placeId', [authorization.tokenVerification], placesController.recommendedPlaces);\nrouter.get('/likes', [authorization.tokenVerification], placesController.getLikes);\nrouter.get('/:placeId', placesController.getPlace);\nrouter.post('/', [authorization.tokenVerification, authorization.isModerator], placesController.createPlace);\nrouter.post('/like/:placeId', [authorization.tokenVerification], placesController.likeAPlace);\nrouter.put('/:placeId', [authorization.tokenVerification, authorization.isSeller], placesController.putPlace);\nrouter.delete('/:placeId', [authorization.tokenVerification, authorization.isAdmin]);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlcy5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJnZXQiLCJwbGFjZXNDb250cm9sbGVyIiwiZ2V0UGxhY2VzIiwiYXV0aG9yaXphdGlvbiIsInRva2VuVmVyaWZpY2F0aW9uIiwic2ltaWxhclBsYWNlcyIsInJlY29tbWVuZGVkUGxhY2VzIiwiZ2V0TGlrZXMiLCJnZXRQbGFjZSIsInBvc3QiLCJpc01vZGVyYXRvciIsImNyZWF0ZVBsYWNlIiwibGlrZUFQbGFjZSIsInB1dCIsImlzU2VsbGVyIiwicHV0UGxhY2UiLCJkZWxldGUiLCJpc0FkbWluIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUNBLE1BQU1BLE1BQU0sR0FBRyxzQkFBZjtBQUNBQSxNQUFNLENBQUNDLEdBQVAsQ0FBVyxHQUFYLEVBQWdCQyxnQkFBZ0IsQ0FBQ0MsU0FBakM7QUFDQUgsTUFBTSxDQUFDQyxHQUFQLENBQVcsbUJBQVgsRUFBZ0MsQ0FBQ0csYUFBYSxDQUFDQyxpQkFBZixDQUFoQyxFQUFtRUgsZ0JBQWdCLENBQUNJLGFBQXBGO0FBQ0FOLE1BQU0sQ0FBQ0MsR0FBUCxDQUFXLDJCQUFYLEVBQXdDLENBQUNHLGFBQWEsQ0FBQ0MsaUJBQWYsQ0FBeEMsRUFBMkVILGdCQUFnQixDQUFDSyxpQkFBNUY7QUFDQVAsTUFBTSxDQUFDQyxHQUFQLENBQVcsUUFBWCxFQUFxQixDQUFDRyxhQUFhLENBQUNDLGlCQUFmLENBQXJCLEVBQXdESCxnQkFBZ0IsQ0FBQ00sUUFBekU7QUFDQVIsTUFBTSxDQUFDQyxHQUFQLENBQVcsV0FBWCxFQUF3QkMsZ0JBQWdCLENBQUNPLFFBQXpDO0FBQ0FULE1BQU0sQ0FBQ1UsSUFBUCxDQUFZLEdBQVosRUFBaUIsQ0FBQ04sYUFBYSxDQUFDQyxpQkFBZixFQUFrQ0QsYUFBYSxDQUFDTyxXQUFoRCxDQUFqQixFQUErRVQsZ0JBQWdCLENBQUNVLFdBQWhHO0FBQ0FaLE1BQU0sQ0FBQ1UsSUFBUCxDQUFZLGdCQUFaLEVBQThCLENBQUNOLGFBQWEsQ0FBQ0MsaUJBQWYsQ0FBOUIsRUFBaUVILGdCQUFnQixDQUFDVyxVQUFsRjtBQUNBYixNQUFNLENBQUNjLEdBQVAsQ0FBVyxXQUFYLEVBQXdCLENBQUNWLGFBQWEsQ0FBQ0MsaUJBQWYsRUFBa0NELGFBQWEsQ0FBQ1csUUFBaEQsQ0FBeEIsRUFBbUZiLGdCQUFnQixDQUFDYyxRQUFwRztBQUNBaEIsTUFBTSxDQUFDaUIsTUFBUCxDQUFjLFdBQWQsRUFBMkIsQ0FBQ2IsYUFBYSxDQUFDQyxpQkFBZixFQUFrQ0QsYUFBYSxDQUFDYyxPQUFoRCxDQUEzQjtlQUVlbEIsTSIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgKiBhcyBwbGFjZXNDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL3BsYWNlcydcbmltcG9ydCAqIGFzIGF1dGhvcml6YXRpb24gZnJvbSAnLi4vbWlkZGxld2FyZXMvYXV0aG9yaXphdGlvbidcbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpXG5yb3V0ZXIuZ2V0KCcvJywgcGxhY2VzQ29udHJvbGxlci5nZXRQbGFjZXMpXG5yb3V0ZXIuZ2V0KCcvc2ltaWxhci86cGxhY2VJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5zaW1pbGFyUGxhY2VzKVxucm91dGVyLmdldCgnL3JlY29tbWVuZGF0aW9ucy86cGxhY2VJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5yZWNvbW1lbmRlZFBsYWNlcylcbnJvdXRlci5nZXQoJy9saWtlcycsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5nZXRMaWtlcylcbnJvdXRlci5nZXQoJy86cGxhY2VJZCcsIHBsYWNlc0NvbnRyb2xsZXIuZ2V0UGxhY2UpXG5yb3V0ZXIucG9zdCgnLycsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uLCBhdXRob3JpemF0aW9uLmlzTW9kZXJhdG9yXSwgcGxhY2VzQ29udHJvbGxlci5jcmVhdGVQbGFjZSlcbnJvdXRlci5wb3N0KCcvbGlrZS86cGxhY2VJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5saWtlQVBsYWNlKVxucm91dGVyLnB1dCgnLzpwbGFjZUlkJywgW2F1dGhvcml6YXRpb24udG9rZW5WZXJpZmljYXRpb24sIGF1dGhvcml6YXRpb24uaXNTZWxsZXJdLCBwbGFjZXNDb250cm9sbGVyLnB1dFBsYWNlKVxucm91dGVyLmRlbGV0ZSgnLzpwbGFjZUlkJywgW2F1dGhvcml6YXRpb24udG9rZW5WZXJpZmljYXRpb24sIGF1dGhvcml6YXRpb24uaXNBZG1pbl0pXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlclxuIl19","map":{"version":3,"sources":["places.js"],"names":["router","get","placesController","getPlaces","authorization","tokenVerification","similarPlaces","recommendedPlaces","getLikes","getPlace","post","isModerator","createPlace","likeAPlace","put","isSeller","putPlace","delete","isAdmin"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AACA,MAAMA,MAAM,GAAG,sBAAf;AACAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgBC,gBAAgB,CAACC,SAAjC;AACAH,MAAM,CAACC,GAAP,CAAW,mBAAX,EAAgC,CAACG,aAAa,CAACC,iBAAf,CAAhC,EAAmEH,gBAAgB,CAACI,aAApF;AACAN,MAAM,CAACC,GAAP,CAAW,2BAAX,EAAwC,CAACG,aAAa,CAACC,iBAAf,CAAxC,EAA2EH,gBAAgB,CAACK,iBAA5F;AACAP,MAAM,CAACC,GAAP,CAAW,QAAX,EAAqB,CAACG,aAAa,CAACC,iBAAf,CAArB,EAAwDH,gBAAgB,CAACM,QAAzE;AACAR,MAAM,CAACC,GAAP,CAAW,WAAX,EAAwBC,gBAAgB,CAACO,QAAzC;AACAT,MAAM,CAACU,IAAP,CAAY,GAAZ,EAAiB,CAACN,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACO,WAAhD,CAAjB,EAA+ET,gBAAgB,CAACU,WAAhG;AACAZ,MAAM,CAACU,IAAP,CAAY,gBAAZ,EAA8B,CAACN,aAAa,CAACC,iBAAf,CAA9B,EAAiEH,gBAAgB,CAACW,UAAlF;AACAb,MAAM,CAACc,GAAP,CAAW,WAAX,EAAwB,CAACV,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACW,QAAhD,CAAxB,EAAmFb,gBAAgB,CAACc,QAApG;AACAhB,MAAM,CAACiB,MAAP,CAAc,WAAd,EAA2B,CAACb,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACc,OAAhD,CAA3B;eAEelB,M","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/","sourcesContent":["import { Router } from 'express'\nimport * as placesController from '../controllers/places'\nimport * as authorization from '../middlewares/authorization'\nconst router = Router()\nrouter.get('/', placesController.getPlaces)\nrouter.get('/similar/:placeId', [authorization.tokenVerification], placesController.similarPlaces)\nrouter.get('/recommendations/:placeId', [authorization.tokenVerification], placesController.recommendedPlaces)\nrouter.get('/likes', [authorization.tokenVerification], placesController.getLikes)\nrouter.get('/:placeId', placesController.getPlace)\nrouter.post('/', [authorization.tokenVerification, authorization.isModerator], placesController.createPlace)\nrouter.post('/like/:placeId', [authorization.tokenVerification], placesController.likeAPlace)\nrouter.put('/:placeId', [authorization.tokenVerification, authorization.isSeller], placesController.putPlace)\nrouter.delete('/:placeId', [authorization.tokenVerification, authorization.isAdmin])\n\nexport default router\n"]}},"mtime":1647674649016},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/authentication.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar authenticationController = _interopRequireWildcard(require(\"../controllers/authentication\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.post('/signup', authenticationController.signUp);\nrouter.post('/login', authenticationController.login);\nrouter.post('/resetPassword', authenticationController.changePassword);\nrouter.post('/forgotPassword', authenticationController.forgotPassword);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInBvc3QiLCJhdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIiLCJzaWduVXAiLCJsb2dpbiIsImNoYW5nZVBhc3N3b3JkIiwiZm9yZ290UGFzc3dvcmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7Ozs7O0FBQ0EsTUFBTUEsTUFBTSxHQUFHLHNCQUFmO0FBQ0FBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZLFNBQVosRUFBdUJDLHdCQUF3QixDQUFDQyxNQUFoRDtBQUNBSCxNQUFNLENBQUNDLElBQVAsQ0FBWSxRQUFaLEVBQXNCQyx3QkFBd0IsQ0FBQ0UsS0FBL0M7QUFDQUosTUFBTSxDQUFDQyxJQUFQLENBQVksZ0JBQVosRUFBOEJDLHdCQUF3QixDQUFDRyxjQUF2RDtBQUNBTCxNQUFNLENBQUNDLElBQVAsQ0FBWSxpQkFBWixFQUErQkMsd0JBQXdCLENBQUNJLGNBQXhEO2VBRWVOLE0iLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0ICogYXMgYXV0aGVudGljYXRpb25Db250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL2F1dGhlbnRpY2F0aW9uJ1xuY29uc3Qgcm91dGVyID0gUm91dGVyKClcbnJvdXRlci5wb3N0KCcvc2lnbnVwJywgYXV0aGVudGljYXRpb25Db250cm9sbGVyLnNpZ25VcClcbnJvdXRlci5wb3N0KCcvbG9naW4nLCBhdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIubG9naW4pXG5yb3V0ZXIucG9zdCgnL3Jlc2V0UGFzc3dvcmQnLCBhdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIuY2hhbmdlUGFzc3dvcmQpXG5yb3V0ZXIucG9zdCgnL2ZvcmdvdFBhc3N3b3JkJywgYXV0aGVudGljYXRpb25Db250cm9sbGVyLmZvcmdvdFBhc3N3b3JkKVxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXJcbiJdfQ==","map":{"version":3,"sources":["authentication.js"],"names":["router","post","authenticationController","signUp","login","changePassword","forgotPassword"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AACA,MAAMA,MAAM,GAAG,sBAAf;AACAA,MAAM,CAACC,IAAP,CAAY,SAAZ,EAAuBC,wBAAwB,CAACC,MAAhD;AACAH,MAAM,CAACC,IAAP,CAAY,QAAZ,EAAsBC,wBAAwB,CAACE,KAA/C;AACAJ,MAAM,CAACC,IAAP,CAAY,gBAAZ,EAA8BC,wBAAwB,CAACG,cAAvD;AACAL,MAAM,CAACC,IAAP,CAAY,iBAAZ,EAA+BC,wBAAwB,CAACI,cAAxD;eAEeN,M","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/","sourcesContent":["import { Router } from 'express'\nimport * as authenticationController from '../controllers/authentication'\nconst router = Router()\nrouter.post('/signup', authenticationController.signUp)\nrouter.post('/login', authenticationController.login)\nrouter.post('/resetPassword', authenticationController.changePassword)\nrouter.post('/forgotPassword', authenticationController.forgotPassword)\n\nexport default router\n"]}},"mtime":1647674487752},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/authentication.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signUp = exports.login = exports.forgotPassword = exports.changePassword = void 0;\n\nvar _users = _interopRequireDefault(require(\"../models/users\"));\n\nvar _roles = _interopRequireDefault(require(\"../models/roles\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst signUp = async (req, res) => {\n  const {\n    email,\n    password,\n    fullName,\n    roles\n  } = req.body;\n  const existingUser = await _users.default.findOne({\n    email\n  });\n  if (existingUser) return res.json({\n    message: 'Ese correo ya esta registrado'\n  });\n  const newUser = new _users.default({\n    email,\n    password: await _users.default.encryptPassword(password),\n    fullName\n  });\n\n  if (roles) {\n    const foundRoles = await _roles.default.find({\n      name: {\n        $in: roles\n      }\n    });\n    newUser.roles = foundRoles.map(role => role._id);\n  } else {\n    const role = await _roles.default.findOne({\n      name: 'User'\n    });\n    newUser.roles = [role._id];\n  }\n\n  const savedUser = await newUser.save();\n\n  const token = _jsonwebtoken.default.sign({\n    id: savedUser._id\n  }, process.env.TOKEN_SECRET, {\n    expiresIn: 86400\n  });\n\n  res.json({\n    token\n  });\n};\n\nexports.signUp = signUp;\n\nconst login = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  const existingUser = await _users.default.findOne({\n    email\n  }); //  const existingUser = await User.findOne({ email }).populate('roles')\n\n  if (!existingUser) return res.status(400).json({\n    message: 'Ese correo electrÃ³nico no estÃ¡ registrado'\n  });\n  const matchedPassword = await _users.default.verifyPassword(password, existingUser.password);\n  if (!matchedPassword) return res.status(401).json({\n    message: 'VerifÃ­que el correo o la contraseÃ±a'\n  });\n\n  const token = _jsonwebtoken.default.sign({\n    id: existingUser._id\n  }, process.env.TOKEN_SECRET, {\n    expiresIn: 86400\n  });\n\n  res.json({\n    token\n  });\n};\n\nexports.login = login;\n\nconst changePassword = async (req, res) => {\n  const {\n    email,\n    password,\n    newPassword,\n    newPasswordConfirmation\n  } = req.body;\n  if (!email) return res.json({\n    message: 'No se proporcionÃ³ correo'\n  });\n  const existingUser = await _users.default.findOne({\n    email\n  });\n  if (!existingUser) return res.status(400).json({\n    message: 'Ese correo electrÃ³nico no estÃ¡ registrado'\n  });\n  const matchedPassword = await _users.default.verifyPassword(password, existingUser.password);\n  if (!matchedPassword) return res.status(401).json({\n    message: 'La contraseÃ±a actual es erronea'\n  });\n  if (newPassword !== newPasswordConfirmation) return res.status(401).json({\n    message: 'Nueva contraseÃ±a y confirmacion de nueva contraseÃ±a no coinciden'\n  });\n  existingUser.password = await _users.default.encryptPassword(newPassword);\n  const userUpdated = await _users.default.findOneAndUpdate({\n    _id: existingUser._id\n  }, existingUser, {\n    new: true\n  });\n  res.json({\n    userUpdated\n  });\n};\n\nexports.changePassword = changePassword;\n\nconst forgotPassword = (req, res) => {\n  const {\n    email\n  } = req.body;\n  res.json({\n    message: `Sending email to ${email}`\n  });\n};\n\nexports.forgotPassword = forgotPassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uLmpzIl0sIm5hbWVzIjpbInNpZ25VcCIsInJlcSIsInJlcyIsImVtYWlsIiwicGFzc3dvcmQiLCJmdWxsTmFtZSIsInJvbGVzIiwiYm9keSIsImV4aXN0aW5nVXNlciIsIlVzZXIiLCJmaW5kT25lIiwianNvbiIsIm1lc3NhZ2UiLCJuZXdVc2VyIiwiZW5jcnlwdFBhc3N3b3JkIiwiZm91bmRSb2xlcyIsIlJvbGUiLCJmaW5kIiwibmFtZSIsIiRpbiIsIm1hcCIsInJvbGUiLCJfaWQiLCJzYXZlZFVzZXIiLCJzYXZlIiwidG9rZW4iLCJqd3QiLCJzaWduIiwiaWQiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU5fU0VDUkVUIiwiZXhwaXJlc0luIiwibG9naW4iLCJzdGF0dXMiLCJtYXRjaGVkUGFzc3dvcmQiLCJ2ZXJpZnlQYXNzd29yZCIsImNoYW5nZVBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJuZXdQYXNzd29yZENvbmZpcm1hdGlvbiIsInVzZXJVcGRhdGVkIiwiZmluZE9uZUFuZFVwZGF0ZSIsIm5ldyIsImZvcmdvdFBhc3N3b3JkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDTyxNQUFNQSxNQUFNLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3hDLFFBQU07QUFBRUMsSUFBQUEsS0FBRjtBQUFTQyxJQUFBQSxRQUFUO0FBQW1CQyxJQUFBQSxRQUFuQjtBQUE2QkMsSUFBQUE7QUFBN0IsTUFBdUNMLEdBQUcsQ0FBQ00sSUFBakQ7QUFDQSxRQUFNQyxZQUFZLEdBQUcsTUFBTUMsZUFBS0MsT0FBTCxDQUFhO0FBQUVQLElBQUFBO0FBQUYsR0FBYixDQUEzQjtBQUNBLE1BQUlLLFlBQUosRUFBa0IsT0FBT04sR0FBRyxDQUFDUyxJQUFKLENBQVM7QUFBRUMsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBVCxDQUFQO0FBQ2xCLFFBQU1DLE9BQU8sR0FBRyxJQUFJSixjQUFKLENBQVM7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SUFBdEI7QUFDQUwsRUFBQUEsR0FBRyxDQUFDUyxJQUFKLENBQVM7QUFBRUMsSUFBQUEsT0FBTyxFQUFHLG9CQUFtQlQsS0FBTTtBQUFyQyxHQUFUO0FBQ0QsQ0FITSIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXJzJ1xuaW1wb3J0IFJvbGUgZnJvbSAnLi4vbW9kZWxzL3JvbGVzJ1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5leHBvcnQgY29uc3Qgc2lnblVwID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBmdWxsTmFtZSwgcm9sZXMgfSA9IHJlcS5ib2R5XG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pXG4gIGlmIChleGlzdGluZ1VzZXIpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdFc2UgY29ycmVvIHlhIGVzdGEgcmVnaXN0cmFkbycgfSlcbiAgY29uc3QgbmV3VXNlciA9IG5ldyBVc2VyKHsgZW1haWwsIHBhc3N3b3JkOiBhd2FpdCBVc2VyLmVuY3J5cHRQYXNzd29yZChwYXNzd29yZCksIGZ1bGxOYW1lIH0pXG4gIGlmIChyb2xlcykge1xuICAgIGNvbnN0IGZvdW5kUm9sZXMgPSBhd2FpdCBSb2xlLmZpbmQoeyBuYW1lOiB7ICRpbjogcm9sZXMgfSB9KVxuICAgIG5ld1VzZXIucm9sZXMgPSBmb3VuZFJvbGVzLm1hcChyb2xlID0+IHJvbGUuX2lkKVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJvbGUgPSBhd2FpdCBSb2xlLmZpbmRPbmUoeyBuYW1lOiAnVXNlcicgfSlcbiAgICBuZXdVc2VyLnJvbGVzID0gW3JvbGUuX2lkXVxuICB9XG4gIGNvbnN0IHNhdmVkVXNlciA9IGF3YWl0IG5ld1VzZXIuc2F2ZSgpXG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogc2F2ZWRVc2VyLl9pZCB9LCBwcm9jZXNzLmVudi5UT0tFTl9TRUNSRVQsIHsgZXhwaXJlc0luOiA4NjQwMCB9KVxuICByZXMuanNvbih7IHRva2VuIH0pXG59XG5leHBvcnQgY29uc3QgbG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5XG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pXG4gIC8vICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KS5wb3B1bGF0ZSgncm9sZXMnKVxuICBpZiAoIWV4aXN0aW5nVXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0VzZSBjb3JyZW8gZWxlY3Ryw7NuaWNvIG5vIGVzdMOhIHJlZ2lzdHJhZG8nIH0pXG4gIGNvbnN0IG1hdGNoZWRQYXNzd29yZCA9IGF3YWl0IFVzZXIudmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIGV4aXN0aW5nVXNlci5wYXNzd29yZClcbiAgaWYgKCFtYXRjaGVkUGFzc3dvcmQpIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdWZXJpZsOtcXVlIGVsIGNvcnJlbyBvIGxhIGNvbnRyYXNlw7FhJyB9KVxuICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgaWQ6IGV4aXN0aW5nVXNlci5faWQgfSwgcHJvY2Vzcy5lbnYuVE9LRU5fU0VDUkVULCB7IGV4cGlyZXNJbjogODY0MDAgfSlcbiAgcmVzLmpzb24oeyB0b2tlbiB9KVxufVxuZXhwb3J0IGNvbnN0IGNoYW5nZVBhc3N3b3JkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBuZXdQYXNzd29yZCwgbmV3UGFzc3dvcmRDb25maXJtYXRpb24gfSA9IHJlcS5ib2R5XG4gIGlmICghZW1haWwpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdObyBzZSBwcm9wb3JjaW9uw7MgY29ycmVvJyB9KVxuICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KVxuICBpZiAoIWV4aXN0aW5nVXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0VzZSBjb3JyZW8gZWxlY3Ryw7NuaWNvIG5vIGVzdMOhIHJlZ2lzdHJhZG8nIH0pXG4gIGNvbnN0IG1hdGNoZWRQYXNzd29yZCA9IGF3YWl0IFVzZXIudmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIGV4aXN0aW5nVXNlci5wYXNzd29yZClcbiAgaWYgKCFtYXRjaGVkUGFzc3dvcmQpIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdMYSBjb250cmFzZcOxYSBhY3R1YWwgZXMgZXJyb25lYScgfSlcbiAgaWYgKG5ld1Bhc3N3b3JkICE9PSBuZXdQYXNzd29yZENvbmZpcm1hdGlvbikgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ051ZXZhIGNvbnRyYXNlw7FhIHkgY29uZmlybWFjaW9uIGRlIG51ZXZhIGNvbnRyYXNlw7FhIG5vIGNvaW5jaWRlbicgfSlcbiAgZXhpc3RpbmdVc2VyLnBhc3N3b3JkID0gYXdhaXQgVXNlci5lbmNyeXB0UGFzc3dvcmQobmV3UGFzc3dvcmQpXG4gIGNvbnN0IHVzZXJVcGRhdGVkID0gYXdhaXQgVXNlci5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiBleGlzdGluZ1VzZXIuX2lkIH0sIGV4aXN0aW5nVXNlciwgeyBuZXc6IHRydWUgfSlcbiAgcmVzLmpzb24oeyB1c2VyVXBkYXRlZCB9KVxufVxuZXhwb3J0IGNvbnN0IGZvcmdvdFBhc3N3b3JkID0gKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5XG4gIHJlcy5qc29uKHsgbWVzc2FnZTogYFNlbmRpbmcgZW1haWwgdG8gJHtlbWFpbH1gIH0pXG59XG4iXX0=","map":{"version":3,"sources":["authentication.js"],"names":["signUp","req","res","email","password","fullName","roles","body","existingUser","User","findOne","json","message","newUser","encryptPassword","foundRoles","Role","find","name","$in","map","role","_id","savedUser","save","token","jwt","sign","id","process","env","TOKEN_SECRET","expiresIn","login","status","matchedPassword","verifyPassword","changePassword","newPassword","newPasswordConfirmation","userUpdated","findOneAndUpdate","new","forgotPassword"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/","sourcesContent":["import User from '../models/users'\nimport Role from '../models/roles'\nimport jwt from 'jsonwebtoken'\nexport const signUp = async (req, res) => {\n  const { email, password, fullName, roles } = req.body\n  const existingUser = await User.findOne({ email })\n  if (existingUser) return res.json({ message: 'Ese correo ya esta registrado' })\n  const newUser = new User({ email, password: await User.encryptPassword(password), fullName })\n  if (roles) {\n    const foundRoles = await Role.find({ name: { $in: roles } })\n    newUser.roles = foundRoles.map(role => role._id)\n  } else {\n    const role = await Role.findOne({ name: 'User' })\n    newUser.roles = [role._id]\n  }\n  const savedUser = await newUser.save()\n  const token = jwt.sign({ id: savedUser._id }, process.env.TOKEN_SECRET, { expiresIn: 86400 })\n  res.json({ token })\n}\nexport const login = async (req, res) => {\n  const { email, password } = req.body\n  const existingUser = await User.findOne({ email })\n  //  const existingUser = await User.findOne({ email }).populate('roles')\n  if (!existingUser) return res.status(400).json({ message: 'Ese correo electrÃ³nico no estÃ¡ registrado' })\n  const matchedPassword = await User.verifyPassword(password, existingUser.password)\n  if (!matchedPassword) return res.status(401).json({ message: 'VerifÃ­que el correo o la contraseÃ±a' })\n  const token = jwt.sign({ id: existingUser._id }, process.env.TOKEN_SECRET, { expiresIn: 86400 })\n  res.json({ token })\n}\nexport const changePassword = async (req, res) => {\n  const { email, password, newPassword, newPasswordConfirmation } = req.body\n  if (!email) return res.json({ message: 'No se proporcionÃ³ correo' })\n  const existingUser = await User.findOne({ email })\n  if (!existingUser) return res.status(400).json({ message: 'Ese correo electrÃ³nico no estÃ¡ registrado' })\n  const matchedPassword = await User.verifyPassword(password, existingUser.password)\n  if (!matchedPassword) return res.status(401).json({ message: 'La contraseÃ±a actual es erronea' })\n  if (newPassword !== newPasswordConfirmation) return res.status(401).json({ message: 'Nueva contraseÃ±a y confirmacion de nueva contraseÃ±a no coinciden' })\n  existingUser.password = await User.encryptPassword(newPassword)\n  const userUpdated = await User.findOneAndUpdate({ _id: existingUser._id }, existingUser, { new: true })\n  res.json({ userUpdated })\n}\nexport const forgotPassword = (req, res) => {\n  const { email } = req.body\n  res.json({ message: `Sending email to ${email}` })\n}\n"]}},"mtime":1647678545781},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst roleSchema = new _mongoose.Schema({\n  name: String\n}, {\n  versionKey: false\n});\n\nvar _default = (0, _mongoose.model)('Role', roleSchema);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvbGVzLmpzIl0sIm5hbWVzIjpbInJvbGVTY2hlbWEiLCJTY2hlbWEiLCJuYW1lIiwiU3RyaW5nIiwidmVyc2lvbktleSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0FBQzVCQyxFQUFBQSxJQUFJLEVBQUVDO0FBRHNCLENBQVgsRUFFaEI7QUFDREMsRUFBQUEsVUFBVSxFQUFFO0FBRFgsQ0FGZ0IsQ0FBbkI7O2VBS2UscUJBQU0sTUFBTixFQUFjSixVQUFkLEMiLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjL21vZGVscy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2hlbWEsIG1vZGVsIH0gZnJvbSAnbW9uZ29vc2UnXG5jb25zdCByb2xlU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIG5hbWU6IFN0cmluZ1xufSwge1xuICB2ZXJzaW9uS2V5OiBmYWxzZVxufSlcbmV4cG9ydCBkZWZhdWx0IG1vZGVsKCdSb2xlJywgcm9sZVNjaGVtYSlcbiJdfQ==","map":{"version":3,"sources":["roles.js"],"names":["roleSchema","Schema","name","String","versionKey"],"mappings":";;;;;;;AAAA;;AACA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,IAAI,EAAEC;AADsB,CAAX,EAEhB;AACDC,EAAAA,UAAU,EAAE;AADX,CAFgB,CAAnB;;eAKe,qBAAM,MAAN,EAAcJ,UAAd,C","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/","sourcesContent":["import { Schema, model } from 'mongoose'\nconst roleSchema = new Schema({\n  name: String\n}, {\n  versionKey: false\n})\nexport default model('Role', roleSchema)\n"]}},"mtime":1647679434368},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar userController = _interopRequireWildcard(require(\"../controllers/users\"));\n\nvar authorization = _interopRequireWildcard(require(\"../middlewares/authorization\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// import multer from 'multer'\nconst router = (0, _express.Router)(); // const store = multer.diskStorage({\n//   destination: (req, file, cb) => {\n//     cb(null, 'uploads/profile')\n//   },\n//   filename: (req, file, cb) => {\n//     const uniqueName = Date.now().toString()\n//     const extension = file.originalname.split('.').at(-1)\n//     cb(null, `${uniqueName}.${extension}`)\n//   }\n// })\n// const upload = multer({ storage: store })\n\nrouter.get('/', [authorization.tokenVerification, authorization.isModerator], userController.getAllUsers);\nrouter.get('/:userId', [authorization.tokenVerification], userController.getUserInfo);\nrouter.put('/:userId', [authorization.tokenVerification, authorization.isModerator], userController.updateUser);\nrouter.delete('/:userId', [authorization.tokenVerification, authorization.isAdmin], userController.deleteUser);\nrouter.post('/photo/:userId', [authorization.tokenVerification,\n/*  upload.single('avatar'),  */\nuserController.prepareToUpdateImage], userController.updateUser);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsImdldCIsImF1dGhvcml6YXRpb24iLCJ0b2tlblZlcmlmaWNhdGlvbiIsImlzTW9kZXJhdG9yIiwidXNlckNvbnRyb2xsZXIiLCJnZXRBbGxVc2VycyIsImdldFVzZXJJbmZvIiwicHV0IiwidXBkYXRlVXNlciIsImRlbGV0ZSIsImlzQWRtaW4iLCJkZWxldGVVc2VyIiwicG9zdCIsInByZXBhcmVUb1VwZGF0ZUltYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUNBO0FBQ0EsTUFBTUEsTUFBTSxHQUFHLHNCQUFmLEMsQ0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBQSxNQUFNLENBQUNDLEdBQVAsQ0FBVyxHQUFYLEVBQWdCLENBQUNDLGFBQWEsQ0FBQ0MsaUJBQWYsRUFBa0NELGFBQWEsQ0FBQ0UsV0FBaEQsQ0FBaEIsRUFBOEVDLGNBQWMsQ0FBQ0MsV0FBN0Y7QUFDQU4sTUFBTSxDQUFDQyxHQUFQLENBQVcsVUFBWCxFQUF1QixDQUFDQyxhQUFhLENBQUNDLGlCQUFmLENBQXZCLEVBQTBERSxjQUFjLENBQUNFLFdBQXpFO0FBQ0FQLE1BQU0sQ0FBQ1EsR0FBUCxDQUFXLFVBQVgsRUFBdUIsQ0FBQ04sYUFBYSxDQUFDQyxpQkFBZixFQUFrQ0QsYUFBYSxDQUFDRSxXQUFoRCxDQUF2QixFQUFxRkMsY0FBYyxDQUFDSSxVQUFwRztBQUNBVCxNQUFNLENBQUNVLE1BQVAsQ0FBYyxVQUFkLEVBQTBCLENBQUNSLGFBQWEsQ0FBQ0MsaUJBQWYsRUFBa0NELGFBQWEsQ0FBQ1MsT0FBaEQsQ0FBMUIsRUFBb0ZOLGNBQWMsQ0FBQ08sVUFBbkc7QUFDQVosTUFBTSxDQUFDYSxJQUFQLENBQVksZ0JBQVosRUFBOEIsQ0FBQ1gsYUFBYSxDQUFDQyxpQkFBZjtBQUFrQztBQUFpQ0UsY0FBYyxDQUFDUyxvQkFBbEYsQ0FBOUIsRUFBdUlULGNBQWMsQ0FBQ0ksVUFBdEo7ZUFFZVQsTSIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgKiBhcyB1c2VyQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy91c2VycydcbmltcG9ydCAqIGFzIGF1dGhvcml6YXRpb24gZnJvbSAnLi4vbWlkZGxld2FyZXMvYXV0aG9yaXphdGlvbidcbi8vIGltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJ1xuY29uc3Qgcm91dGVyID0gUm91dGVyKClcblxuLy8gY29uc3Qgc3RvcmUgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xuLy8gICBkZXN0aW5hdGlvbjogKHJlcSwgZmlsZSwgY2IpID0+IHtcbi8vICAgICBjYihudWxsLCAndXBsb2Fkcy9wcm9maWxlJylcbi8vICAgfSxcbi8vICAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XG4vLyAgICAgY29uc3QgdW5pcXVlTmFtZSA9IERhdGUubm93KCkudG9TdHJpbmcoKVxuLy8gICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGUub3JpZ2luYWxuYW1lLnNwbGl0KCcuJykuYXQoLTEpXG4vLyAgICAgY2IobnVsbCwgYCR7dW5pcXVlTmFtZX0uJHtleHRlbnNpb259YClcbi8vICAgfVxuLy8gfSlcblxuLy8gY29uc3QgdXBsb2FkID0gbXVsdGVyKHsgc3RvcmFnZTogc3RvcmUgfSlcbnJvdXRlci5nZXQoJy8nLCBbYXV0aG9yaXphdGlvbi50b2tlblZlcmlmaWNhdGlvbiwgYXV0aG9yaXphdGlvbi5pc01vZGVyYXRvcl0sIHVzZXJDb250cm9sbGVyLmdldEFsbFVzZXJzKVxucm91dGVyLmdldCgnLzp1c2VySWQnLCBbYXV0aG9yaXphdGlvbi50b2tlblZlcmlmaWNhdGlvbl0sIHVzZXJDb250cm9sbGVyLmdldFVzZXJJbmZvKVxucm91dGVyLnB1dCgnLzp1c2VySWQnLCBbYXV0aG9yaXphdGlvbi50b2tlblZlcmlmaWNhdGlvbiwgYXV0aG9yaXphdGlvbi5pc01vZGVyYXRvcl0sIHVzZXJDb250cm9sbGVyLnVwZGF0ZVVzZXIpXG5yb3V0ZXIuZGVsZXRlKCcvOnVzZXJJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uLCBhdXRob3JpemF0aW9uLmlzQWRtaW5dLCB1c2VyQ29udHJvbGxlci5kZWxldGVVc2VyKVxucm91dGVyLnBvc3QoJy9waG90by86dXNlcklkJywgW2F1dGhvcml6YXRpb24udG9rZW5WZXJpZmljYXRpb24sIC8qICB1cGxvYWQuc2luZ2xlKCdhdmF0YXInKSwgICovIHVzZXJDb250cm9sbGVyLnByZXBhcmVUb1VwZGF0ZUltYWdlXSwgdXNlckNvbnRyb2xsZXIudXBkYXRlVXNlcilcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXG4iXX0=","map":{"version":3,"sources":["users.js"],"names":["router","get","authorization","tokenVerification","isModerator","userController","getAllUsers","getUserInfo","put","updateUser","delete","isAdmin","deleteUser","post","prepareToUpdateImage"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AACA;AACA,MAAMA,MAAM,GAAG,sBAAf,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgB,CAACC,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACE,WAAhD,CAAhB,EAA8EC,cAAc,CAACC,WAA7F;AACAN,MAAM,CAACC,GAAP,CAAW,UAAX,EAAuB,CAACC,aAAa,CAACC,iBAAf,CAAvB,EAA0DE,cAAc,CAACE,WAAzE;AACAP,MAAM,CAACQ,GAAP,CAAW,UAAX,EAAuB,CAACN,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACE,WAAhD,CAAvB,EAAqFC,cAAc,CAACI,UAApG;AACAT,MAAM,CAACU,MAAP,CAAc,UAAd,EAA0B,CAACR,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACS,OAAhD,CAA1B,EAAoFN,cAAc,CAACO,UAAnG;AACAZ,MAAM,CAACa,IAAP,CAAY,gBAAZ,EAA8B,CAACX,aAAa,CAACC,iBAAf;AAAkC;AAAiCE,cAAc,CAACS,oBAAlF,CAA9B,EAAuIT,cAAc,CAACI,UAAtJ;eAEeT,M","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/","sourcesContent":["import { Router } from 'express'\nimport * as userController from '../controllers/users'\nimport * as authorization from '../middlewares/authorization'\n// import multer from 'multer'\nconst router = Router()\n\n// const store = multer.diskStorage({\n//   destination: (req, file, cb) => {\n//     cb(null, 'uploads/profile')\n//   },\n//   filename: (req, file, cb) => {\n//     const uniqueName = Date.now().toString()\n//     const extension = file.originalname.split('.').at(-1)\n//     cb(null, `${uniqueName}.${extension}`)\n//   }\n// })\n\n// const upload = multer({ storage: store })\nrouter.get('/', [authorization.tokenVerification, authorization.isModerator], userController.getAllUsers)\nrouter.get('/:userId', [authorization.tokenVerification], userController.getUserInfo)\nrouter.put('/:userId', [authorization.tokenVerification, authorization.isModerator], userController.updateUser)\nrouter.delete('/:userId', [authorization.tokenVerification, authorization.isAdmin], userController.deleteUser)\nrouter.post('/photo/:userId', [authorization.tokenVerification, /*  upload.single('avatar'),  */ userController.prepareToUpdateImage], userController.updateUser)\n\nexport default router\n"]}},"mtime":1647678378025},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUser = exports.prepareToUpdateImage = exports.getUserInfo = exports.getAllUsers = exports.deleteUser = void 0;\n\nvar _users = _interopRequireDefault(require(\"../models/users\"));\n\nvar _validations = require(\"../libs/validations\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getUserInfo = async (req, res) => {\n  const {\n    userId\n  } = req.params;\n  if (!userId) return res.json({\n    message: 'No se ha proporcionado id de usuario'\n  });\n  if (!(0, _validations.isValidObjectId)(userId)) return res.json({\n    message: 'Id no valido'\n  });\n  const userFound = await _users.default.findOne({\n    _id: userId\n  }, {\n    password: 0\n  });\n  res.json(userFound);\n};\n\nexports.getUserInfo = getUserInfo;\n\nconst getAllUsers = async (req, res) => {\n  res.json(await _users.default.find({}, {\n    password: 0,\n    createdAt: 0,\n    updatedAt: 0\n  }).populate('roles'));\n};\n\nexports.getAllUsers = getAllUsers;\n\nconst updateUser = async (req, res) => {\n  const {\n    userId\n  } = req.params;\n  const {\n    body\n  } = req;\n  if (!userId) return res.json({\n    message: 'No se ha proporcionado id de usuario'\n  });\n  if (!(0, _validations.isValidObjectId)(userId)) return res.json({\n    message: 'Id no valido'\n  }); //  if (req.userId === userId) return res.json({ message: 'No se puede actualizar usted mismo' })\n\n  console.log('updateUser', body);\n  const userUpdated = await _users.default.findOneAndUpdate({\n    _id: userId\n  }, body, {\n    new: true\n  });\n  res.json({\n    userUpdated\n  });\n};\n\nexports.updateUser = updateUser;\n\nconst deleteUser = async (req, res) => {\n  const {\n    userId\n  } = req.params;\n  if (!userId) return res.json({\n    message: 'No se ha proporcionado id de usuario'\n  });\n  if (!(0, _validations.isValidObjectId)(userId)) return res.json({\n    message: 'Id no valido'\n  });\n  if (req.userId === userId) return res.json({\n    message: 'No se puede eliminar usted mismo'\n  });\n  const userDeleted = await _users.default.findOneAndDelete({\n    _id: userId\n  });\n  if (!userDeleted) return res.json({\n    message: 'Usuario no existe'\n  });\n  res.json(userDeleted);\n};\n\nexports.deleteUser = deleteUser;\n\nconst prepareToUpdateImage = (req, res, next) => {\n  const {\n    file\n  } = req;\n  const {\n    filename\n  } = file;\n  const photoUrl = `${req.protocol}://${req.get('host')}/gallery/profile/${filename}`;\n  req.body = {\n    photoUrl\n  };\n  next();\n};\n\nexports.prepareToUpdateImage = prepareToUpdateImage;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImdldFVzZXJJbmZvIiwicmVxIiwicmVzIiwidXNlcklkIiwicGFyYW1zIiwianNvbiIsIm1lc3NhZ2UiLCJ1c2VyRm91bmQiLCJVc2VyIiwiZmluZE9uZSIsIl9pZCIsInBhc3N3b3JkIiwiZ2V0QWxsVXNlcnMiLCJmaW5kIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwicG9wdWxhdGUiLCJ1cGRhdGVVc2VyIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyVXBkYXRlZCIsImZpbmRPbmVBbmRVcGRhdGUiLCJuZXciLCJkZWxldGVVc2VyIiwidXNlckRlbGV0ZWQiLCJmaW5kT25lQW5kRGVsZXRlIiwicHJlcGFyZVRvVXBkYXRlSW1hZ2UiLCJuZXh0IiwiZmlsZSIsImZpbGVuYW1lIiwicGhvdG9VcmwiLCJwcm90b2NvbCIsImdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBQ08sTUFBTUEsV0FBVyxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUM3QyxRQUFNO0FBQUVDLElBQUFBO0FBQUYsTUFBYUYsR0FBRyxDQUFDRyxNQUF2QjtBQUNBLE1BQUksQ0FBQ0QsTUFBTCxFQUFhLE9BQU9ELEdBQUcsQ0FBQ0csSUFBSixDQUFTO0FBQUVDLElBQUFBLE9BQU8sRUFBRTtBQUFYLEdBQVQsQ0FBUDtBQUNiLE1BQUksQ0FBQyxrQ0FBZ0JILE1BQWhCLENBQUwsRUFBOEIsT0FBT0QsR0FBRyxDQUFDRyxJQUFKLENBQVM7QUFBRUMsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBVCxDQUFQO0FBQzlCLFFBQU1DLFNBQVMsR0FBRyxNQUFNQyxlQUFLQyxPQUFMLENBQWE7QUFBRUMsSUFBQUEsR0FBRyxFQUFFUDtBQUFQLEdBQWIsRUFBOEI7QUFBRVEsSUFBQUEsUUFBUSxFQUFFO0FBQVosR0FBOUIsQ0FBeEI7QUFDQVQsRUFBQUEsR0FBRyxDQUFDRyxJQUFKLENBQVNFLFNBQVQ7QUFDRCxD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RixHQUFYO0FBQ0FILEVBQUFBLElBQUk7QUFDTCxDQU5NIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlcnMnXG5pbXBvcnQgeyBpc1ZhbGlkT2JqZWN0SWQgfSBmcm9tICcuLi9saWJzL3ZhbGlkYXRpb25zJ1xuZXhwb3J0IGNvbnN0IGdldFVzZXJJbmZvID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zXG4gIGlmICghdXNlcklkKSByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiAnTm8gc2UgaGEgcHJvcG9yY2lvbmFkbyBpZCBkZSB1c3VhcmlvJyB9KVxuICBpZiAoIWlzVmFsaWRPYmplY3RJZCh1c2VySWQpKSByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiAnSWQgbm8gdmFsaWRvJyB9KVxuICBjb25zdCB1c2VyRm91bmQgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHVzZXJJZCB9LCB7IHBhc3N3b3JkOiAwIH0pXG4gIHJlcy5qc29uKHVzZXJGb3VuZClcbn1cbmV4cG9ydCBjb25zdCBnZXRBbGxVc2VycyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbihhd2FpdCBVc2VyLmZpbmQoe30sIHsgcGFzc3dvcmQ6IDAsIGNyZWF0ZWRBdDogMCwgdXBkYXRlZEF0OiAwIH0pLnBvcHVsYXRlKCdyb2xlcycpKVxufVxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXNcbiAgY29uc3QgeyBib2R5IH0gPSByZXFcbiAgaWYgKCF1c2VySWQpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdObyBzZSBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlIHVzdWFyaW8nIH0pXG4gIGlmICghaXNWYWxpZE9iamVjdElkKHVzZXJJZCkpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdJZCBubyB2YWxpZG8nIH0pXG4gIC8vICBpZiAocmVxLnVzZXJJZCA9PT0gdXNlcklkKSByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiAnTm8gc2UgcHVlZGUgYWN0dWFsaXphciB1c3RlZCBtaXNtbycgfSlcbiAgY29uc29sZS5sb2coJ3VwZGF0ZVVzZXInLCBib2R5KVxuICBjb25zdCB1c2VyVXBkYXRlZCA9IGF3YWl0IFVzZXIuZmluZE9uZUFuZFVwZGF0ZSh7IF9pZDogdXNlcklkIH0sIGJvZHksIHsgbmV3OiB0cnVlIH0pXG4gIHJlcy5qc29uKHtcbiAgICB1c2VyVXBkYXRlZFxuICB9KVxufVxuZXhwb3J0IGNvbnN0IGRlbGV0ZVVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCF1c2VySWQpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdObyBzZSBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlIHVzdWFyaW8nIH0pXG4gIGlmICghaXNWYWxpZE9iamVjdElkKHVzZXJJZCkpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdJZCBubyB2YWxpZG8nIH0pXG4gIGlmIChyZXEudXNlcklkID09PSB1c2VySWQpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdObyBzZSBwdWVkZSBlbGltaW5hciB1c3RlZCBtaXNtbycgfSlcbiAgY29uc3QgdXNlckRlbGV0ZWQgPSBhd2FpdCBVc2VyLmZpbmRPbmVBbmREZWxldGUoeyBfaWQ6IHVzZXJJZCB9KVxuICBpZiAoIXVzZXJEZWxldGVkKSByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiAnVXN1YXJpbyBubyBleGlzdGUnIH0pXG4gIHJlcy5qc29uKHVzZXJEZWxldGVkKVxufVxuZXhwb3J0IGNvbnN0IHByZXBhcmVUb1VwZGF0ZUltYWdlID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgZmlsZSB9ID0gcmVxXG4gIGNvbnN0IHsgZmlsZW5hbWUgfSA9IGZpbGVcbiAgY29uc3QgcGhvdG9VcmwgPSBgJHtyZXEucHJvdG9jb2x9Oi8vJHtyZXEuZ2V0KCdob3N0Jyl9L2dhbGxlcnkvcHJvZmlsZS8ke2ZpbGVuYW1lfWBcbiAgcmVxLmJvZHkgPSB7IHBob3RvVXJsIH1cbiAgbmV4dCgpXG59XG4iXX0=","map":{"version":3,"sources":["users.js"],"names":["getUserInfo","req","res","userId","params","json","message","userFound","User","findOne","_id","password","getAllUsers","find","createdAt","updatedAt","populate","updateUser","body","console","log","userUpdated","findOneAndUpdate","new","deleteUser","userDeleted","findOneAndDelete","prepareToUpdateImage","next","file","filename","photoUrl","protocol","get"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/","sourcesContent":["import User from '../models/users'\nimport { isValidObjectId } from '../libs/validations'\nexport const getUserInfo = async (req, res) => {\n  const { userId } = req.params\n  if (!userId) return res.json({ message: 'No se ha proporcionado id de usuario' })\n  if (!isValidObjectId(userId)) return res.json({ message: 'Id no valido' })\n  const userFound = await User.findOne({ _id: userId }, { password: 0 })\n  res.json(userFound)\n}\nexport const getAllUsers = async (req, res) => {\n  res.json(await User.find({}, { password: 0, createdAt: 0, updatedAt: 0 }).populate('roles'))\n}\nexport const updateUser = async (req, res) => {\n  const { userId } = req.params\n  const { body } = req\n  if (!userId) return res.json({ message: 'No se ha proporcionado id de usuario' })\n  if (!isValidObjectId(userId)) return res.json({ message: 'Id no valido' })\n  //  if (req.userId === userId) return res.json({ message: 'No se puede actualizar usted mismo' })\n  console.log('updateUser', body)\n  const userUpdated = await User.findOneAndUpdate({ _id: userId }, body, { new: true })\n  res.json({\n    userUpdated\n  })\n}\nexport const deleteUser = async (req, res) => {\n  const { userId } = req.params\n  if (!userId) return res.json({ message: 'No se ha proporcionado id de usuario' })\n  if (!isValidObjectId(userId)) return res.json({ message: 'Id no valido' })\n  if (req.userId === userId) return res.json({ message: 'No se puede eliminar usted mismo' })\n  const userDeleted = await User.findOneAndDelete({ _id: userId })\n  if (!userDeleted) return res.json({ message: 'Usuario no existe' })\n  res.json(userDeleted)\n}\nexport const prepareToUpdateImage = (req, res, next) => {\n  const { file } = req\n  const { filename } = file\n  const photoUrl = `${req.protocol}://${req.get('host')}/gallery/profile/${filename}`\n  req.body = { photoUrl }\n  next()\n}\n"]}},"mtime":1647679268664},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/places.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.similarPlaces = exports.removePlace = exports.recommendedPlaces = exports.putPlace = exports.likeAPlace = exports.getPlaces = exports.getPlace = exports.getLikes = exports.createPlace = void 0;\n\nvar _places = _interopRequireDefault(require(\"../models/places\"));\n\nvar _validations = require(\"../libs/validations\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getPlaces = async (req, res) => {\n  // obtener distancia, ubicacion, y filtros de la busqueda\n  // validar datos de entrada\n  // buscar en la base de datos los sitios cercanos\n  // contar el resultado\n  const {\n    distance = 300,\n    coordinates = [13.482903, -88.175427]\n  } = req.body;\n\n  if (typeof distance !== 'number') {\n    return res.json({\n      message: 'Dato de la distancia erroneo'\n    });\n  }\n\n  if (typeof coordinates !== 'object' || coordinates.length < 2) {\n    return res.json({\n      message: 'No ha proporcionado ubicaciÃ³n'\n    });\n  }\n\n  const {\n    filters = {\n      delivery: null,\n      service: null\n    }\n  } = req.body;\n  const places = await _places.default.find({\n    location: {\n      $nearSphere: {\n        $geometry: {\n          type: 'Point',\n          coordinates: coordinates\n        },\n        $maxDistance: distance\n      }\n    }\n  });\n  const isFiltered = Object.values(filters).some(filterValue => filterValue !== null);\n  console.log(isFiltered); // const arrayFilters = Object.entries(filters)\n  // arrayFilters.forEach((filter) => {\n  //     if (filter[1]) {\n  //         console.log(filter[1])\n  //         places.where(filter[0], filter[1])\n  //     }\n  // })\n\n  res.json({\n    result: places,\n    count: places.length\n  });\n};\n\nexports.getPlaces = getPlaces;\n\nconst createPlace = async (req, res) => {\n  // obtener informacion de las propiedades del sitio\n  // guarda en la base de datos el sitio\n  const preparedPlace = new _places.default(req.body);\n  const savedPlace = await preparedPlace.save();\n  res.status(201).json(savedPlace);\n};\n\nexports.createPlace = createPlace;\n\nconst putPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener objeto con nuevas valores del sitio\n  // actualizar el sitio con ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const updatedPlace = await _places.default.replaceOne({\n    _id: placeId\n  }, req.body);\n\n  if (updatedPlace.n === 0) {\n    return res.json({\n      message: 'No existe ese lugar'\n    });\n  }\n\n  if (updatedPlace.nModified === 0) {\n    return res.json({\n      message: 'No se pudo editar el lugar'\n    });\n  }\n\n  res.json(updatedPlace);\n};\n\nexports.putPlace = putPlace;\n\nconst removePlace = async (req, res) => {\n  // obtener ID del sitio\n  // eliminar un sitio con ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const placeDeleted = await _places.default.findOneAndDelete({\n    _id: placeId\n  }); //  const placeDeleted = await Place.findByIdAndRemove(placeId)\n\n  if (!placeDeleted) {\n    return res.json({\n      message: 'No existe ese lugar'\n    });\n  }\n\n  res.json(placeDeleted);\n};\n\nexports.removePlace = removePlace;\n\nconst getPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener informacion del sitio con el ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const placeFound = await _places.default.findOne({\n    _id: placeId\n  });\n\n  if (!placeFound) {\n    return res.json({\n      message: 'No existe ese lugar'\n    });\n  }\n\n  res.json(placeFound);\n};\n\nexports.getPlace = getPlace;\n\nconst recommendedPlaces = (req, res) => {\n  // buscar los cercanos con las categorias mas buscadas del usuario\n  // obtener categorias mas buscadas\n  // filtrar por los mejores valorados\n  const {\n    placeId\n  } = req.params;\n  console.log(`Id Place is ${placeId}`);\n  console.log(req.body);\n  res.json({\n    message: 'Get Recommended Places'\n  });\n};\n\nexports.recommendedPlaces = recommendedPlaces;\n\nconst similarPlaces = async (req, res) => {\n  // obtener ID del sitio\n  // obtener categorias del sitio\n  // buscar sitios con las categorias del ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const placeFound = await _places.default.findOne({\n    _id: placeId\n  }, {\n    gallery: 0,\n    contact: 0,\n    description: 0,\n    ubication: 0,\n    rating: 0,\n    schedule: 0,\n    name: 0\n  });\n  searchByCategories(placeFound.category);\n  res.json({\n    message: 'Get Similar in 500mts Places'\n  });\n};\n\nexports.similarPlaces = similarPlaces;\n\nconst getLikes = async (req, res) => {\n  // obtener el ID del usuario\n  // obtener todos los sitios que el usuario ha likeado\n  const {\n    userId\n  } = req;\n  console.log(userId);\n  const likedPlaces = await _places.default.find({\n    rating: {\n      $elemMatch: {\n        user: userId\n      }\n    }\n  }); //  console.log('Get Liked Places')\n\n  res.json(likedPlaces);\n};\n\nexports.getLikes = getLikes;\n\nconst likeAPlace = async (req, res) => {\n  // obtener ID del sitio y el usuario\n  // obtener el valor del Rating\n  // obtener sitio del ID\n  // modificar el arreglo con los likes del sitio\n  const {\n    rating\n  } = req.body;\n  const {\n    userId\n  } = req;\n  const {\n    placeId\n  } = req.params;\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  if (rating > 5 || rating < 0 || !rating || isNaN(rating)) {\n    return res.json({\n      message: 'Calificacion no valida'\n    });\n  }\n\n  const place = await _places.default.findOne({\n    _id: placeId\n  });\n  const found = place.rating.findIndex(rate => rate.user.toString() === userId);\n\n  if (found > -1) {\n    place.rating[found].rate = rating;\n  } else {\n    place.rating.push({\n      user: userId,\n      rate: rating\n    });\n  }\n\n  const ratingSaved = await place.save();\n  res.json(ratingSaved);\n};\n\nexports.likeAPlace = likeAPlace;\n\nconst searchByCategories = categories => {\n  for (const category of categories) {\n    console.log(category);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlcy5qcyJdLCJuYW1lcyI6WyJnZXRQbGFjZXMiLCJyZXEiLCJyZXMiLCJkaXN0YW5jZSIsImNvb3JkaW5hdGVzIiwiYm9keSIsImpzb24iLCJtZXNzYWdlIiwibGVuZ3RoIiwiZmlsdGVycyIsImRlbGl2ZXJ5Iiwic2VydmljZSIsInBsYWNlcyIsIlBsYWNlIiwiZmluZCIsImxvY2F0aW9uIiwiJG5lYXJTcGhlcmUiLCIkZ2VvbWV0cnkiLCJ0eXBlIiwiJG1heERpc3RhbmNlIiwiaXNGaWx0ZXJlZCIsIk9iamVjdCIsInZhbHVlcyIsInNvbWUiLCJmaWx0ZXJWYWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJjb3VudCIsImNyZWF0ZVBsYWNlIiwicHJlcGFyZWRQbGFjZSIsInNhdmVkUGxhY2UiLCJzYXZlIiwic3RhdHVzIiwicHV0UGxhY2UiLCJwbGFjZUlkIiwicGFyYW1zIiwidXBkYXRlZFBsYWNlIiwicmVwbGFjZU9uZSIsIl9pZCIsIm4iLCJuTW9kaWZpZWQiLCJyZW1vdmVQbGFjZSIsInBsYWNlRGVsZXRlZCIsImZpbmRPbmVBbmREZWxldGUiLCJnZXRQbGFjZSIsInBsYWNlRm91bmQiLCJmaW5kT25lIiwicmVjb21tZW5kZWRQbGFjZXMiLCJzaW1pbGFyUGxhY2VzIiwiZ2FsbGVyeSIsImNvbnRhY3QiLCJkZXNjcmlwdGlvbiIsInViaWNhdGlvbiIsInJhdGluZyIsInNjaGVkdWxlIiwibmFtZSIsInNlYXJjaEJ5Q2F0ZWdvcmllcyIsImNhdGVnb3J5IiwiZ2V0TGlrZXMiLCJ1c2VySWQiLCJsaWtlZFBsYWNlcyIsIiRlbGVtTWF0Y2giLCJ1c2VyIiwibGlrZUFQbGFjZSIsImlzTmFOIiwicGxhY2UiLCJmb3VuZCIsImZpbmRJbmRleCIsInJhdGUiLCJ0b1N0cmluZyIsInB1c2giLCJyYXRpbmdTYXZlZCIsImNhdGVnb3JpZXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUNPLE1BQU1BLFNBQVMsR0FBRyxP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LEtBQUssR0FBRyxDQUFDLENBQWIsRUFBZ0I7QUFDZEQsSUFBQUEsS0FBSyxDQUFDWixNQUFOLENBQWFhLEtBQWIsRUFBb0JFLElBQXBCLEdBQTJCZixNQUEzQjtBQUNELEdBRkQsTUFFTztBQUNMWSxJQUFBQSxLQUFLLENBQUNaLE1BQU4sQ0FBYWlCLElBQWIsQ0FBa0I7QUFDaEJSLE1BQUFBLElBQUksRUFBRUgsTUFEVTtBQUVoQlMsTUFBQUEsSUFBSSxFQUFFZjtBQUZVLEtBQWxCO0FBSUQ7O0FBQ0QsUUFBTWtCLFdBQVcsR0FBRyxNQUFNTixLQUFLLENBQUNsQyxJQUFOLEVBQTFCO0FBQ0E5QixFQUFBQSxHQUFHLENBQUNJLElBQUosQ0FBU2tFLFdBQVQ7QUFDRCxDQWhDTTs7OztBQWlDUCxNQUFNZixrQkFBa0IsR0FBSWdCLFVBQUQsSUFBZ0I7QUFDekMsT0FBSyxNQUFNZixRQUFYLElBQXVCZSxVQUF2QixFQUFtQztBQUNqQ2hELElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZZ0MsUUFBWjtBQUNEO0FBQ0YsQ0FKRCIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBsYWNlIGZyb20gJy4uL21vZGVscy9wbGFjZXMnXG5pbXBvcnQgeyBpc1ZhbGlkT2JqZWN0SWQgfSBmcm9tICcuLi9saWJzL3ZhbGlkYXRpb25zJ1xuZXhwb3J0IGNvbnN0IGdldFBsYWNlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIGRpc3RhbmNpYSwgdWJpY2FjaW9uLCB5IGZpbHRyb3MgZGUgbGEgYnVzcXVlZGFcbiAgLy8gdmFsaWRhciBkYXRvcyBkZSBlbnRyYWRhXG4gIC8vIGJ1c2NhciBlbiBsYSBiYXNlIGRlIGRhdG9zIGxvcyBzaXRpb3MgY2VyY2Fub3NcbiAgLy8gY29udGFyIGVsIHJlc3VsdGFkb1xuICBjb25zdCB7IGRpc3RhbmNlID0gMzAwLCBjb29yZGluYXRlcyA9IFsxMy40ODI5MDMsIC04OC4xNzU0MjddIH0gPSByZXEuYm9keVxuICBpZiAodHlwZW9mIChkaXN0YW5jZSkgIT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdEYXRvIGRlIGxhIGRpc3RhbmNpYSBlcnJvbmVvJ1xuICAgIH0pXG4gIH1cbiAgaWYgKHR5cGVvZiAoY29vcmRpbmF0ZXMpICE9PSAnb2JqZWN0JyB8fCBjb29yZGluYXRlcy5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHsgbWVzc2FnZTogJ05vIGhhIHByb3BvcmNpb25hZG8gdWJpY2FjacOzbicgfSlcbiAgfVxuICBjb25zdCB7IGZpbHRlcnMgPSB7IGRlbGl2ZXJ5OiBudWxsLCBzZXJ2aWNlOiBudWxsIH0gfSA9IHJlcS5ib2R5XG4gIGNvbnN0IHBsYWNlcyA9IGF3YWl0IFBsYWNlLmZpbmQoe1xuICAgIGxvY2F0aW9uOiB7XG4gICAgICAkbmVhclNwaGVyZToge1xuICAgICAgICAkZ2VvbWV0cnk6IHtcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgICAgICB9LFxuICAgICAgICAkbWF4RGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICB9XG4gICAgfVxuICB9KVxuICBjb25zdCBpc0ZpbHRlcmVkID0gT2JqZWN0LnZhbHVlcyhmaWx0ZXJzKS5zb21lKChmaWx0ZXJWYWx1ZSkgPT4gZmlsdGVyVmFsdWUgIT09IG51bGwpXG4gIGNvbnNvbGUubG9nKGlzRmlsdGVyZWQpXG4gIC8vIGNvbnN0IGFycmF5RmlsdGVycyA9IE9iamVjdC5lbnRyaWVzKGZpbHRlcnMpXG4gIC8vIGFycmF5RmlsdGVycy5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgLy8gICAgIGlmIChmaWx0ZXJbMV0pIHtcbiAgLy8gICAgICAgICBjb25zb2xlLmxvZyhmaWx0ZXJbMV0pXG4gIC8vICAgICAgICAgcGxhY2VzLndoZXJlKGZpbHRlclswXSwgZmlsdGVyWzFdKVxuICAvLyAgICAgfVxuICAvLyB9KVxuICByZXMuanNvbih7XG4gICAgcmVzdWx0OiBwbGFjZXMsXG4gICAgY291bnQ6IHBsYWNlcy5sZW5ndGhcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBjcmVhdGVQbGFjZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIGluZm9ybWFjaW9uIGRlIGxhcyBwcm9waWVkYWRlcyBkZWwgc2l0aW9cbiAgLy8gZ3VhcmRhIGVuIGxhIGJhc2UgZGUgZGF0b3MgZWwgc2l0aW9cbiAgY29uc3QgcHJlcGFyZWRQbGFjZSA9IG5ldyBQbGFjZShyZXEuYm9keSlcbiAgY29uc3Qgc2F2ZWRQbGFjZSA9IGF3YWl0IHByZXBhcmVkUGxhY2Uuc2F2ZSgpXG4gIHJlcy5zdGF0dXMoMjAxKS5qc29uKHNhdmVkUGxhY2UpXG59XG5leHBvcnQgY29uc3QgcHV0UGxhY2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgLy8gb2J0ZW5lciBJRCBkZWwgc2l0aW9cbiAgLy8gb2J0ZW5lciBvYmpldG8gY29uIG51ZXZhcyB2YWxvcmVzIGRlbCBzaXRpb1xuICAvLyBhY3R1YWxpemFyIGVsIHNpdGlvIGNvbiBJRFxuICBjb25zdCB7IHBsYWNlSWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCFwbGFjZUlkKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlbCBsdWdhcidcbiAgICB9KVxuICB9XG4gIGlmICghaXNWYWxpZE9iamVjdElkKHBsYWNlSWQpKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdFbCBpZCBkZWwgbHVnYXIgbm8gZXMgdmFsaWRvJ1xuICAgIH0pXG4gIH1cbiAgY29uc3QgdXBkYXRlZFBsYWNlID0gYXdhaXQgUGxhY2UucmVwbGFjZU9uZSh7IF9pZDogcGxhY2VJZCB9LCByZXEuYm9keSlcbiAgaWYgKHVwZGF0ZWRQbGFjZS5uID09PSAwKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBleGlzdGUgZXNlIGx1Z2FyJ1xuICAgIH0pXG4gIH1cbiAgaWYgKHVwZGF0ZWRQbGFjZS5uTW9kaWZpZWQgPT09IDApIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ05vIHNlIHB1ZG8gZWRpdGFyIGVsIGx1Z2FyJ1xuICAgIH0pXG4gIH1cbiAgcmVzLmpzb24odXBkYXRlZFBsYWNlKVxufVxuZXhwb3J0IGNvbnN0IHJlbW92ZVBsYWNlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIG9idGVuZXIgSUQgZGVsIHNpdGlvXG4gIC8vIGVsaW1pbmFyIHVuIHNpdGlvIGNvbiBJRFxuICBjb25zdCB7IHBsYWNlSWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCFwbGFjZUlkKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlbCBsdWdhcidcbiAgICB9KVxuICB9XG4gIGlmICghaXNWYWxpZE9iamVjdElkKHBsYWNlSWQpKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdFbCBpZCBkZWwgbHVnYXIgbm8gZXMgdmFsaWRvJ1xuICAgIH0pXG4gIH1cbiAgY29uc3QgcGxhY2VEZWxldGVkID0gYXdhaXQgUGxhY2UuZmluZE9uZUFuZERlbGV0ZSh7IF9pZDogcGxhY2VJZCB9KVxuICAvLyAgY29uc3QgcGxhY2VEZWxldGVkID0gYXdhaXQgUGxhY2UuZmluZEJ5SWRBbmRSZW1vdmUocGxhY2VJZClcbiAgaWYgKCFwbGFjZURlbGV0ZWQpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ05vIGV4aXN0ZSBlc2UgbHVnYXInXG4gICAgfSlcbiAgfVxuXG4gIHJlcy5qc29uKHBsYWNlRGVsZXRlZClcbn1cbmV4cG9ydCBjb25zdCBnZXRQbGFjZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIElEIGRlbCBzaXRpb1xuICAvLyBvYnRlbmVyIGluZm9ybWFjaW9uIGRlbCBzaXRpbyBjb24gZWwgSURcbiAgY29uc3QgeyBwbGFjZUlkIH0gPSByZXEucGFyYW1zXG4gIGlmICghcGxhY2VJZCkge1xuICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiAnTm8gaGEgcHJvcG9yY2lvbmFkbyBpZCBkZWwgbHVnYXInXG4gICAgfSlcbiAgfVxuXG4gIGlmICghaXNWYWxpZE9iamVjdElkKHBsYWNlSWQpKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdFbCBpZCBkZWwgbHVnYXIgbm8gZXMgdmFsaWRvJ1xuICAgIH0pXG4gIH1cbiAgY29uc3QgcGxhY2VGb3VuZCA9IGF3YWl0IFBsYWNlLmZpbmRPbmUoeyBfaWQ6IHBsYWNlSWQgfSlcbiAgaWYgKCFwbGFjZUZvdW5kKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBleGlzdGUgZXNlIGx1Z2FyJ1xuICAgIH0pXG4gIH1cbiAgcmVzLmpzb24ocGxhY2VGb3VuZClcbn1cbmV4cG9ydCBjb25zdCByZWNvbW1lbmRlZFBsYWNlcyA9IChyZXEsIHJlcykgPT4ge1xuICAvLyBidXNjYXIgbG9zIGNlcmNhbm9zIGNvbiBsYXMgY2F0ZWdvcmlhcyBtYXMgYnVzY2FkYXMgZGVsIHVzdWFyaW9cbiAgLy8gb2J0ZW5lciBjYXRlZ29yaWFzIG1hcyBidXNjYWRhc1xuICAvLyBmaWx0cmFyIHBvciBsb3MgbWVqb3JlcyB2YWxvcmFkb3NcbiAgY29uc3QgeyBwbGFjZUlkIH0gPSByZXEucGFyYW1zXG4gIGNvbnNvbGUubG9nKGBJZCBQbGFjZSBpcyAke3BsYWNlSWR9YClcbiAgY29uc29sZS5sb2cocmVxLmJvZHkpXG4gIHJlcy5qc29uKHtcbiAgICBtZXNzYWdlOiAnR2V0IFJlY29tbWVuZGVkIFBsYWNlcydcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBzaW1pbGFyUGxhY2VzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIG9idGVuZXIgSUQgZGVsIHNpdGlvXG4gIC8vIG9idGVuZXIgY2F0ZWdvcmlhcyBkZWwgc2l0aW9cbiAgLy8gYnVzY2FyIHNpdGlvcyBjb24gbGFzIGNhdGVnb3JpYXMgZGVsIElEXG4gIGNvbnN0IHsgcGxhY2VJZCB9ID0gcmVxLnBhcmFtc1xuICBpZiAoIXBsYWNlSWQpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ05vIGhhIHByb3BvcmNpb25hZG8gaWQgZGVsIGx1Z2FyJ1xuICAgIH0pXG4gIH1cblxuICBpZiAoIWlzVmFsaWRPYmplY3RJZChwbGFjZUlkKSkge1xuICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiAnRWwgaWQgZGVsIGx1Z2FyIG5vIGVzIHZhbGlkbydcbiAgICB9KVxuICB9XG4gIGNvbnN0IHBsYWNlRm91bmQgPSBhd2FpdCBQbGFjZS5maW5kT25lKHtcbiAgICBfaWQ6IHBsYWNlSWRcbiAgfSwge1xuICAgIGdhbGxlcnk6IDAsXG4gICAgY29udGFjdDogMCxcbiAgICBkZXNjcmlwdGlvbjogMCxcbiAgICB1YmljYXRpb246IDAsXG4gICAgcmF0aW5nOiAwLFxuICAgIHNjaGVkdWxlOiAwLFxuICAgIG5hbWU6IDBcbiAgfSlcbiAgc2VhcmNoQnlDYXRlZ29yaWVzKHBsYWNlRm91bmQuY2F0ZWdvcnkpXG4gIHJlcy5qc29uKHtcbiAgICBtZXNzYWdlOiAnR2V0IFNpbWlsYXIgaW4gNTAwbXRzIFBsYWNlcydcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBnZXRMaWtlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIGVsIElEIGRlbCB1c3VhcmlvXG4gIC8vIG9idGVuZXIgdG9kb3MgbG9zIHNpdGlvcyBxdWUgZWwgdXN1YXJpbyBoYSBsaWtlYWRvXG4gIGNvbnN0IHsgdXNlcklkIH0gPSByZXFcbiAgY29uc29sZS5sb2codXNlcklkKVxuICBjb25zdCBsaWtlZFBsYWNlcyA9IGF3YWl0IFBsYWNlLmZpbmQoe1xuICAgIHJhdGluZzoge1xuICAgICAgJGVsZW1NYXRjaDoge1xuICAgICAgICB1c2VyOiB1c2VySWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIC8vICBjb25zb2xlLmxvZygnR2V0IExpa2VkIFBsYWNlcycpXG4gIHJlcy5qc29uKGxpa2VkUGxhY2VzKVxufVxuZXhwb3J0IGNvbnN0IGxpa2VBUGxhY2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgLy8gb2J0ZW5lciBJRCBkZWwgc2l0aW8geSBlbCB1c3VhcmlvXG4gIC8vIG9idGVuZXIgZWwgdmFsb3IgZGVsIFJhdGluZ1xuICAvLyBvYnRlbmVyIHNpdGlvIGRlbCBJRFxuICAvLyBtb2RpZmljYXIgZWwgYXJyZWdsbyBjb24gbG9zIGxpa2VzIGRlbCBzaXRpb1xuICBjb25zdCB7IHJhdGluZyB9ID0gcmVxLmJvZHlcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcVxuICBjb25zdCB7IHBsYWNlSWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCFpc1ZhbGlkT2JqZWN0SWQocGxhY2VJZCkpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ0VsIGlkIGRlbCBsdWdhciBubyBlcyB2YWxpZG8nXG4gICAgfSlcbiAgfVxuXG4gIGlmICgocmF0aW5nID4gNSB8fCByYXRpbmcgPCAwKSB8fCAhcmF0aW5nIHx8IGlzTmFOKHJhdGluZykpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ0NhbGlmaWNhY2lvbiBubyB2YWxpZGEnXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHBsYWNlID0gYXdhaXQgUGxhY2UuZmluZE9uZSh7IF9pZDogcGxhY2VJZCB9KVxuICBjb25zdCBmb3VuZCA9IHBsYWNlLnJhdGluZy5maW5kSW5kZXgoKHJhdGUpID0+IHJhdGUudXNlci50b1N0cmluZygpID09PSB1c2VySWQpXG4gIGlmIChmb3VuZCA+IC0xKSB7XG4gICAgcGxhY2UucmF0aW5nW2ZvdW5kXS5yYXRlID0gcmF0aW5nXG4gIH0gZWxzZSB7XG4gICAgcGxhY2UucmF0aW5nLnB1c2goe1xuICAgICAgdXNlcjogdXNlcklkLFxuICAgICAgcmF0ZTogcmF0aW5nXG4gICAgfSlcbiAgfVxuICBjb25zdCByYXRpbmdTYXZlZCA9IGF3YWl0IHBsYWNlLnNhdmUoKVxuICByZXMuanNvbihyYXRpbmdTYXZlZClcbn1cbmNvbnN0IHNlYXJjaEJ5Q2F0ZWdvcmllcyA9IChjYXRlZ29yaWVzKSA9PiB7XG4gIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgIGNvbnNvbGUubG9nKGNhdGVnb3J5KVxuICB9XG59XG4iXX0=","map":{"version":3,"sources":["places.js"],"names":["getPlaces","req","res","distance","coordinates","body","json","message","length","filters","delivery","service","places","Place","find","location","$nearSphere","$geometry","type","$maxDistance","isFiltered","Object","values","some","filterValue","console","log","result","count","createPlace","preparedPlace","savedPlace","save","status","putPlace","placeId","params","updatedPlace","replaceOne","_id","n","nModified","removePlace","placeDeleted","findOneAndDelete","getPlace","placeFound","findOne","recommendedPlaces","similarPlaces","gallery","contact","description","ubication","rating","schedule","name","searchByCategories","category","getLikes","userId","likedPlaces","$elemMatch","user","likeAPlace","isNaN","place","found","findIndex","rate","toString","push","ratingSaved","categories"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/","sourcesContent":["import Place from '../models/places'\nimport { isValidObjectId } from '../libs/validations'\nexport const getPlaces = async (req, res) => {\n  // obtener distancia, ubicacion, y filtros de la busqueda\n  // validar datos de entrada\n  // buscar en la base de datos los sitios cercanos\n  // contar el resultado\n  const { distance = 300, coordinates = [13.482903, -88.175427] } = req.body\n  if (typeof (distance) !== 'number') {\n    return res.json({\n      message: 'Dato de la distancia erroneo'\n    })\n  }\n  if (typeof (coordinates) !== 'object' || coordinates.length < 2) {\n    return res.json({ message: 'No ha proporcionado ubicaciÃ³n' })\n  }\n  const { filters = { delivery: null, service: null } } = req.body\n  const places = await Place.find({\n    location: {\n      $nearSphere: {\n        $geometry: {\n          type: 'Point',\n          coordinates: coordinates\n        },\n        $maxDistance: distance\n      }\n    }\n  })\n  const isFiltered = Object.values(filters).some((filterValue) => filterValue !== null)\n  console.log(isFiltered)\n  // const arrayFilters = Object.entries(filters)\n  // arrayFilters.forEach((filter) => {\n  //     if (filter[1]) {\n  //         console.log(filter[1])\n  //         places.where(filter[0], filter[1])\n  //     }\n  // })\n  res.json({\n    result: places,\n    count: places.length\n  })\n}\nexport const createPlace = async (req, res) => {\n  // obtener informacion de las propiedades del sitio\n  // guarda en la base de datos el sitio\n  const preparedPlace = new Place(req.body)\n  const savedPlace = await preparedPlace.save()\n  res.status(201).json(savedPlace)\n}\nexport const putPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener objeto con nuevas valores del sitio\n  // actualizar el sitio con ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const updatedPlace = await Place.replaceOne({ _id: placeId }, req.body)\n  if (updatedPlace.n === 0) {\n    return res.json({\n      message: 'No existe ese lugar'\n    })\n  }\n  if (updatedPlace.nModified === 0) {\n    return res.json({\n      message: 'No se pudo editar el lugar'\n    })\n  }\n  res.json(updatedPlace)\n}\nexport const removePlace = async (req, res) => {\n  // obtener ID del sitio\n  // eliminar un sitio con ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const placeDeleted = await Place.findOneAndDelete({ _id: placeId })\n  //  const placeDeleted = await Place.findByIdAndRemove(placeId)\n  if (!placeDeleted) {\n    return res.json({\n      message: 'No existe ese lugar'\n    })\n  }\n\n  res.json(placeDeleted)\n}\nexport const getPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener informacion del sitio con el ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const placeFound = await Place.findOne({ _id: placeId })\n  if (!placeFound) {\n    return res.json({\n      message: 'No existe ese lugar'\n    })\n  }\n  res.json(placeFound)\n}\nexport const recommendedPlaces = (req, res) => {\n  // buscar los cercanos con las categorias mas buscadas del usuario\n  // obtener categorias mas buscadas\n  // filtrar por los mejores valorados\n  const { placeId } = req.params\n  console.log(`Id Place is ${placeId}`)\n  console.log(req.body)\n  res.json({\n    message: 'Get Recommended Places'\n  })\n}\nexport const similarPlaces = async (req, res) => {\n  // obtener ID del sitio\n  // obtener categorias del sitio\n  // buscar sitios con las categorias del ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const placeFound = await Place.findOne({\n    _id: placeId\n  }, {\n    gallery: 0,\n    contact: 0,\n    description: 0,\n    ubication: 0,\n    rating: 0,\n    schedule: 0,\n    name: 0\n  })\n  searchByCategories(placeFound.category)\n  res.json({\n    message: 'Get Similar in 500mts Places'\n  })\n}\nexport const getLikes = async (req, res) => {\n  // obtener el ID del usuario\n  // obtener todos los sitios que el usuario ha likeado\n  const { userId } = req\n  console.log(userId)\n  const likedPlaces = await Place.find({\n    rating: {\n      $elemMatch: {\n        user: userId\n      }\n    }\n  })\n  //  console.log('Get Liked Places')\n  res.json(likedPlaces)\n}\nexport const likeAPlace = async (req, res) => {\n  // obtener ID del sitio y el usuario\n  // obtener el valor del Rating\n  // obtener sitio del ID\n  // modificar el arreglo con los likes del sitio\n  const { rating } = req.body\n  const { userId } = req\n  const { placeId } = req.params\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n\n  if ((rating > 5 || rating < 0) || !rating || isNaN(rating)) {\n    return res.json({\n      message: 'Calificacion no valida'\n    })\n  }\n\n  const place = await Place.findOne({ _id: placeId })\n  const found = place.rating.findIndex((rate) => rate.user.toString() === userId)\n  if (found > -1) {\n    place.rating[found].rate = rating\n  } else {\n    place.rating.push({\n      user: userId,\n      rate: rating\n    })\n  }\n  const ratingSaved = await place.save()\n  res.json(ratingSaved)\n}\nconst searchByCategories = (categories) => {\n  for (const category of categories) {\n    console.log(category)\n  }\n}\n"]}},"mtime":1647679208771},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/initSetup.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createRoles = void 0;\n\nvar _roles = _interopRequireDefault(require(\"../models/roles\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst createRoles = async () => {\n  try {\n    const countRoles = await _roles.default.estimatedDocumentCount();\n    if (countRoles > 0) return;\n    const values = await Promise.all([new _roles.default({\n      name: 'Admin'\n    }).save(), new _roles.default({\n      name: 'Moderator'\n    }).save(), new _roles.default({\n      name: 'Seller'\n    }).save(), new _roles.default({\n      name: 'User'\n    }).save()]);\n    console.log(values);\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nexports.createRoles = createRoles;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaXRTZXR1cC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVSb2xlcyIsImNvdW50Um9sZXMiLCJSb2xlIiwiZXN0aW1hdGVkRG9jdW1lbnRDb3VudCIsInZhbHVlcyIsIlByb21pc2UiLCJhbGwiLCJuYW1lIiwic2F2ZSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ08sTUFBTUEsV0FBVyxHQUFHLFlBQVk7QUFDckMsTUFBSTtBQUNGLFVBQU1DLFVBQVUsR0FBRyxNQUFNQyxlQUFLQyxzQkFBTCxFQUF6QjtBQUNBLFFBQUlGLFVBQVUsR0FBRyxDQUFqQixFQUFvQjtBQUNwQixVQUFNRyxNQUFNLEdBQUcsTUFBTUMsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FDL0IsSUFBSUosY0FBSixDQUFTO0FBQUVLLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQVQsRUFBNEJDLElBQTVCLEVBRCtCLEVBRS9CLElBQUlOLGNBQUosQ0FBUztBQUFFSyxNQUFBQSxJQUFJLEVBQUU7QUFBUixLQUFULEVBQWdDQyxJQUFoQyxFQUYrQixFQUcvQixJQUFJTixjQUFKLENBQVM7QUFBRUssTUFBQUEsSUFBSSxFQUFFO0FBQVIsS0FBVCxFQUE2QkMsSUFBN0IsRUFIK0IsRUFJL0IsSUFBSU4sY0FBSixDQUFTO0FBQUVLLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQVQsRUFBMkJDLElBQTNCLEVBSitCLENBQVosQ0FBckI7QUFNQUMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlOLE1BQVo7QUFDRCxHQVZELENBVUUsT0FBT08sS0FBUCxFQUFjO0FBQ2RGLElBQUFBLE9BQU8sQ0FBQ0UsS0FBUixDQUFjQSxLQUFkO0FBQ0Q7QUFDRixDQWRNIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9saWJzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb2xlIGZyb20gJy4uL21vZGVscy9yb2xlcydcbmV4cG9ydCBjb25zdCBjcmVhdGVSb2xlcyA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb3VudFJvbGVzID0gYXdhaXQgUm9sZS5lc3RpbWF0ZWREb2N1bWVudENvdW50KClcbiAgICBpZiAoY291bnRSb2xlcyA+IDApIHJldHVyblxuICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIG5ldyBSb2xlKHsgbmFtZTogJ0FkbWluJyB9KS5zYXZlKCksXG4gICAgICBuZXcgUm9sZSh7IG5hbWU6ICdNb2RlcmF0b3InIH0pLnNhdmUoKSxcbiAgICAgIG5ldyBSb2xlKHsgbmFtZTogJ1NlbGxlcicgfSkuc2F2ZSgpLFxuICAgICAgbmV3IFJvbGUoeyBuYW1lOiAnVXNlcicgfSkuc2F2ZSgpXG4gICAgXSlcbiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgfVxufVxuIl19","map":{"version":3,"sources":["initSetup.js"],"names":["createRoles","countRoles","Role","estimatedDocumentCount","values","Promise","all","name","save","console","log","error"],"mappings":";;;;;;;AAAA;;;;AACO,MAAMA,WAAW,GAAG,YAAY;AACrC,MAAI;AACF,UAAMC,UAAU,GAAG,MAAMC,eAAKC,sBAAL,EAAzB;AACA,QAAIF,UAAU,GAAG,CAAjB,EAAoB;AACpB,UAAMG,MAAM,GAAG,MAAMC,OAAO,CAACC,GAAR,CAAY,CAC/B,IAAIJ,cAAJ,CAAS;AAAEK,MAAAA,IAAI,EAAE;AAAR,KAAT,EAA4BC,IAA5B,EAD+B,EAE/B,IAAIN,cAAJ,CAAS;AAAEK,MAAAA,IAAI,EAAE;AAAR,KAAT,EAAgCC,IAAhC,EAF+B,EAG/B,IAAIN,cAAJ,CAAS;AAAEK,MAAAA,IAAI,EAAE;AAAR,KAAT,EAA6BC,IAA7B,EAH+B,EAI/B,IAAIN,cAAJ,CAAS;AAAEK,MAAAA,IAAI,EAAE;AAAR,KAAT,EAA2BC,IAA3B,EAJ+B,CAAZ,CAArB;AAMAC,IAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ;AACD,GAVD,CAUE,OAAOO,KAAP,EAAc;AACdF,IAAAA,OAAO,CAACE,KAAR,CAAcA,KAAd;AACD;AACF,CAdM","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/","sourcesContent":["import Role from '../models/roles'\nexport const createRoles = async () => {\n  try {\n    const countRoles = await Role.estimatedDocumentCount()\n    if (countRoles > 0) return\n    const values = await Promise.all([\n      new Role({ name: 'Admin' }).save(),\n      new Role({ name: 'Moderator' }).save(),\n      new Role({ name: 'Seller' }).save(),\n      new Role({ name: 'User' }).save()\n    ])\n    console.log(values)\n  } catch (error) {\n    console.error(error)\n  }\n}\n"]}},"mtime":1647679317598},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFolder = void 0;\n\nvar _fs = require(\"fs\");\n\nvar _path = require(\"path\");\n\nconst createFolder = folders => {\n  for (const folder of folders) {\n    const path = `./${folder}`;\n    (0, _fs.access)(path, error => {\n      if (error) {\n        const newPath = (0, _path.join)(__dirname, `.${path}`);\n        (0, _fs.mkdir)(newPath, {\n          recursive: true\n        }, e => {\n          if (e) {\n            return console.error(e);\n          }\n\n          console.log(`${folder} Path Created`);\n        });\n      }\n    });\n  }\n};\n\nexports.createFolder = createFolder;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJuYW1lcyI6WyJjcmVhdGVGb2xkZXIiLCJmb2xkZXJzIiwiZm9sZGVyIiwicGF0aCIsImVycm9yIiwibmV3UGF0aCIsIl9fZGlybmFtZSIsInJlY3Vyc2l2ZSIsImUiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ08sTUFBTUEsWUFBWSxHQUFJQyxPQUFELElBQWE7QUFDdkMsT0FBSyxNQUFNQyxNQUFYLElBQXFCRCxPQUFyQixFQUE4QjtBQUM1QixVQUFNRSxJQUFJLEdBQUksS0FBSUQsTUFBTyxFQUF6QjtBQUNBLG9CQUFPQyxJQUFQLEVBQWNDLEtBQUQsSUFBVztBQUN0QixVQUFJQSxLQUFKLEVBQVc7QUFDVCxjQUFNQyxPQUFPLEdBQUcsZ0JBQUtDLFNBQUwsRUFBaUIsSUFBR0gsSUFBSyxFQUF6QixDQUFoQjtBQUNBLHVCQUFNRSxPQUFOLEVBQWU7QUFBRUUsVUFBQUEsU0FBUyxFQUFFO0FBQWIsU0FBZixFQUFxQ0MsQ0FBRCxJQUFPO0FBQ3pDLGNBQUlBLENBQUosRUFBTztBQUNMLG1CQUFPQyxPQUFPLENBQUNMLEtBQVIsQ0FBY0ksQ0FBZCxDQUFQO0FBQ0Q7O0FBQ0RDLFVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLEdBQUVSLE1BQU8sZUFBdEI7QUFDRCxTQUxEO0FBTUQ7QUFDRixLQVZEO0FBV0Q7QUFDRixDQWZNIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhY2Nlc3MsIG1rZGlyIH0gZnJvbSAnZnMnXG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCdcbmV4cG9ydCBjb25zdCBjcmVhdGVGb2xkZXIgPSAoZm9sZGVycykgPT4ge1xuICBmb3IgKGNvbnN0IGZvbGRlciBvZiBmb2xkZXJzKSB7XG4gICAgY29uc3QgcGF0aCA9IGAuLyR7Zm9sZGVyfWBcbiAgICBhY2Nlc3MocGF0aCwgKGVycm9yKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgbmV3UGF0aCA9IGpvaW4oX19kaXJuYW1lLCBgLiR7cGF0aH1gKVxuICAgICAgICBta2RpcihuZXdQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9LCAoZSkgPT4ge1xuICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhgJHtmb2xkZXJ9IFBhdGggQ3JlYXRlZGApXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIl19","map":{"version":3,"sources":["config.js"],"names":["createFolder","folders","folder","path","error","newPath","__dirname","recursive","e","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACO,MAAMA,YAAY,GAAIC,OAAD,IAAa;AACvC,OAAK,MAAMC,MAAX,IAAqBD,OAArB,EAA8B;AAC5B,UAAME,IAAI,GAAI,KAAID,MAAO,EAAzB;AACA,oBAAOC,IAAP,EAAcC,KAAD,IAAW;AACtB,UAAIA,KAAJ,EAAW;AACT,cAAMC,OAAO,GAAG,gBAAKC,SAAL,EAAiB,IAAGH,IAAK,EAAzB,CAAhB;AACA,uBAAME,OAAN,EAAe;AAAEE,UAAAA,SAAS,EAAE;AAAb,SAAf,EAAqCC,CAAD,IAAO;AACzC,cAAIA,CAAJ,EAAO;AACL,mBAAOC,OAAO,CAACL,KAAR,CAAcI,CAAd,CAAP;AACD;;AACDC,UAAAA,OAAO,CAACC,GAAR,CAAa,GAAER,MAAO,eAAtB;AACD,SALD;AAMD;AACF,KAVD;AAWD;AACF,CAfM","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import { access, mkdir } from 'fs'\nimport { join } from 'path'\nexport const createFolder = (folders) => {\n  for (const folder of folders) {\n    const path = `./${folder}`\n    access(path, (error) => {\n      if (error) {\n        const newPath = join(__dirname, `.${path}`)\n        mkdir(newPath, { recursive: true }, (e) => {\n          if (e) {\n            return console.error(e)\n          }\n          console.log(`${folder} Path Created`)\n        })\n      }\n    })\n  }\n}\n"]}},"mtime":1647678695356},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/database.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst mongooseOptions = {\n  dbName: 'WTE',\n  useNewUrlParser: true,\n  useUnifiedTopology: true // useCreateIndex: true\n\n};\n\n_mongoose.default.connect('mongodb://localhost:27017', mongooseOptions).then(() => {\n  console.info('DB connected');\n}).catch(err => {\n  console.error(err);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlT3B0aW9ucyIsImRiTmFtZSIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsIm1vbmdvb3NlIiwiY29ubmVjdCIsInRoZW4iLCJjb25zb2xlIiwiaW5mbyIsImNhdGNoIiwiZXJyIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7QUFDQSxNQUFNQSxlQUFlLEdBQUc7QUFDdEJDLEVBQUFBLE1BQU0sRUFBRSxLQURjO0FBRXRCQyxFQUFBQSxlQUFlLEVBQUUsSUFGSztBQUd0QkMsRUFBQUEsa0JBQWtCLEVBQUUsSUFIRSxDQUl0Qjs7QUFKc0IsQ0FBeEI7O0FBT0FDLGtCQUFTQyxPQUFULENBQWlCLDJCQUFqQixFQUE4Q0wsZUFBOUMsRUFDR00sSUFESCxDQUNRLE1BQU07QUFBRUMsRUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEsY0FBYjtBQUE4QixDQUQ5QyxFQUVHQyxLQUZILENBRVVDLEdBQUQsSUFBUztBQUFFSCxFQUFBQSxPQUFPLENBQUNJLEtBQVIsQ0FBY0QsR0FBZDtBQUFvQixDQUZ4QyIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xuY29uc3QgbW9uZ29vc2VPcHRpb25zID0ge1xuICBkYk5hbWU6ICdXVEUnLFxuICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZVxuICAvLyB1c2VDcmVhdGVJbmRleDogdHJ1ZVxufVxuXG5tb25nb29zZS5jb25uZWN0KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3JywgbW9uZ29vc2VPcHRpb25zKVxuICAudGhlbigoKSA9PiB7IGNvbnNvbGUuaW5mbygnREIgY29ubmVjdGVkJykgfSlcbiAgLmNhdGNoKChlcnIpID0+IHsgY29uc29sZS5lcnJvcihlcnIpIH0pXG4iXX0=","map":{"version":3,"sources":["database.js"],"names":["mongooseOptions","dbName","useNewUrlParser","useUnifiedTopology","mongoose","connect","then","console","info","catch","err","error"],"mappings":";;AAAA;;;;AACA,MAAMA,eAAe,GAAG;AACtBC,EAAAA,MAAM,EAAE,KADc;AAEtBC,EAAAA,eAAe,EAAE,IAFK;AAGtBC,EAAAA,kBAAkB,EAAE,IAHE,CAItB;;AAJsB,CAAxB;;AAOAC,kBAASC,OAAT,CAAiB,2BAAjB,EAA8CL,eAA9C,EACGM,IADH,CACQ,MAAM;AAAEC,EAAAA,OAAO,CAACC,IAAR,CAAa,cAAb;AAA8B,CAD9C,EAEGC,KAFH,CAEUC,GAAD,IAAS;AAAEH,EAAAA,OAAO,CAACI,KAAR,CAAcD,GAAd;AAAoB,CAFxC","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import mongoose from 'mongoose'\nconst mongooseOptions = {\n  dbName: 'WTE',\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n  // useCreateIndex: true\n}\n\nmongoose.connect('mongodb://localhost:27017', mongooseOptions)\n  .then(() => { console.info('DB connected') })\n  .catch((err) => { console.error(err) })\n"]}},"mtime":1647678637887},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/places.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst socialMediaSchema = new _mongoose.Schema({\n  media: {\n    type: String,\n    enum: ['Instagram', 'Facebook', 'Twitter'],\n    required: true\n  },\n  user: {\n    type: String,\n    require: true\n  }\n});\nconst contactSchema = new _mongoose.Schema({\n  socialMedia: [socialMediaSchema],\n  telephone: [String]\n});\nconst locationSchema = new _mongoose.Schema({\n  type: {\n    type: String,\n    enum: ['Point'],\n    required: true\n  },\n  coordinates: {\n    type: [Number],\n    required: true\n  }\n});\nconst ratingScheme = new _mongoose.Schema({\n  user: {\n    ref: 'User',\n    type: _mongoose.Schema.Types.ObjectId\n  },\n  rate: Number\n});\nconst workDays = new _mongoose.Schema({\n  interval: String | [String],\n  from: String,\n  to: String\n}); // const foodSchema = new Schema({\n//     name: {\n//         type: String,\n//         required: true\n//     },\n//     description: {\n//         type: String,\n//         required: true,\n//     },\n//     price: {\n//         type: Number,\n//         required: true\n//     },\n//     photo: {\n//         type: String,\n//         required: true\n//     },\n//     category: {\n//         type: [String],\n//         required: true\n//     }\n// })\n\nconst placeSchema = new _mongoose.Schema({\n  category: {\n    type: [String],\n    required: [true, 'No se proporcionÃ³ categoria']\n  },\n  contact: contactSchema,\n  description: String,\n  gallery: [String],\n  ubication: String,\n  location: locationSchema,\n  name: {\n    type: String,\n    required: [true, 'No se proporcionÃ³ nombre']\n  },\n  rating: [ratingScheme],\n  schedule: [workDays] // menu: [foodSchema]\n\n});\nplaceSchema.index({\n  location: '2dsphere'\n}); // placeModel.createIndexes({ location: '2dsphere' })\n\nvar _default = (0, _mongoose.model)('Place', placeSchema);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlcy5qcyJdLCJuYW1lcyI6WyJzb2NpYWxNZWRpYVNjaGVtYSIsIlNjaGVtYSIsIm1lZGlhIiwidHlwZSIsIlN0cmluZyIsImVudW0iLCJyZXF1aXJlZCIsInVzZXIiLCJyZXF1aXJlIiwiY29udGFjdFNjaGVtYSIsInNvY2lhbE1lZGlhIiwidGVsZXBob25lIiwibG9jYXRpb25TY2hlbWEiLCJjb29yZGluYXRlcyIsIk51bWJlciIsInJhdGluZ1NjaGVtZSIsInJlZiIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyYXRlIiwid29ya0RheXMiLCJpbnRlcnZhbCIsImZyb20iLCJ0byIsInBsYWNlU2NoZW1hIiwiY2F0ZWdvcnkiLCJjb250YWN0IiwiZGVzY3JpcHRpb24iLCJnYWxsZXJ5IiwidWJpY2F0aW9uIiwibG9jYXRpb24iLCJuYW1lIiwicmF0aW5nIiwic2NoZWR1bGUiLCJpbmRleCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBLE1BQU1BLGlCQUFpQixHQUFHLElBQUlDLGdCQUFKLENBQVc7QUFDbkNDLEVBQUFBLEtBQUssRUFBRTtBQUNMQyxJQUFBQSxJQUFJLEVBQUVDLE1BREQ7QUFFTEMsSUFBQUEsSUFBSSxFQUFFLENBQUMsV0FBRCxFQUFjLFVBQWQsRUFBMEIsU0FBMUIsQ0FGRDtBQUdMQyxJQUFBQSxRQUFRLEVBQUU7QUFITCxHQUQ0QjtBQU1uQ0MsRUFBQUEsSUFBSSxFQUFFO0FBQ0pKLElBQUFBLElBQUksRUFBRUMsTUFERjtBQUVKSSxJQUFBQSxPQUFPLEVBQUU7QUFGTDtBQU42QixDQUFYLENBQTFCO0FBV0EsTUFBTUMsYUFBYSxHQUFHLElBQUlSLGdCQUFKLENBQVc7QUFDL0JTLEVBQUFBLFdBQVcsRUFBRSxDQUFDVixpQkFBRCxDQURrQjtBQUUvQlcsRUFBQUEsU0FBUyxFQUFFLENBQUNQLE1BQUQ7QUFGb0IsQ0FBWCxDQUF0QjtBQUlBLE1BQU1RLGNBQWMsR0FBRyxJQUFJWCxnQkFBSixDQUFXO0FBQ2hDRSxFQUFBQSxJQUFJLEVBQUU7QUFDSkEsSUFBQUEsSUFBSSxFQUFFQyxNQURGO0FBRUpDLElBQUFBLElBQUksRUFBRSxDQUFDLE9BQUQsQ0FGRjtBQUdKQyxJQUFBQSxRQUFRLEVBQUU7QUFITixHQUQwQjtBQU1oQ08sRUFBQUEsV0FBVyxFQUFFO0FBQ1hWLElBQUFBLElBQUksRUFBRSxDQUFDVyxNQUFELENBREs7QUFFWFIsSUFBQUEsUUFBUSxFQUFFO0FBRkM7QUFObUIsQ0FBWCxDQUF2QjtBQVdBLE1BQU1TLFlBQVksR0FBRyxJQUFJZCxnQkFBSixDQUFXO0FBQzlCTSxFQUFBQSxJQUFJLEVBQUU7QUFDSlMsSUFBQUEsR0FBRyxFQUFFLE1BREQ7QUFFSmIsSUFBQUEsSUFBSSxFQUFFRixpQkFBT2dCLEtBQVAsQ0FBYUM7QUFGZixHQUR3QjtBQUs5QkMsRUFBQUEsSUFBSSxFQUFFTDtBQUx3QixDQUFYLENBQXJCO0FBT0EsTUFBTU0sUUFBUSxHQUFHLElBQUluQixnQkFBSixDQUFXO0FBQzFCb0IsRUFBQUEsUUFBUSxFQUFFakIsTUFBTSxHQUFHLENBQUNBLE1BQUQsQ0FETztBQUUxQmtCLEVBQUFBLElBQUksRUFBRWxCLE1BRm9CO0FBRzFCbUIsRUFBQUEsRUFBRSxFQUFFbkI7QUFIc0IsQ0FBWCxDQUFqQixDLENBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsTUFBTW9CLFdBQVcsR0FBRyxJQUFJdkIsZ0JBQUosQ0FBVztBQUM3QndCLEVBQUFBLFFBQVEsRUFBRTtBQUNSdEIsSUFBQUEsSUFBSSxFQUFFLENBQUNDLE1BQUQsQ0FERTtBQUVSRSxJQUFBQSxRQUFRLEVBQUUsQ0FBQyxJQUFELEVBQU8sNkJBQVA7QUFGRixHQURtQjtBQUs3Qm9CLEVBQUFBLE9BQU8sRUFBRWpCLGFBTG9CO0FBTTdCa0IsRUFBQUEsV0FBVyxFQUFFdkIsTUFOZ0I7QUFPN0J3QixFQUFBQSxPQUFPLEVBQUUsQ0FBQ3hCLE1BQUQsQ0FQb0I7QUFRN0J5QixFQUFBQSxTQUFTLEVBQUV6QixNQVJrQjtBQVM3QjBCLEVBQUFBLFFBQVEsRUFBRWxCLGNBVG1CO0FBVTdCbUIsRUFBQUEsSUFBSSxFQUFFO0FBQ0o1QixJQUFBQSxJQUFJLEVBQUVDLE1BREY7QUFFSkUsSUFBQUEsUUFBUSxFQUFFLENBQUMsSUFBRCxFQUFPLDBCQUFQO0FBRk4sR0FWdUI7QUFjN0IwQixFQUFBQSxNQUFNLEVBQUUsQ0FBQ2pCLFlBQUQsQ0FkcUI7QUFlN0JrQixFQUFBQSxRQUFRLEVBQUUsQ0FBQ2IsUUFBRCxDQWZtQixDQWdCN0I7O0FBaEI2QixDQUFYLENBQXBCO0FBbUJBSSxXQUFXLENBQUNVLEtBQVosQ0FBa0I7QUFBRUosRUFBQUEsUUFBUSxFQUFFO0FBQVosQ0FBbEIsRSxDQUNBOztlQUNlLHFCQUFNLE9BQU4sRUFBZU4sV0FBZixDIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hLCBtb2RlbCB9IGZyb20gJ21vbmdvb3NlJ1xuY29uc3Qgc29jaWFsTWVkaWFTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgbWVkaWE6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydJbnN0YWdyYW0nLCAnRmFjZWJvb2snLCAnVHdpdHRlciddLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIHVzZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZTogdHJ1ZVxuICB9XG59KVxuY29uc3QgY29udGFjdFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBzb2NpYWxNZWRpYTogW3NvY2lhbE1lZGlhU2NoZW1hXSxcbiAgdGVsZXBob25lOiBbU3RyaW5nXVxufSlcbmNvbnN0IGxvY2F0aW9uU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHR5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydQb2ludCddLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIGNvb3JkaW5hdGVzOiB7XG4gICAgdHlwZTogW051bWJlcl0sXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfVxufSlcbmNvbnN0IHJhdGluZ1NjaGVtZSA9IG5ldyBTY2hlbWEoe1xuICB1c2VyOiB7XG4gICAgcmVmOiAnVXNlcicsXG4gICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkXG4gIH0sXG4gIHJhdGU6IE51bWJlclxufSlcbmNvbnN0IHdvcmtEYXlzID0gbmV3IFNjaGVtYSh7XG4gIGludGVydmFsOiBTdHJpbmcgfCBbU3RyaW5nXSxcbiAgZnJvbTogU3RyaW5nLFxuICB0bzogU3RyaW5nXG59KVxuLy8gY29uc3QgZm9vZFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuLy8gICAgIG5hbWU6IHtcbi8vICAgICAgICAgdHlwZTogU3RyaW5nLFxuLy8gICAgICAgICByZXF1aXJlZDogdHJ1ZVxuLy8gICAgIH0sXG4vLyAgICAgZGVzY3JpcHRpb246IHtcbi8vICAgICAgICAgdHlwZTogU3RyaW5nLFxuLy8gICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbi8vICAgICB9LFxuLy8gICAgIHByaWNlOiB7XG4vLyAgICAgICAgIHR5cGU6IE51bWJlcixcbi8vICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbi8vICAgICB9LFxuLy8gICAgIHBob3RvOiB7XG4vLyAgICAgICAgIHR5cGU6IFN0cmluZyxcbi8vICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbi8vICAgICB9LFxuLy8gICAgIGNhdGVnb3J5OiB7XG4vLyAgICAgICAgIHR5cGU6IFtTdHJpbmddLFxuLy8gICAgICAgICByZXF1aXJlZDogdHJ1ZVxuLy8gICAgIH1cbi8vIH0pXG5jb25zdCBwbGFjZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBjYXRlZ29yeToge1xuICAgIHR5cGU6IFtTdHJpbmddLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ05vIHNlIHByb3BvcmNpb27DsyBjYXRlZ29yaWEnXVxuICB9LFxuICBjb250YWN0OiBjb250YWN0U2NoZW1hLFxuICBkZXNjcmlwdGlvbjogU3RyaW5nLFxuICBnYWxsZXJ5OiBbU3RyaW5nXSxcbiAgdWJpY2F0aW9uOiBTdHJpbmcsXG4gIGxvY2F0aW9uOiBsb2NhdGlvblNjaGVtYSxcbiAgbmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdObyBzZSBwcm9wb3JjaW9uw7Mgbm9tYnJlJ11cbiAgfSxcbiAgcmF0aW5nOiBbcmF0aW5nU2NoZW1lXSxcbiAgc2NoZWR1bGU6IFt3b3JrRGF5c11cbiAgLy8gbWVudTogW2Zvb2RTY2hlbWFdXG59KVxuXG5wbGFjZVNjaGVtYS5pbmRleCh7IGxvY2F0aW9uOiAnMmRzcGhlcmUnIH0pXG4vLyBwbGFjZU1vZGVsLmNyZWF0ZUluZGV4ZXMoeyBsb2NhdGlvbjogJzJkc3BoZXJlJyB9KVxuZXhwb3J0IGRlZmF1bHQgbW9kZWwoJ1BsYWNlJywgcGxhY2VTY2hlbWEpXG4iXX0=","map":{"version":3,"sources":["places.js"],"names":["socialMediaSchema","Schema","media","type","String","enum","required","user","require","contactSchema","socialMedia","telephone","locationSchema","coordinates","Number","ratingScheme","ref","Types","ObjectId","rate","workDays","interval","from","to","placeSchema","category","contact","description","gallery","ubication","location","name","rating","schedule","index"],"mappings":";;;;;;;AAAA;;AACA,MAAMA,iBAAiB,GAAG,IAAIC,gBAAJ,CAAW;AACnCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,IAAI,EAAE,CAAC,WAAD,EAAc,UAAd,EAA0B,SAA1B,CAFD;AAGLC,IAAAA,QAAQ,EAAE;AAHL,GAD4B;AAMnCC,EAAAA,IAAI,EAAE;AACJJ,IAAAA,IAAI,EAAEC,MADF;AAEJI,IAAAA,OAAO,EAAE;AAFL;AAN6B,CAAX,CAA1B;AAWA,MAAMC,aAAa,GAAG,IAAIR,gBAAJ,CAAW;AAC/BS,EAAAA,WAAW,EAAE,CAACV,iBAAD,CADkB;AAE/BW,EAAAA,SAAS,EAAE,CAACP,MAAD;AAFoB,CAAX,CAAtB;AAIA,MAAMQ,cAAc,GAAG,IAAIX,gBAAJ,CAAW;AAChCE,EAAAA,IAAI,EAAE;AACJA,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,IAAI,EAAE,CAAC,OAAD,CAFF;AAGJC,IAAAA,QAAQ,EAAE;AAHN,GAD0B;AAMhCO,EAAAA,WAAW,EAAE;AACXV,IAAAA,IAAI,EAAE,CAACW,MAAD,CADK;AAEXR,IAAAA,QAAQ,EAAE;AAFC;AANmB,CAAX,CAAvB;AAWA,MAAMS,YAAY,GAAG,IAAId,gBAAJ,CAAW;AAC9BM,EAAAA,IAAI,EAAE;AACJS,IAAAA,GAAG,EAAE,MADD;AAEJb,IAAAA,IAAI,EAAEF,iBAAOgB,KAAP,CAAaC;AAFf,GADwB;AAK9BC,EAAAA,IAAI,EAAEL;AALwB,CAAX,CAArB;AAOA,MAAMM,QAAQ,GAAG,IAAInB,gBAAJ,CAAW;AAC1BoB,EAAAA,QAAQ,EAAEjB,MAAM,GAAG,CAACA,MAAD,CADO;AAE1BkB,EAAAA,IAAI,EAAElB,MAFoB;AAG1BmB,EAAAA,EAAE,EAAEnB;AAHsB,CAAX,CAAjB,C,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMoB,WAAW,GAAG,IAAIvB,gBAAJ,CAAW;AAC7BwB,EAAAA,QAAQ,EAAE;AACRtB,IAAAA,IAAI,EAAE,CAACC,MAAD,CADE;AAERE,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,6BAAP;AAFF,GADmB;AAK7BoB,EAAAA,OAAO,EAAEjB,aALoB;AAM7BkB,EAAAA,WAAW,EAAEvB,MANgB;AAO7BwB,EAAAA,OAAO,EAAE,CAACxB,MAAD,CAPoB;AAQ7ByB,EAAAA,SAAS,EAAEzB,MARkB;AAS7B0B,EAAAA,QAAQ,EAAElB,cATmB;AAU7BmB,EAAAA,IAAI,EAAE;AACJ5B,IAAAA,IAAI,EAAEC,MADF;AAEJE,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,0BAAP;AAFN,GAVuB;AAc7B0B,EAAAA,MAAM,EAAE,CAACjB,YAAD,CAdqB;AAe7BkB,EAAAA,QAAQ,EAAE,CAACb,QAAD,CAfmB,CAgB7B;;AAhB6B,CAAX,CAApB;AAmBAI,WAAW,CAACU,KAAZ,CAAkB;AAAEJ,EAAAA,QAAQ,EAAE;AAAZ,CAAlB,E,CACA;;eACe,qBAAM,OAAN,EAAeN,WAAf,C","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/","sourcesContent":["import { Schema, model } from 'mongoose'\nconst socialMediaSchema = new Schema({\n  media: {\n    type: String,\n    enum: ['Instagram', 'Facebook', 'Twitter'],\n    required: true\n  },\n  user: {\n    type: String,\n    require: true\n  }\n})\nconst contactSchema = new Schema({\n  socialMedia: [socialMediaSchema],\n  telephone: [String]\n})\nconst locationSchema = new Schema({\n  type: {\n    type: String,\n    enum: ['Point'],\n    required: true\n  },\n  coordinates: {\n    type: [Number],\n    required: true\n  }\n})\nconst ratingScheme = new Schema({\n  user: {\n    ref: 'User',\n    type: Schema.Types.ObjectId\n  },\n  rate: Number\n})\nconst workDays = new Schema({\n  interval: String | [String],\n  from: String,\n  to: String\n})\n// const foodSchema = new Schema({\n//     name: {\n//         type: String,\n//         required: true\n//     },\n//     description: {\n//         type: String,\n//         required: true,\n//     },\n//     price: {\n//         type: Number,\n//         required: true\n//     },\n//     photo: {\n//         type: String,\n//         required: true\n//     },\n//     category: {\n//         type: [String],\n//         required: true\n//     }\n// })\nconst placeSchema = new Schema({\n  category: {\n    type: [String],\n    required: [true, 'No se proporcionÃ³ categoria']\n  },\n  contact: contactSchema,\n  description: String,\n  gallery: [String],\n  ubication: String,\n  location: locationSchema,\n  name: {\n    type: String,\n    required: [true, 'No se proporcionÃ³ nombre']\n  },\n  rating: [ratingScheme],\n  schedule: [workDays]\n  // menu: [foodSchema]\n})\n\nplaceSchema.index({ location: '2dsphere' })\n// placeModel.createIndexes({ location: '2dsphere' })\nexport default model('Place', placeSchema)\n"]}},"mtime":1647678627799},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/validations.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidObjectId = void 0;\n\nconst isValidObjectId = id => id.match(/^[0-9a-fA-F]{24}$/);\n\nexports.isValidObjectId = isValidObjectId;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRpb25zLmpzIl0sIm5hbWVzIjpbImlzVmFsaWRPYmplY3RJZCIsImlkIiwibWF0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTyxNQUFNQSxlQUFlLEdBQUlDLEVBQUQsSUFBUUEsRUFBRSxDQUFDQyxLQUFILENBQVMsbUJBQVQsQ0FBaEMiLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjL2xpYnMvIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlzVmFsaWRPYmplY3RJZCA9IChpZCkgPT4gaWQubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLylcbiJdfQ==","map":{"version":3,"sources":["validations.js"],"names":["isValidObjectId","id","match"],"mappings":";;;;;;;AAAO,MAAMA,eAAe,GAAIC,EAAD,IAAQA,EAAE,CAACC,KAAH,CAAS,mBAAT,CAAhC","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/","sourcesContent":["export const isValidObjectId = (id) => id.match(/^[0-9a-fA-F]{24}$/)\n"]}},"mtime":1647679332634},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/middlewares/authorization.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tokenVerification = exports.isSeller = exports.isModerator = exports.isAdmin = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _users = _interopRequireDefault(require(\"../models/users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst noNeededInfo = {\n  password: 0,\n  photoUrl: 0,\n  email: 0,\n  fullName: 0,\n  createdAt: 0,\n  updatedAt: 0\n};\n\nconst tokenVerification = async (req, res, next) => {\n  const {\n    authorization\n  } = req.headers;\n  if (!authorization) return res.status(403).json({\n    message: 'No token provided'\n  });\n\n  try {\n    const decoded = _jsonwebtoken.default.verify(authorization, process.env.TOKEN_SECRET);\n\n    req.userId = decoded?.id; //  console.log(`userId is ${req.userId}`)\n\n    const userFound = await _users.default.findOne({\n      _id: decoded?.id\n    }, {\n      password: 0\n    });\n    if (!userFound) return res.status(404).json({\n      message: 'User doesnt exist'\n    });\n    next();\n  } catch (error) {\n    //  console.error(error)\n    if (error.name === 'TokenExpiredError') res.status(401).json({\n      message: 'Token Expired'\n    });\n    if (error.name === 'JsonWebTokenError') res.status(401).json({\n      message: 'Token Invalido'\n    });\n  }\n};\n\nexports.tokenVerification = tokenVerification;\n\nconst isModerator = async (req, res, next) => {\n  const user = await _users.default.findOne({\n    _id: req.userId\n  }, {\n    noNeededInfo\n  }).populate('roles');\n\n  for (const role of user.roles) {\n    if (role.name === 'Moderator') {\n      next();\n      return;\n    }\n  }\n\n  res.status(403).json(getMessageResponse({\n    role: 'Moderator'\n  }));\n};\n\nexports.isModerator = isModerator;\n\nconst isAdmin = async (req, res, next) => {\n  const user = await _users.default.findOne({\n    _id: req.userId\n  }, {\n    noNeededInfo\n  }).populate('roles');\n\n  for (const role of user.roles) {\n    if (role.name === 'Admin') {\n      next();\n      return;\n    }\n  }\n\n  res.status(403).json(getMessageResponse({\n    role: 'Admin'\n  }));\n};\n\nexports.isAdmin = isAdmin;\n\nconst isSeller = async (req, res, next) => {\n  const user = await _users.default.findOne({\n    _id: req.userId\n  }, {\n    noNeededInfo\n  }).populate('roles');\n\n  for (const role of user.roles) {\n    if (role.name === 'Seller') {\n      next();\n      return;\n    }\n  }\n\n  res.status(403).json(getMessageResponse({\n    role: 'Seller'\n  }));\n};\n\nexports.isSeller = isSeller;\n\nconst getMessageResponse = ({\n  role\n}) => {\n  return {\n    message: `Require ${role} Role`\n  };\n}; // (getMessageResponse('admin'))()\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsibm9OZWVkZWRJbmZvIiwicGFzc3dvcmQiLCJwaG90b1VybCIsImVtYWlsIiwiZnVsbE5hbWUiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJ0b2tlblZlcmlmaWNhdGlvbiIsInJlcSIsInJlcyIsIm5leHQiLCJhdXRob3JpemF0aW9uIiwiaGVhZGVycyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZGVjb2RlZCIsImp3dCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJUT0tFTl9TRUNSRVQiLCJ1c2VySWQiLCJpZCIsInVzZXJGb3VuZCIsIlVzZXIiLCJmaW5kT25lIiwiX2lkIiwiZXJyb3IiLCJuYW1lIiwiaXNNb2RlcmF0b3IiLCJ1c2VyIiwicG9wdWxhdGUiLCJyb2xlIiwicm9sZXMiLCJnZXRNZXNzYWdlUmVzcG9uc2UiLCJpc0FkbWluIiwiaXNTZWxsZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLFlBQVksR0FBRztBQUNuQkMsRUFBQUEsUUFBUSxFQUFFLENBRFM7QUFFbkJDLEVBQUFBLFFBQVEsRUFBRSxDQUZTO0FBR25CQyxFQUFBQSxLQUFLLEVBQUUsQ0FIWTtBQUluQkMsRUFBQUEsUUFBUSxFQUFFLENBSlM7QUFLbkJDLEVBQUFBLFNBQVMsRUFBRSxDQUxRO0FBTW5CQyxFQUFBQSxTQUFTLEVBQUU7QUFOUSxDQUFyQjs7QUFTTyxNQUFNQyxpQkFBaUIsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0FBQ3pELFFBQU07QUFBRUMsSUFBQUE7QUFBRixNQUFvQkgsR0FBRyxDQUFDSSxPQUE5QjtBQUNBLE1BQUksQ0FBQ0QsYUFBTCxFQUFvQixPQUFPRixHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUFyQixDQUFQOztBQUNw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bkIsR0FBRyxDQUFDYztBQUFYLEdBQWIsRUFBa0M7QUFBRXRCLElBQUFBO0FBQUYsR0FBbEMsRUFBb0RnQyxRQUFwRCxDQUE2RCxPQUE3RCxDQUFuQjs7QUFDQSxPQUFLLE1BQU1DLElBQVgsSUFBbUJGLElBQUksQ0FBQ0csS0FBeEIsRUFBK0I7QUFDN0IsUUFBSUQsSUFBSSxDQUFDSixJQUFMLEtBQWMsUUFBbEIsRUFBNEI7QUFDMUJuQixNQUFBQSxJQUFJO0FBQ0o7QUFDRDtBQUNGOztBQUNERCxFQUFBQSxHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQnFCLGtCQUFrQixDQUFDO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQUQsQ0FBdkM7QUFDRCxDQVRNOzs7O0FBV1AsTUFBTUUsa0JBQWtCLEdBQUcsQ0FBQztBQUFFRixFQUFBQTtBQUFGLENBQUQsS0FBYztBQUN2QyxTQUFPO0FBQUVsQixJQUFBQSxPQUFPLEVBQUcsV0FBVWtCLElBQUs7QUFBM0IsR0FBUDtBQUNELENBRkQsQyxDQUdBIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VycydcblxuY29uc3Qgbm9OZWVkZWRJbmZvID0ge1xuICBwYXNzd29yZDogMCxcbiAgcGhvdG9Vcmw6IDAsXG4gIGVtYWlsOiAwLFxuICBmdWxsTmFtZTogMCxcbiAgY3JlYXRlZEF0OiAwLFxuICB1cGRhdGVkQXQ6IDBcbn1cblxuZXhwb3J0IGNvbnN0IHRva2VuVmVyaWZpY2F0aW9uID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgYXV0aG9yaXphdGlvbiB9ID0gcmVxLmhlYWRlcnNcbiAgaWYgKCFhdXRob3JpemF0aW9uKSByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnTm8gdG9rZW4gcHJvdmlkZWQnIH0pXG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkoYXV0aG9yaXphdGlvbiwgcHJvY2Vzcy5lbnYuVE9LRU5fU0VDUkVUKVxuICAgIHJlcS51c2VySWQgPSBkZWNvZGVkPy5pZFxuICAgIC8vICBjb25zb2xlLmxvZyhgdXNlcklkIGlzICR7cmVxLnVzZXJJZH1gKVxuICAgIGNvbnN0IHVzZXJGb3VuZCA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogZGVjb2RlZD8uaWQgfSwgeyBwYXNzd29yZDogMCB9KVxuICAgIGlmICghdXNlckZvdW5kKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBkb2VzbnQgZXhpc3QnIH0pXG4gICAgbmV4dCgpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdUb2tlbkV4cGlyZWRFcnJvcicpIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1Rva2VuIEV4cGlyZWQnIH0pXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdKc29uV2ViVG9rZW5FcnJvcicpIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1Rva2VuIEludmFsaWRvJyB9KVxuICB9XG59XG5leHBvcnQgY29uc3QgaXNNb2RlcmF0b3IgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogcmVxLnVzZXJJZCB9LCB7IG5vTmVlZGVkSW5mbyB9KS5wb3B1bGF0ZSgncm9sZXMnKVxuICBmb3IgKGNvbnN0IHJvbGUgb2YgdXNlci5yb2xlcykge1xuICAgIGlmIChyb2xlLm5hbWUgPT09ICdNb2RlcmF0b3InKSB7XG4gICAgICBuZXh0KClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxuICByZXMuc3RhdHVzKDQwMykuanNvbihnZXRNZXNzYWdlUmVzcG9uc2UoeyByb2xlOiAnTW9kZXJhdG9yJyB9KSlcbn1cbmV4cG9ydCBjb25zdCBpc0FkbWluID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHJlcS51c2VySWQgfSwgeyBub05lZWRlZEluZm8gfSkucG9wdWxhdGUoJ3JvbGVzJylcbiAgZm9yIChjb25zdCByb2xlIG9mIHVzZXIucm9sZXMpIHtcbiAgICBpZiAocm9sZS5uYW1lID09PSAnQWRtaW4nKSB7XG4gICAgICBuZXh0KClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxuICByZXMuc3RhdHVzKDQwMykuanNvbihnZXRNZXNzYWdlUmVzcG9uc2UoeyByb2xlOiAnQWRtaW4nIH0pKVxufVxuZXhwb3J0IGNvbnN0IGlzU2VsbGVyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHJlcS51c2VySWQgfSwgeyBub05lZWRlZEluZm8gfSkucG9wdWxhdGUoJ3JvbGVzJylcbiAgZm9yIChjb25zdCByb2xlIG9mIHVzZXIucm9sZXMpIHtcbiAgICBpZiAocm9sZS5uYW1lID09PSAnU2VsbGVyJykge1xuICAgICAgbmV4dCgpXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cbiAgcmVzLnN0YXR1cyg0MDMpLmpzb24oZ2V0TWVzc2FnZVJlc3BvbnNlKHsgcm9sZTogJ1NlbGxlcicgfSkpXG59XG5cbmNvbnN0IGdldE1lc3NhZ2VSZXNwb25zZSA9ICh7IHJvbGUgfSkgPT4ge1xuICByZXR1cm4geyBtZXNzYWdlOiBgUmVxdWlyZSAke3JvbGV9IFJvbGVgIH1cbn1cbi8vIChnZXRNZXNzYWdlUmVzcG9uc2UoJ2FkbWluJykpKClcbiJdfQ==","map":{"version":3,"sources":["authorization.js"],"names":["noNeededInfo","password","photoUrl","email","fullName","createdAt","updatedAt","tokenVerification","req","res","next","authorization","headers","status","json","message","decoded","jwt","verify","process","env","TOKEN_SECRET","userId","id","userFound","User","findOne","_id","error","name","isModerator","user","populate","role","roles","getMessageResponse","isAdmin","isSeller"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/middlewares/","sourcesContent":["import jwt from 'jsonwebtoken'\nimport User from '../models/users'\n\nconst noNeededInfo = {\n  password: 0,\n  photoUrl: 0,\n  email: 0,\n  fullName: 0,\n  createdAt: 0,\n  updatedAt: 0\n}\n\nexport const tokenVerification = async (req, res, next) => {\n  const { authorization } = req.headers\n  if (!authorization) return res.status(403).json({ message: 'No token provided' })\n  try {\n    const decoded = jwt.verify(authorization, process.env.TOKEN_SECRET)\n    req.userId = decoded?.id\n    //  console.log(`userId is ${req.userId}`)\n    const userFound = await User.findOne({ _id: decoded?.id }, { password: 0 })\n    if (!userFound) return res.status(404).json({ message: 'User doesnt exist' })\n    next()\n  } catch (error) {\n    //  console.error(error)\n    if (error.name === 'TokenExpiredError') res.status(401).json({ message: 'Token Expired' })\n    if (error.name === 'JsonWebTokenError') res.status(401).json({ message: 'Token Invalido' })\n  }\n}\nexport const isModerator = async (req, res, next) => {\n  const user = await User.findOne({ _id: req.userId }, { noNeededInfo }).populate('roles')\n  for (const role of user.roles) {\n    if (role.name === 'Moderator') {\n      next()\n      return\n    }\n  }\n  res.status(403).json(getMessageResponse({ role: 'Moderator' }))\n}\nexport const isAdmin = async (req, res, next) => {\n  const user = await User.findOne({ _id: req.userId }, { noNeededInfo }).populate('roles')\n  for (const role of user.roles) {\n    if (role.name === 'Admin') {\n      next()\n      return\n    }\n  }\n  res.status(403).json(getMessageResponse({ role: 'Admin' }))\n}\nexport const isSeller = async (req, res, next) => {\n  const user = await User.findOne({ _id: req.userId }, { noNeededInfo }).populate('roles')\n  for (const role of user.roles) {\n    if (role.name === 'Seller') {\n      next()\n      return\n    }\n  }\n  res.status(403).json(getMessageResponse({ role: 'Seller' }))\n}\n\nconst getMessageResponse = ({ role }) => {\n  return { message: `Require ${role} Role` }\n}\n// (getMessageResponse('admin'))()\n"]}},"mtime":1647678294668},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userSchema = new _mongoose.Schema({\n  email: {\n    type: String,\n    require: true,\n    unique: true\n  },\n  fullName: {\n    type: String,\n    require: true\n  },\n  password: {\n    type: String,\n    require: true\n  },\n  roles: [{\n    ref: 'Role',\n    type: _mongoose.Schema.Types.ObjectId\n  }],\n  photoUrl: {\n    type: String,\n    default: 'http://localhost:3000/users/photo/default.png'\n  }\n}, {\n  timestamps: true,\n  versionKey: false\n});\n\nuserSchema.statics.encryptPassword = async password => {\n  const salt = await _bcrypt.default.genSalt(12);\n  return await _bcrypt.default.hash(password, salt);\n};\n\nuserSchema.statics.verifyPassword = async (password, hash) => {\n  return await _bcrypt.default.compare(password, hash);\n};\n\nvar _default = (0, _mongoose.model)('User', userSchema);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJlbWFpbCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlIiwidW5pcXVlIiwiZnVsbE5hbWUiLCJwYXNzd29yZCIsInJvbGVzIiwicmVmIiwiVHlwZXMiLCJPYmplY3RJZCIsInBob3RvVXJsIiwiZGVmYXVsdCIsInRpbWVzdGFtcHMiLCJ2ZXJzaW9uS2V5Iiwic3RhdGljcyIsImVuY3J5cHRQYXNzd29yZCIsInNhbHQiLCJiY3J5cHQiLCJnZW5TYWx0IiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBQ0EsTUFBTUEsVUFBVSxHQUFHLElBQUlDLGdCQUFKLENBQVc7QUFDNUJDLEVBQUFBLEtBQUssRUFBRTtBQUNMQyxJQUFBQSxJQUFJLEVBQUVDLE1BREQ7QUFFTEMsSUFBQUEsT0FBTyxFQUFFLElBRko7QUFHTEMsSUFBQUEsTUFBTSxFQUFFO0FBSEgsR0FEcUI7QUFNNUJDLEVBQUFBLFFBQVEsRUFBRTtBQUNSSixJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUkMsSUFBQUEsT0FBTyxFQUFFO0FBRkQsR0FOa0I7QUFVNUJHLEVBQUFBLFFBQVEsRUFBRTtBQUNSTCxJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUkMsSUFBQUEsT0FBTyxFQUFFO0FBRkQsR0FWa0I7QUFjNUJJLEVBQUFBLEtBQUssRUFBRSxDQUNMO0FBQ0VDLElBQUFBLEdBQUcsRUFBRSxNQURQO0FBRUVQLElBQUFBLElBQUksRUFBRUYsaUJBQU9VLEtBQVAsQ0FBYUM7QUFGckIsR0FESyxDQWRxQjtBQW9CNUJDLEVBQUFBLFFBQVEsRUFBRTtBQUNSVixJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUlUsSUFBQUEsT0FBTyxFQUFFO0FBRkQ7QUFwQmtCLENBQVgsRUF3QmhCO0FBQ0RDLEVBQUFBLFVBQVUsRUFBRSxJQURYO0FBRURDLEVBQUFBLFVBQVUsRUFBRTtBQUZYLENBeEJnQixDQUFuQjs7QUE0QkFoQixVQUFVLENBQUNpQixPQUFYLENBQW1CQyxlQUFuQixHQUFxQyxNQUFPVixRQUFQLElBQW9CO0FBQ3ZELFFBQU1XLElBQUksR0FBRyxNQUFNQyxnQkFBT0MsT0FBUCxDQUFlLEVBQWYsQ0FBbkI7QUFDQSxTQUFPLE1BQU1ELGdCQUFPRSxJQUFQLENBQVlkLFFBQVosRUFBc0JXLElBQXRCLENBQWI7QUFDRCxDQUhEOztBQUlBbkIsVUFBVSxDQUFDaUIsT0FBWCxDQUFtQk0sY0FBbkIsR0FBb0MsT0FBT2YsUUFBUCxFQUFpQmMsSUFBakIsS0FBMEI7QUFDNUQsU0FBTyxNQUFNRixnQkFBT0ksT0FBUCxDQUFlaEIsUUFBZixFQUF5QmMsSUFBekIsQ0FBYjtBQUNELENBRkQ7O2VBR2UscUJBQU0sTUFBTixFQUFjdEIsVUFBZCxDIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hLCBtb2RlbCB9IGZyb20gJ21vbmdvb3NlJ1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGVtYWlsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmU6IHRydWUsXG4gICAgdW5pcXVlOiB0cnVlXG4gIH0sXG4gIGZ1bGxOYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmU6IHRydWVcbiAgfSxcbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZTogdHJ1ZVxuICB9LFxuICByb2xlczogW1xuICAgIHtcbiAgICAgIHJlZjogJ1JvbGUnLFxuICAgICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkXG4gICAgfVxuICBdLFxuICBwaG90b1VybDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzL3Bob3RvL2RlZmF1bHQucG5nJ1xuICB9XG59LCB7XG4gIHRpbWVzdGFtcHM6IHRydWUsXG4gIHZlcnNpb25LZXk6IGZhbHNlXG59KVxudXNlclNjaGVtYS5zdGF0aWNzLmVuY3J5cHRQYXNzd29yZCA9IGFzeW5jIChwYXNzd29yZCkgPT4ge1xuICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTIpXG4gIHJldHVybiBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdClcbn1cbnVzZXJTY2hlbWEuc3RhdGljcy52ZXJpZnlQYXNzd29yZCA9IGFzeW5jIChwYXNzd29yZCwgaGFzaCkgPT4ge1xuICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2gpXG59XG5leHBvcnQgZGVmYXVsdCBtb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpXG4iXX0=","map":{"version":3,"sources":["users.js"],"names":["userSchema","Schema","email","type","String","require","unique","fullName","password","roles","ref","Types","ObjectId","photoUrl","default","timestamps","versionKey","statics","encryptPassword","salt","bcrypt","genSalt","hash","verifyPassword","compare"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,OAAO,EAAE,IAFJ;AAGLC,IAAAA,MAAM,EAAE;AAHH,GADqB;AAM5BC,EAAAA,QAAQ,EAAE;AACRJ,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,OAAO,EAAE;AAFD,GANkB;AAU5BG,EAAAA,QAAQ,EAAE;AACRL,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,OAAO,EAAE;AAFD,GAVkB;AAc5BI,EAAAA,KAAK,EAAE,CACL;AACEC,IAAAA,GAAG,EAAE,MADP;AAEEP,IAAAA,IAAI,EAAEF,iBAAOU,KAAP,CAAaC;AAFrB,GADK,CAdqB;AAoB5BC,EAAAA,QAAQ,EAAE;AACRV,IAAAA,IAAI,EAAEC,MADE;AAERU,IAAAA,OAAO,EAAE;AAFD;AApBkB,CAAX,EAwBhB;AACDC,EAAAA,UAAU,EAAE,IADX;AAEDC,EAAAA,UAAU,EAAE;AAFX,CAxBgB,CAAnB;;AA4BAhB,UAAU,CAACiB,OAAX,CAAmBC,eAAnB,GAAqC,MAAOV,QAAP,IAAoB;AACvD,QAAMW,IAAI,GAAG,MAAMC,gBAAOC,OAAP,CAAe,EAAf,CAAnB;AACA,SAAO,MAAMD,gBAAOE,IAAP,CAAYd,QAAZ,EAAsBW,IAAtB,CAAb;AACD,CAHD;;AAIAnB,UAAU,CAACiB,OAAX,CAAmBM,cAAnB,GAAoC,OAAOf,QAAP,EAAiBc,IAAjB,KAA0B;AAC5D,SAAO,MAAMF,gBAAOI,OAAP,CAAehB,QAAf,EAAyBc,IAAzB,CAAb;AACD,CAFD;;eAGe,qBAAM,MAAN,EAActB,UAAd,C","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/","sourcesContent":["import { Schema, model } from 'mongoose'\nimport bcrypt from 'bcrypt'\nconst userSchema = new Schema({\n  email: {\n    type: String,\n    require: true,\n    unique: true\n  },\n  fullName: {\n    type: String,\n    require: true\n  },\n  password: {\n    type: String,\n    require: true\n  },\n  roles: [\n    {\n      ref: 'Role',\n      type: Schema.Types.ObjectId\n    }\n  ],\n  photoUrl: {\n    type: String,\n    default: 'http://localhost:3000/users/photo/default.png'\n  }\n}, {\n  timestamps: true,\n  versionKey: false\n})\nuserSchema.statics.encryptPassword = async (password) => {\n  const salt = await bcrypt.genSalt(12)\n  return await bcrypt.hash(password, salt)\n}\nuserSchema.statics.verifyPassword = async (password, hash) => {\n  return await bcrypt.compare(password, hash)\n}\nexport default model('User', userSchema)\n"]}},"mtime":1647678695356},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/authentication.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar authenticationController = _interopRequireWildcard(require(\"../controllers/authentication\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.post('/signup', authenticationController.signUp);\nrouter.post('/login', authenticationController.login);\nrouter.post('/resetPassword', authenticationController.changePassword);\nrouter.post('/forgotPassword', authenticationController.forgotPassword);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInBvc3QiLCJhdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIiLCJzaWduVXAiLCJsb2dpbiIsImNoYW5nZVBhc3N3b3JkIiwiZm9yZ290UGFzc3dvcmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7Ozs7O0FBQ0EsTUFBTUEsTUFBTSxHQUFHLHNCQUFmO0FBQ0FBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZLFNBQVosRUFBdUJDLHdCQUF3QixDQUFDQyxNQUFoRDtBQUNBSCxNQUFNLENBQUNDLElBQVAsQ0FBWSxRQUFaLEVBQXNCQyx3QkFBd0IsQ0FBQ0UsS0FBL0M7QUFDQUosTUFBTSxDQUFDQyxJQUFQLENBQVksZ0JBQVosRUFBOEJDLHdCQUF3QixDQUFDRyxjQUF2RDtBQUNBTCxNQUFNLENBQUNDLElBQVAsQ0FBWSxpQkFBWixFQUErQkMsd0JBQXdCLENBQUNJLGNBQXhEO2VBRWVOLE0iLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0ICogYXMgYXV0aGVudGljYXRpb25Db250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL2F1dGhlbnRpY2F0aW9uJ1xuY29uc3Qgcm91dGVyID0gUm91dGVyKClcbnJvdXRlci5wb3N0KCcvc2lnbnVwJywgYXV0aGVudGljYXRpb25Db250cm9sbGVyLnNpZ25VcClcbnJvdXRlci5wb3N0KCcvbG9naW4nLCBhdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIubG9naW4pXG5yb3V0ZXIucG9zdCgnL3Jlc2V0UGFzc3dvcmQnLCBhdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIuY2hhbmdlUGFzc3dvcmQpXG5yb3V0ZXIucG9zdCgnL2ZvcmdvdFBhc3N3b3JkJywgYXV0aGVudGljYXRpb25Db250cm9sbGVyLmZvcmdvdFBhc3N3b3JkKVxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXJcbiJdfQ==","map":{"version":3,"sources":["authentication.js"],"names":["router","post","authenticationController","signUp","login","changePassword","forgotPassword"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AACA,MAAMA,MAAM,GAAG,sBAAf;AACAA,MAAM,CAACC,IAAP,CAAY,SAAZ,EAAuBC,wBAAwB,CAACC,MAAhD;AACAH,MAAM,CAACC,IAAP,CAAY,QAAZ,EAAsBC,wBAAwB,CAACE,KAA/C;AACAJ,MAAM,CAACC,IAAP,CAAY,gBAAZ,EAA8BC,wBAAwB,CAACG,cAAvD;AACAL,MAAM,CAACC,IAAP,CAAY,iBAAZ,EAA+BC,wBAAwB,CAACI,cAAxD;eAEeN,M","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/","sourcesContent":["import { Router } from 'express'\nimport * as authenticationController from '../controllers/authentication'\nconst router = Router()\nrouter.post('/signup', authenticationController.signUp)\nrouter.post('/login', authenticationController.login)\nrouter.post('/resetPassword', authenticationController.changePassword)\nrouter.post('/forgotPassword', authenticationController.forgotPassword)\n\nexport default router\n"]}},"mtime":1647674487752},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/authentication.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signUp = exports.login = exports.forgotPassword = exports.changePassword = void 0;\n\nvar _users = _interopRequireDefault(require(\"../models/users\"));\n\nvar _roles = _interopRequireDefault(require(\"../models/roles\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst signUp = async (req, res) => {\n  const {\n    email,\n    password,\n    fullName,\n    roles\n  } = req.body;\n  const existingUser = await _users.default.findOne({\n    email\n  });\n  if (existingUser) return res.json({\n    message: 'Ese correo ya esta registrado'\n  });\n  const newUser = new _users.default({\n    email,\n    password: await _users.default.encryptPassword(password),\n    fullName\n  });\n\n  if (roles) {\n    const foundRoles = await _roles.default.find({\n      name: {\n        $in: roles\n      }\n    });\n    newUser.roles = foundRoles.map(role => role._id);\n  } else {\n    const role = await _roles.default.findOne({\n      name: 'User'\n    });\n    newUser.roles = [role._id];\n  }\n\n  const savedUser = await newUser.save();\n\n  const token = _jsonwebtoken.default.sign({\n    id: savedUser._id\n  }, process.env.TOKEN_SECRET, {\n    expiresIn: 86400\n  });\n\n  res.json({\n    token\n  });\n};\n\nexports.signUp = signUp;\n\nconst login = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  const existingUser = await _users.default.findOne({\n    email\n  }); //  const existingUser = await User.findOne({ email }).populate('roles')\n\n  if (!existingUser) return res.status(400).json({\n    message: 'Ese correo electrÃ³nico no estÃ¡ registrado'\n  });\n  const matchedPassword = await _users.default.verifyPassword(password, existingUser.password);\n  if (!matchedPassword) return res.status(401).json({\n    message: 'VerifÃ­que el correo o la contraseÃ±a'\n  });\n\n  const token = _jsonwebtoken.default.sign({\n    id: existingUser._id\n  }, process.env.TOKEN_SECRET, {\n    expiresIn: 86400\n  });\n\n  res.json({\n    token\n  });\n};\n\nexports.login = login;\n\nconst changePassword = async (req, res) => {\n  const {\n    email,\n    password,\n    newPassword,\n    newPasswordConfirmation\n  } = req.body;\n  if (!email) return res.json({\n    message: 'No se proporcionÃ³ correo'\n  });\n  const existingUser = await _users.default.findOne({\n    email\n  });\n  if (!existingUser) return res.status(400).json({\n    message: 'Ese correo electrÃ³nico no estÃ¡ registrado'\n  });\n  const matchedPassword = await _users.default.verifyPassword(password, existingUser.password);\n  if (!matchedPassword) return res.status(401).json({\n    message: 'La contraseÃ±a actual es erronea'\n  });\n  if (newPassword !== newPasswordConfirmation) return res.status(401).json({\n    message: 'Nueva contraseÃ±a y confirmacion de nueva contraseÃ±a no coinciden'\n  });\n  existingUser.password = await _users.default.encryptPassword(newPassword);\n  const userUpdated = await _users.default.findOneAndUpdate({\n    _id: existingUser._id\n  }, existingUser, {\n    new: true\n  });\n  res.json({\n    userUpdated\n  });\n};\n\nexports.changePassword = changePassword;\n\nconst forgotPassword = (req, res) => {\n  const {\n    email\n  } = req.body;\n  res.json({\n    message: `Sending email to ${email}`\n  });\n};\n\nexports.forgotPassword = forgotPassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uLmpzIl0sIm5hbWVzIjpbInNpZ25VcCIsInJlcSIsInJlcyIsImVtYWlsIiwicGFzc3dvcmQiLCJmdWxsTmFtZSIsInJvbGVzIiwiYm9keSIsImV4aXN0aW5nVXNlciIsIlVzZXIiLCJmaW5kT25lIiwianNvbiIsIm1lc3NhZ2UiLCJuZXdVc2VyIiwiZW5jcnlwdFBhc3N3b3JkIiwiZm91bmRSb2xlcyIsIlJvbGUiLCJmaW5kIiwibmFtZSIsIiRpbiIsIm1hcCIsInJvbGUiLCJfaWQiLCJzYXZlZFVzZXIiLCJzYXZlIiwidG9rZW4iLCJqd3QiLCJzaWduIiwiaWQiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU5fU0VDUkVUIiwiZXhwaXJlc0luIiwibG9naW4iLCJzdGF0dXMiLCJtYXRjaGVkUGFzc3dvcmQiLCJ2ZXJpZnlQYXNzd29yZCIsImNoYW5nZVBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJuZXdQYXNzd29yZENvbmZpcm1hdGlvbiIsInVzZXJVcGRhdGVkIiwiZmluZE9uZUFuZFVwZGF0ZSIsIm5ldyIsImZvcmdvdFBhc3N3b3JkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDTyxNQUFNQSxNQUFNLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3hDLFFBQU07QUFBRUMsSUFBQUEsS0FBRjtBQUFTQyxJQUFBQSxRQUFUO0FBQW1CQyxJQUFBQSxRQUFuQjtBQUE2QkMsSUFBQUE7QUFBN0IsTUFBdUNMLEdBQUcsQ0FBQ00sSUFBakQ7QUFDQSxRQUFNQyxZQUFZLEdBQUcsTUFBTUMsZUFBS0MsT0FBTCxDQUFhO0FBQUVQLElBQUFBO0FBQUYsR0FBYixDQUEzQjtBQUNBLE1BQUlLLFlBQUosRUFBa0IsT0FBT04sR0FBRyxDQUFDUyxJQUFKLENBQVM7QUFBRUMsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBVCxDQUFQO0FBQ2xCLFFBQU1DLE9BQU8sR0FBRyxJQUFJSixjQUFKLENBQVM7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SUFBdEI7QUFDQUwsRUFBQUEsR0FBRyxDQUFDUyxJQUFKLENBQVM7QUFBRUMsSUFBQUEsT0FBTyxFQUFHLG9CQUFtQlQsS0FBTTtBQUFyQyxHQUFUO0FBQ0QsQ0FITSIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXJzJ1xuaW1wb3J0IFJvbGUgZnJvbSAnLi4vbW9kZWxzL3JvbGVzJ1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5leHBvcnQgY29uc3Qgc2lnblVwID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBmdWxsTmFtZSwgcm9sZXMgfSA9IHJlcS5ib2R5XG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pXG4gIGlmIChleGlzdGluZ1VzZXIpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdFc2UgY29ycmVvIHlhIGVzdGEgcmVnaXN0cmFkbycgfSlcbiAgY29uc3QgbmV3VXNlciA9IG5ldyBVc2VyKHsgZW1haWwsIHBhc3N3b3JkOiBhd2FpdCBVc2VyLmVuY3J5cHRQYXNzd29yZChwYXNzd29yZCksIGZ1bGxOYW1lIH0pXG4gIGlmIChyb2xlcykge1xuICAgIGNvbnN0IGZvdW5kUm9sZXMgPSBhd2FpdCBSb2xlLmZpbmQoeyBuYW1lOiB7ICRpbjogcm9sZXMgfSB9KVxuICAgIG5ld1VzZXIucm9sZXMgPSBmb3VuZFJvbGVzLm1hcChyb2xlID0+IHJvbGUuX2lkKVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJvbGUgPSBhd2FpdCBSb2xlLmZpbmRPbmUoeyBuYW1lOiAnVXNlcicgfSlcbiAgICBuZXdVc2VyLnJvbGVzID0gW3JvbGUuX2lkXVxuICB9XG4gIGNvbnN0IHNhdmVkVXNlciA9IGF3YWl0IG5ld1VzZXIuc2F2ZSgpXG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogc2F2ZWRVc2VyLl9pZCB9LCBwcm9jZXNzLmVudi5UT0tFTl9TRUNSRVQsIHsgZXhwaXJlc0luOiA4NjQwMCB9KVxuICByZXMuanNvbih7IHRva2VuIH0pXG59XG5leHBvcnQgY29uc3QgbG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5XG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pXG4gIC8vICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KS5wb3B1bGF0ZSgncm9sZXMnKVxuICBpZiAoIWV4aXN0aW5nVXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0VzZSBjb3JyZW8gZWxlY3Ryw7NuaWNvIG5vIGVzdMOhIHJlZ2lzdHJhZG8nIH0pXG4gIGNvbnN0IG1hdGNoZWRQYXNzd29yZCA9IGF3YWl0IFVzZXIudmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIGV4aXN0aW5nVXNlci5wYXNzd29yZClcbiAgaWYgKCFtYXRjaGVkUGFzc3dvcmQpIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdWZXJpZsOtcXVlIGVsIGNvcnJlbyBvIGxhIGNvbnRyYXNlw7FhJyB9KVxuICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgaWQ6IGV4aXN0aW5nVXNlci5faWQgfSwgcHJvY2Vzcy5lbnYuVE9LRU5fU0VDUkVULCB7IGV4cGlyZXNJbjogODY0MDAgfSlcbiAgcmVzLmpzb24oeyB0b2tlbiB9KVxufVxuZXhwb3J0IGNvbnN0IGNoYW5nZVBhc3N3b3JkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBuZXdQYXNzd29yZCwgbmV3UGFzc3dvcmRDb25maXJtYXRpb24gfSA9IHJlcS5ib2R5XG4gIGlmICghZW1haWwpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdObyBzZSBwcm9wb3JjaW9uw7MgY29ycmVvJyB9KVxuICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KVxuICBpZiAoIWV4aXN0aW5nVXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0VzZSBjb3JyZW8gZWxlY3Ryw7NuaWNvIG5vIGVzdMOhIHJlZ2lzdHJhZG8nIH0pXG4gIGNvbnN0IG1hdGNoZWRQYXNzd29yZCA9IGF3YWl0IFVzZXIudmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIGV4aXN0aW5nVXNlci5wYXNzd29yZClcbiAgaWYgKCFtYXRjaGVkUGFzc3dvcmQpIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdMYSBjb250cmFzZcOxYSBhY3R1YWwgZXMgZXJyb25lYScgfSlcbiAgaWYgKG5ld1Bhc3N3b3JkICE9PSBuZXdQYXNzd29yZENvbmZpcm1hdGlvbikgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ051ZXZhIGNvbnRyYXNlw7FhIHkgY29uZmlybWFjaW9uIGRlIG51ZXZhIGNvbnRyYXNlw7FhIG5vIGNvaW5jaWRlbicgfSlcbiAgZXhpc3RpbmdVc2VyLnBhc3N3b3JkID0gYXdhaXQgVXNlci5lbmNyeXB0UGFzc3dvcmQobmV3UGFzc3dvcmQpXG4gIGNvbnN0IHVzZXJVcGRhdGVkID0gYXdhaXQgVXNlci5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiBleGlzdGluZ1VzZXIuX2lkIH0sIGV4aXN0aW5nVXNlciwgeyBuZXc6IHRydWUgfSlcbiAgcmVzLmpzb24oeyB1c2VyVXBkYXRlZCB9KVxufVxuZXhwb3J0IGNvbnN0IGZvcmdvdFBhc3N3b3JkID0gKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5XG4gIHJlcy5qc29uKHsgbWVzc2FnZTogYFNlbmRpbmcgZW1haWwgdG8gJHtlbWFpbH1gIH0pXG59XG4iXX0=","map":{"version":3,"sources":["authentication.js"],"names":["signUp","req","res","email","password","fullName","roles","body","existingUser","User","findOne","json","message","newUser","encryptPassword","foundRoles","Role","find","name","$in","map","role","_id","savedUser","save","token","jwt","sign","id","process","env","TOKEN_SECRET","expiresIn","login","status","matchedPassword","verifyPassword","changePassword","newPassword","newPasswordConfirmation","userUpdated","findOneAndUpdate","new","forgotPassword"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/","sourcesContent":["import User from '../models/users'\nimport Role from '../models/roles'\nimport jwt from 'jsonwebtoken'\nexport const signUp = async (req, res) => {\n  const { email, password, fullName, roles } = req.body\n  const existingUser = await User.findOne({ email })\n  if (existingUser) return res.json({ message: 'Ese correo ya esta registrado' })\n  const newUser = new User({ email, password: await User.encryptPassword(password), fullName })\n  if (roles) {\n    const foundRoles = await Role.find({ name: { $in: roles } })\n    newUser.roles = foundRoles.map(role => role._id)\n  } else {\n    const role = await Role.findOne({ name: 'User' })\n    newUser.roles = [role._id]\n  }\n  const savedUser = await newUser.save()\n  const token = jwt.sign({ id: savedUser._id }, process.env.TOKEN_SECRET, { expiresIn: 86400 })\n  res.json({ token })\n}\nexport const login = async (req, res) => {\n  const { email, password } = req.body\n  const existingUser = await User.findOne({ email })\n  //  const existingUser = await User.findOne({ email }).populate('roles')\n  if (!existingUser) return res.status(400).json({ message: 'Ese correo electrÃ³nico no estÃ¡ registrado' })\n  const matchedPassword = await User.verifyPassword(password, existingUser.password)\n  if (!matchedPassword) return res.status(401).json({ message: 'VerifÃ­que el correo o la contraseÃ±a' })\n  const token = jwt.sign({ id: existingUser._id }, process.env.TOKEN_SECRET, { expiresIn: 86400 })\n  res.json({ token })\n}\nexport const changePassword = async (req, res) => {\n  const { email, password, newPassword, newPasswordConfirmation } = req.body\n  if (!email) return res.json({ message: 'No se proporcionÃ³ correo' })\n  const existingUser = await User.findOne({ email })\n  if (!existingUser) return res.status(400).json({ message: 'Ese correo electrÃ³nico no estÃ¡ registrado' })\n  const matchedPassword = await User.verifyPassword(password, existingUser.password)\n  if (!matchedPassword) return res.status(401).json({ message: 'La contraseÃ±a actual es erronea' })\n  if (newPassword !== newPasswordConfirmation) return res.status(401).json({ message: 'Nueva contraseÃ±a y confirmacion de nueva contraseÃ±a no coinciden' })\n  existingUser.password = await User.encryptPassword(newPassword)\n  const userUpdated = await User.findOneAndUpdate({ _id: existingUser._id }, existingUser, { new: true })\n  res.json({ userUpdated })\n}\nexport const forgotPassword = (req, res) => {\n  const { email } = req.body\n  res.json({ message: `Sending email to ${email}` })\n}\n"]}},"mtime":1647678545781},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.3.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst roleSchema = new _mongoose.Schema({\n  name: String\n}, {\n  versionKey: false\n});\n\nvar _default = (0, _mongoose.model)('Role', roleSchema);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvbGVzLmpzIl0sIm5hbWVzIjpbInJvbGVTY2hlbWEiLCJTY2hlbWEiLCJuYW1lIiwiU3RyaW5nIiwidmVyc2lvbktleSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0FBQzVCQyxFQUFBQSxJQUFJLEVBQUVDO0FBRHNCLENBQVgsRUFFaEI7QUFDREMsRUFBQUEsVUFBVSxFQUFFO0FBRFgsQ0FGZ0IsQ0FBbkI7O2VBS2UscUJBQU0sTUFBTixFQUFjSixVQUFkLEMiLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjL21vZGVscy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2hlbWEsIG1vZGVsIH0gZnJvbSAnbW9uZ29vc2UnXG5jb25zdCByb2xlU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIG5hbWU6IFN0cmluZ1xufSwge1xuICB2ZXJzaW9uS2V5OiBmYWxzZVxufSlcbmV4cG9ydCBkZWZhdWx0IG1vZGVsKCdSb2xlJywgcm9sZVNjaGVtYSlcbiJdfQ==","map":{"version":3,"sources":["roles.js"],"names":["roleSchema","Schema","name","String","versionKey"],"mappings":";;;;;;;AAAA;;AACA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,IAAI,EAAEC;AADsB,CAAX,EAEhB;AACDC,EAAAA,UAAU,EAAE;AADX,CAFgB,CAAnB;;eAKe,qBAAM,MAAN,EAAcJ,UAAd,C","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/","sourcesContent":["import { Schema, model } from 'mongoose'\nconst roleSchema = new Schema({\n  name: String\n}, {\n  versionKey: false\n})\nexport default model('Role', roleSchema)\n"]}},"mtime":1647679434368},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nrequire(\"dotenv/config\");\n\nvar _app = _interopRequireDefault(require(\"./app\"));\n\nrequire(\"./database\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import 'regenerator-runtime/runtime'\n// import 'core-js/stable'\nconst PORT = process.env.NODE_PORT;\n\n_app.default.listen(PORT);\n\nconsole.info('Server listen on port', PORT);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlBPUlQiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9QT1JUIiwiYXBwIiwibGlzdGVuIiwiY29uc29sZSIsImluZm8iXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsU0FBekI7O0FBQ0FDLGFBQUlDLE1BQUosQ0FBV0wsSUFBWDs7QUFDQU0sT0FBTyxDQUFDQyxJQUFSLENBQWEsdUJBQWIsRUFBc0NQLElBQXRDIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ2RvdGVudi9jb25maWcnXG5pbXBvcnQgYXBwIGZyb20gJy4vYXBwJ1xuaW1wb3J0ICcuL2RhdGFiYXNlJ1xuLy8gaW1wb3J0ICdyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUnXG4vLyBpbXBvcnQgJ2NvcmUtanMvc3RhYmxlJ1xuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52Lk5PREVfUE9SVFxuYXBwLmxpc3RlbihQT1JUKVxuY29uc29sZS5pbmZvKCdTZXJ2ZXIgbGlzdGVuIG9uIHBvcnQnLCBQT1JUKVxuIl19","map":{"version":3,"sources":["index.js"],"names":["PORT","process","env","NODE_PORT","app","listen","console","info"],"mappings":";;AAAA;;AACA;;AACA;;;;AACA;AACA;AACA,MAAMA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,SAAzB;;AACAC,aAAIC,MAAJ,CAAWL,IAAX;;AACAM,OAAO,CAACC,IAAR,CAAa,uBAAb,EAAsCP,IAAtC","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import 'dotenv/config'\nimport app from './app'\nimport './database'\n// import 'regenerator-runtime/runtime'\n// import 'core-js/stable'\nconst PORT = process.env.NODE_PORT\napp.listen(PORT)\nconsole.info('Server listen on port', PORT)\n"]}},"mtime":1647679518494},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _package = _interopRequireDefault(require(\"../package.json\"));\n\nvar _places = _interopRequireDefault(require(\"./routes/places\"));\n\nvar _authentication = _interopRequireDefault(require(\"./routes/authentication\"));\n\nvar _users = _interopRequireDefault(require(\"./routes/users\"));\n\nvar _initSetup = require(\"./libs/initSetup\");\n\nvar _config = require(\"./config\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import morgan from 'morgan'\n//  import { randomBytes } from 'crypto'\nconst app = (0, _express.default)();\n(0, _config.createFolder)(['uploads/profile']);\n(0, _initSetup.createRoles)(); //  console.log(randomBytes(64).toString('hex'))\n\napp.set('pkg', _package.default); // app.use(morgan('dev'))\n\napp.use(_express.default.json());\napp.use('/gallery/profile', _express.default.static('./uploads/profile'));\napp.get('/', (req, res) => {\n  const {\n    name,\n    author,\n    description,\n    version\n  } = app.get('pkg');\n  res.json({\n    author,\n    name,\n    description,\n    version\n  });\n});\napp.use('/api/places', _places.default);\napp.use('/api/authentication', _authentication.default);\napp.use('/api/users', _users.default);\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJzZXQiLCJwa2ciLCJ1c2UiLCJleHByZXNzIiwianNvbiIsInN0YXRpYyIsImdldCIsInJlcSIsInJlcyIsIm5hbWUiLCJhdXRob3IiLCJkZXNjcmlwdGlvbiIsInZlcnNpb24iLCJwbGFjZXNSb3V0ZXMiLCJhdXRoZW50aWNhdGlvblJvdXRlcyIsInVzZXJzUm91dGVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFOQTtBQU9BO0FBQ0EsTUFBTUEsR0FBRyxHQUFHLHVCQUFaO0FBQ0EsMEJBQWEsQ0FBQyxpQkFBRCxDQUFiO0FBQ0EsOEIsQ0FDQTs7QUFDQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsS0FBUixFQUFlQyxnQkFBZixFLENBQ0E7O0FBQ0FGLEdBQUcsQ0FBQ0csR0FBSixDQUFRQyxpQkFBUUMsSUFBUixFQUFSO0FBQ0FMLEdBQUcsQ0FBQ0csR0FBSixDQUFRLGtCQUFSLEVBQTRCQyxpQkFBUUUsTUFBUixDQUFlLG1CQUFmLENBQTVCO0FBQ0FOLEdBQUcsQ0FBQ08sR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QixRQUFNO0FBQUVDLElBQUFBLElBQUY7QUFBUUMsSUFBQUEsTUFBUjtBQUFnQkMsSUFBQUEsV0FBaEI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXlDYixHQUFHLENBQUNPLEdBQUosQ0FBUSxLQUFSLENBQS9DO0FBQ0FFLEVBQUFBLEdBQUcsQ0FBQ0osSUFBSixDQUFTO0FBQUVNLElBQUFBLE1BQUY7QUFBVUQsSUFBQUEsSUFBVjtBQUFnQkUsSUFBQUEsV0FBaEI7QUFBNkJDLElBQUFBO0FBQTdCLEdBQVQ7QUFDRCxDQUhEO0FBSUFiLEdBQUcsQ0FBQ0csR0FBSixDQUFRLGFBQVIsRUFBdUJXLGVBQXZCO0FBQ0FkLEdBQUcsQ0FBQ0csR0FBSixDQUFRLHFCQUFSLEVBQStCWSx1QkFBL0I7QUFDQWYsR0FBRyxDQUFDRyxHQUFKLENBQVEsWUFBUixFQUFzQmEsY0FBdEI7ZUFDZWhCLEciLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG4vLyBpbXBvcnQgbW9yZ2FuIGZyb20gJ21vcmdhbidcbmltcG9ydCBwa2cgZnJvbSAnLi4vcGFja2FnZS5qc29uJ1xuaW1wb3J0IHBsYWNlc1JvdXRlcyBmcm9tICcuL3JvdXRlcy9wbGFjZXMnXG5pbXBvcnQgYXV0aGVudGljYXRpb25Sb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvYXV0aGVudGljYXRpb24nXG5pbXBvcnQgdXNlcnNSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvdXNlcnMnXG5pbXBvcnQgeyBjcmVhdGVSb2xlcyB9IGZyb20gJy4vbGlicy9pbml0U2V0dXAnXG5pbXBvcnQgeyBjcmVhdGVGb2xkZXIgfSBmcm9tICcuL2NvbmZpZydcbi8vICBpbXBvcnQgeyByYW5kb21CeXRlcyB9IGZyb20gJ2NyeXB0bydcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKVxuY3JlYXRlRm9sZGVyKFsndXBsb2Fkcy9wcm9maWxlJ10pXG5jcmVhdGVSb2xlcygpXG4vLyAgY29uc29sZS5sb2cocmFuZG9tQnl0ZXMoNjQpLnRvU3RyaW5nKCdoZXgnKSlcbmFwcC5zZXQoJ3BrZycsIHBrZylcbi8vIGFwcC51c2UobW9yZ2FuKCdkZXYnKSlcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpXG5hcHAudXNlKCcvZ2FsbGVyeS9wcm9maWxlJywgZXhwcmVzcy5zdGF0aWMoJy4vdXBsb2Fkcy9wcm9maWxlJykpXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgYXV0aG9yLCBkZXNjcmlwdGlvbiwgdmVyc2lvbiB9ID0gYXBwLmdldCgncGtnJylcbiAgcmVzLmpzb24oeyBhdXRob3IsIG5hbWUsIGRlc2NyaXB0aW9uLCB2ZXJzaW9uIH0pXG59KVxuYXBwLnVzZSgnL2FwaS9wbGFjZXMnLCBwbGFjZXNSb3V0ZXMpXG5hcHAudXNlKCcvYXBpL2F1dGhlbnRpY2F0aW9uJywgYXV0aGVudGljYXRpb25Sb3V0ZXMpXG5hcHAudXNlKCcvYXBpL3VzZXJzJywgdXNlcnNSb3V0ZXMpXG5leHBvcnQgZGVmYXVsdCBhcHBcbiJdfQ==","map":{"version":3,"sources":["app.js"],"names":["app","set","pkg","use","express","json","static","get","req","res","name","author","description","version","placesRoutes","authenticationRoutes","usersRoutes"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AANA;AAOA;AACA,MAAMA,GAAG,GAAG,uBAAZ;AACA,0BAAa,CAAC,iBAAD,CAAb;AACA,8B,CACA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,KAAR,EAAeC,gBAAf,E,CACA;;AACAF,GAAG,CAACG,GAAJ,CAAQC,iBAAQC,IAAR,EAAR;AACAL,GAAG,CAACG,GAAJ,CAAQ,kBAAR,EAA4BC,iBAAQE,MAAR,CAAe,mBAAf,CAA5B;AACAN,GAAG,CAACO,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA,WAAhB;AAA6BC,IAAAA;AAA7B,MAAyCb,GAAG,CAACO,GAAJ,CAAQ,KAAR,CAA/C;AACAE,EAAAA,GAAG,CAACJ,IAAJ,CAAS;AAAEM,IAAAA,MAAF;AAAUD,IAAAA,IAAV;AAAgBE,IAAAA,WAAhB;AAA6BC,IAAAA;AAA7B,GAAT;AACD,CAHD;AAIAb,GAAG,CAACG,GAAJ,CAAQ,aAAR,EAAuBW,eAAvB;AACAd,GAAG,CAACG,GAAJ,CAAQ,qBAAR,EAA+BY,uBAA/B;AACAf,GAAG,CAACG,GAAJ,CAAQ,YAAR,EAAsBa,cAAtB;eACehB,G","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import express from 'express'\n// import morgan from 'morgan'\nimport pkg from '../package.json'\nimport placesRoutes from './routes/places'\nimport authenticationRoutes from './routes/authentication'\nimport usersRoutes from './routes/users'\nimport { createRoles } from './libs/initSetup'\nimport { createFolder } from './config'\n//  import { randomBytes } from 'crypto'\nconst app = express()\ncreateFolder(['uploads/profile'])\ncreateRoles()\n//  console.log(randomBytes(64).toString('hex'))\napp.set('pkg', pkg)\n// app.use(morgan('dev'))\napp.use(express.json())\napp.use('/gallery/profile', express.static('./uploads/profile'))\napp.get('/', (req, res) => {\n  const { name, author, description, version } = app.get('pkg')\n  res.json({ author, name, description, version })\n})\napp.use('/api/places', placesRoutes)\napp.use('/api/authentication', authenticationRoutes)\napp.use('/api/users', usersRoutes)\nexport default app\n"]}},"mtime":1647679548586},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/places.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar placesController = _interopRequireWildcard(require(\"../controllers/places\"));\n\nvar authorization = _interopRequireWildcard(require(\"../middlewares/authorization\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.get('/', placesController.getPlaces);\nrouter.get('/similar/:placeId', [authorization.tokenVerification], placesController.similarPlaces);\nrouter.get('/recommendations/:placeId', [authorization.tokenVerification], placesController.recommendedPlaces);\nrouter.get('/likes', [authorization.tokenVerification], placesController.getLikes);\nrouter.get('/:placeId', placesController.getPlace);\nrouter.post('/', [authorization.tokenVerification, authorization.isModerator], placesController.createPlace);\nrouter.post('/like/:placeId', [authorization.tokenVerification], placesController.likeAPlace);\nrouter.put('/:placeId', [authorization.tokenVerification, authorization.isSeller], placesController.putPlace);\nrouter.delete('/:placeId', [authorization.tokenVerification, authorization.isAdmin]);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlcy5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJnZXQiLCJwbGFjZXNDb250cm9sbGVyIiwiZ2V0UGxhY2VzIiwiYXV0aG9yaXphdGlvbiIsInRva2VuVmVyaWZpY2F0aW9uIiwic2ltaWxhclBsYWNlcyIsInJlY29tbWVuZGVkUGxhY2VzIiwiZ2V0TGlrZXMiLCJnZXRQbGFjZSIsInBvc3QiLCJpc01vZGVyYXRvciIsImNyZWF0ZVBsYWNlIiwibGlrZUFQbGFjZSIsInB1dCIsImlzU2VsbGVyIiwicHV0UGxhY2UiLCJkZWxldGUiLCJpc0FkbWluIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUNBLE1BQU1BLE1BQU0sR0FBRyxzQkFBZjtBQUNBQSxNQUFNLENBQUNDLEdBQVAsQ0FBVyxHQUFYLEVBQWdCQyxnQkFBZ0IsQ0FBQ0MsU0FBakM7QUFDQUgsTUFBTSxDQUFDQyxHQUFQLENBQVcsbUJBQVgsRUFBZ0MsQ0FBQ0csYUFBYSxDQUFDQyxpQkFBZixDQUFoQyxFQUFtRUgsZ0JBQWdCLENBQUNJLGFBQXBGO0FBQ0FOLE1BQU0sQ0FBQ0MsR0FBUCxDQUFXLDJCQUFYLEVBQXdDLENBQUNHLGFBQWEsQ0FBQ0MsaUJBQWYsQ0FBeEMsRUFBMkVILGdCQUFnQixDQUFDSyxpQkFBNUY7QUFDQVAsTUFBTSxDQUFDQyxHQUFQLENBQVcsUUFBWCxFQUFxQixDQUFDRyxhQUFhLENBQUNDLGlCQUFmLENBQXJCLEVBQXdESCxnQkFBZ0IsQ0FBQ00sUUFBekU7QUFDQVIsTUFBTSxDQUFDQyxHQUFQLENBQVcsV0FBWCxFQUF3QkMsZ0JBQWdCLENBQUNPLFFBQXpDO0FBQ0FULE1BQU0sQ0FBQ1UsSUFBUCxDQUFZLEdBQVosRUFBaUIsQ0FBQ04sYUFBYSxDQUFDQyxpQkFBZixFQUFrQ0QsYUFBYSxDQUFDTyxXQUFoRCxDQUFqQixFQUErRVQsZ0JBQWdCLENBQUNVLFdBQWhHO0FBQ0FaLE1BQU0sQ0FBQ1UsSUFBUCxDQUFZLGdCQUFaLEVBQThCLENBQUNOLGFBQWEsQ0FBQ0MsaUJBQWYsQ0FBOUIsRUFBaUVILGdCQUFnQixDQUFDVyxVQUFsRjtBQUNBYixNQUFNLENBQUNjLEdBQVAsQ0FBVyxXQUFYLEVBQXdCLENBQUNWLGFBQWEsQ0FBQ0MsaUJBQWYsRUFBa0NELGFBQWEsQ0FBQ1csUUFBaEQsQ0FBeEIsRUFBbUZiLGdCQUFnQixDQUFDYyxRQUFwRztBQUNBaEIsTUFBTSxDQUFDaUIsTUFBUCxDQUFjLFdBQWQsRUFBMkIsQ0FBQ2IsYUFBYSxDQUFDQyxpQkFBZixFQUFrQ0QsYUFBYSxDQUFDYyxPQUFoRCxDQUEzQjtlQUVlbEIsTSIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgKiBhcyBwbGFjZXNDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL3BsYWNlcydcbmltcG9ydCAqIGFzIGF1dGhvcml6YXRpb24gZnJvbSAnLi4vbWlkZGxld2FyZXMvYXV0aG9yaXphdGlvbidcbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpXG5yb3V0ZXIuZ2V0KCcvJywgcGxhY2VzQ29udHJvbGxlci5nZXRQbGFjZXMpXG5yb3V0ZXIuZ2V0KCcvc2ltaWxhci86cGxhY2VJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5zaW1pbGFyUGxhY2VzKVxucm91dGVyLmdldCgnL3JlY29tbWVuZGF0aW9ucy86cGxhY2VJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5yZWNvbW1lbmRlZFBsYWNlcylcbnJvdXRlci5nZXQoJy9saWtlcycsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5nZXRMaWtlcylcbnJvdXRlci5nZXQoJy86cGxhY2VJZCcsIHBsYWNlc0NvbnRyb2xsZXIuZ2V0UGxhY2UpXG5yb3V0ZXIucG9zdCgnLycsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uLCBhdXRob3JpemF0aW9uLmlzTW9kZXJhdG9yXSwgcGxhY2VzQ29udHJvbGxlci5jcmVhdGVQbGFjZSlcbnJvdXRlci5wb3N0KCcvbGlrZS86cGxhY2VJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uXSwgcGxhY2VzQ29udHJvbGxlci5saWtlQVBsYWNlKVxucm91dGVyLnB1dCgnLzpwbGFjZUlkJywgW2F1dGhvcml6YXRpb24udG9rZW5WZXJpZmljYXRpb24sIGF1dGhvcml6YXRpb24uaXNTZWxsZXJdLCBwbGFjZXNDb250cm9sbGVyLnB1dFBsYWNlKVxucm91dGVyLmRlbGV0ZSgnLzpwbGFjZUlkJywgW2F1dGhvcml6YXRpb24udG9rZW5WZXJpZmljYXRpb24sIGF1dGhvcml6YXRpb24uaXNBZG1pbl0pXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlclxuIl19","map":{"version":3,"sources":["places.js"],"names":["router","get","placesController","getPlaces","authorization","tokenVerification","similarPlaces","recommendedPlaces","getLikes","getPlace","post","isModerator","createPlace","likeAPlace","put","isSeller","putPlace","delete","isAdmin"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AACA,MAAMA,MAAM,GAAG,sBAAf;AACAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgBC,gBAAgB,CAACC,SAAjC;AACAH,MAAM,CAACC,GAAP,CAAW,mBAAX,EAAgC,CAACG,aAAa,CAACC,iBAAf,CAAhC,EAAmEH,gBAAgB,CAACI,aAApF;AACAN,MAAM,CAACC,GAAP,CAAW,2BAAX,EAAwC,CAACG,aAAa,CAACC,iBAAf,CAAxC,EAA2EH,gBAAgB,CAACK,iBAA5F;AACAP,MAAM,CAACC,GAAP,CAAW,QAAX,EAAqB,CAACG,aAAa,CAACC,iBAAf,CAArB,EAAwDH,gBAAgB,CAACM,QAAzE;AACAR,MAAM,CAACC,GAAP,CAAW,WAAX,EAAwBC,gBAAgB,CAACO,QAAzC;AACAT,MAAM,CAACU,IAAP,CAAY,GAAZ,EAAiB,CAACN,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACO,WAAhD,CAAjB,EAA+ET,gBAAgB,CAACU,WAAhG;AACAZ,MAAM,CAACU,IAAP,CAAY,gBAAZ,EAA8B,CAACN,aAAa,CAACC,iBAAf,CAA9B,EAAiEH,gBAAgB,CAACW,UAAlF;AACAb,MAAM,CAACc,GAAP,CAAW,WAAX,EAAwB,CAACV,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACW,QAAhD,CAAxB,EAAmFb,gBAAgB,CAACc,QAApG;AACAhB,MAAM,CAACiB,MAAP,CAAc,WAAd,EAA2B,CAACb,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACc,OAAhD,CAA3B;eAEelB,M","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/","sourcesContent":["import { Router } from 'express'\nimport * as placesController from '../controllers/places'\nimport * as authorization from '../middlewares/authorization'\nconst router = Router()\nrouter.get('/', placesController.getPlaces)\nrouter.get('/similar/:placeId', [authorization.tokenVerification], placesController.similarPlaces)\nrouter.get('/recommendations/:placeId', [authorization.tokenVerification], placesController.recommendedPlaces)\nrouter.get('/likes', [authorization.tokenVerification], placesController.getLikes)\nrouter.get('/:placeId', placesController.getPlace)\nrouter.post('/', [authorization.tokenVerification, authorization.isModerator], placesController.createPlace)\nrouter.post('/like/:placeId', [authorization.tokenVerification], placesController.likeAPlace)\nrouter.put('/:placeId', [authorization.tokenVerification, authorization.isSeller], placesController.putPlace)\nrouter.delete('/:placeId', [authorization.tokenVerification, authorization.isAdmin])\n\nexport default router\n"]}},"mtime":1647674649016},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/places.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.similarPlaces = exports.removePlace = exports.recommendedPlaces = exports.putPlace = exports.likeAPlace = exports.getPlaces = exports.getPlace = exports.getLikes = exports.createPlace = void 0;\n\nvar _places = _interopRequireDefault(require(\"../models/places\"));\n\nvar _validations = require(\"../libs/validations\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getPlaces = async (req, res) => {\n  // obtener distancia, ubicacion, y filtros de la busqueda\n  // validar datos de entrada\n  // buscar en la base de datos los sitios cercanos\n  // contar el resultado\n  const {\n    distance = 300,\n    coordinates = [13.482903, -88.175427]\n  } = req.body;\n\n  if (typeof distance !== 'number') {\n    return res.json({\n      message: 'Dato de la distancia erroneo'\n    });\n  }\n\n  if (typeof coordinates !== 'object' || coordinates.length < 2) {\n    return res.json({\n      message: 'No ha proporcionado ubicaciÃ³n'\n    });\n  }\n\n  const {\n    filters = {\n      delivery: null,\n      service: null\n    }\n  } = req.body;\n  const places = await _places.default.find({\n    location: {\n      $nearSphere: {\n        $geometry: {\n          type: 'Point',\n          coordinates: coordinates\n        },\n        $maxDistance: distance\n      }\n    }\n  });\n  const isFiltered = Object.values(filters).some(filterValue => filterValue !== null);\n  console.log(isFiltered); // const arrayFilters = Object.entries(filters)\n  // arrayFilters.forEach((filter) => {\n  //     if (filter[1]) {\n  //         console.log(filter[1])\n  //         places.where(filter[0], filter[1])\n  //     }\n  // })\n\n  res.json({\n    result: places,\n    count: places.length\n  });\n};\n\nexports.getPlaces = getPlaces;\n\nconst createPlace = async (req, res) => {\n  // obtener informacion de las propiedades del sitio\n  // guarda en la base de datos el sitio\n  const preparedPlace = new _places.default(req.body);\n  const savedPlace = await preparedPlace.save();\n  res.status(201).json(savedPlace);\n};\n\nexports.createPlace = createPlace;\n\nconst putPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener objeto con nuevas valores del sitio\n  // actualizar el sitio con ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const updatedPlace = await _places.default.replaceOne({\n    _id: placeId\n  }, req.body);\n\n  if (updatedPlace.n === 0) {\n    return res.json({\n      message: 'No existe ese lugar'\n    });\n  }\n\n  if (updatedPlace.nModified === 0) {\n    return res.json({\n      message: 'No se pudo editar el lugar'\n    });\n  }\n\n  res.json(updatedPlace);\n};\n\nexports.putPlace = putPlace;\n\nconst removePlace = async (req, res) => {\n  // obtener ID del sitio\n  // eliminar un sitio con ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const placeDeleted = await _places.default.findOneAndDelete({\n    _id: placeId\n  }); //  const placeDeleted = await Place.findByIdAndRemove(placeId)\n\n  if (!placeDeleted) {\n    return res.json({\n      message: 'No existe ese lugar'\n    });\n  }\n\n  res.json(placeDeleted);\n};\n\nexports.removePlace = removePlace;\n\nconst getPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener informacion del sitio con el ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const placeFound = await _places.default.findOne({\n    _id: placeId\n  });\n\n  if (!placeFound) {\n    return res.json({\n      message: 'No existe ese lugar'\n    });\n  }\n\n  res.json(placeFound);\n};\n\nexports.getPlace = getPlace;\n\nconst recommendedPlaces = (req, res) => {\n  // buscar los cercanos con las categorias mas buscadas del usuario\n  // obtener categorias mas buscadas\n  // filtrar por los mejores valorados\n  const {\n    placeId\n  } = req.params;\n  console.log(`Id Place is ${placeId}`);\n  console.log(req.body);\n  res.json({\n    message: 'Get Recommended Places'\n  });\n};\n\nexports.recommendedPlaces = recommendedPlaces;\n\nconst similarPlaces = async (req, res) => {\n  // obtener ID del sitio\n  // obtener categorias del sitio\n  // buscar sitios con las categorias del ID\n  const {\n    placeId\n  } = req.params;\n\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    });\n  }\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  const placeFound = await _places.default.findOne({\n    _id: placeId\n  }, {\n    gallery: 0,\n    contact: 0,\n    description: 0,\n    ubication: 0,\n    rating: 0,\n    schedule: 0,\n    name: 0\n  });\n  searchByCategories(placeFound.category);\n  res.json({\n    message: 'Get Similar in 500mts Places'\n  });\n};\n\nexports.similarPlaces = similarPlaces;\n\nconst getLikes = async (req, res) => {\n  // obtener el ID del usuario\n  // obtener todos los sitios que el usuario ha likeado\n  const {\n    userId\n  } = req;\n  console.log(userId);\n  const likedPlaces = await _places.default.find({\n    rating: {\n      $elemMatch: {\n        user: userId\n      }\n    }\n  }); //  console.log('Get Liked Places')\n\n  res.json(likedPlaces);\n};\n\nexports.getLikes = getLikes;\n\nconst likeAPlace = async (req, res) => {\n  // obtener ID del sitio y el usuario\n  // obtener el valor del Rating\n  // obtener sitio del ID\n  // modificar el arreglo con los likes del sitio\n  const {\n    rating\n  } = req.body;\n  const {\n    userId\n  } = req;\n  const {\n    placeId\n  } = req.params;\n\n  if (!(0, _validations.isValidObjectId)(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    });\n  }\n\n  if (rating > 5 || rating < 0 || !rating || isNaN(rating)) {\n    return res.json({\n      message: 'Calificacion no valida'\n    });\n  }\n\n  const place = await _places.default.findOne({\n    _id: placeId\n  });\n  const found = place.rating.findIndex(rate => rate.user.toString() === userId);\n\n  if (found > -1) {\n    place.rating[found].rate = rating;\n  } else {\n    place.rating.push({\n      user: userId,\n      rate: rating\n    });\n  }\n\n  const ratingSaved = await place.save();\n  res.json(ratingSaved);\n};\n\nexports.likeAPlace = likeAPlace;\n\nconst searchByCategories = categories => {\n  for (const category of categories) {\n    console.log(category);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlcy5qcyJdLCJuYW1lcyI6WyJnZXRQbGFjZXMiLCJyZXEiLCJyZXMiLCJkaXN0YW5jZSIsImNvb3JkaW5hdGVzIiwiYm9keSIsImpzb24iLCJtZXNzYWdlIiwibGVuZ3RoIiwiZmlsdGVycyIsImRlbGl2ZXJ5Iiwic2VydmljZSIsInBsYWNlcyIsIlBsYWNlIiwiZmluZCIsImxvY2F0aW9uIiwiJG5lYXJTcGhlcmUiLCIkZ2VvbWV0cnkiLCJ0eXBlIiwiJG1heERpc3RhbmNlIiwiaXNGaWx0ZXJlZCIsIk9iamVjdCIsInZhbHVlcyIsInNvbWUiLCJmaWx0ZXJWYWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJjb3VudCIsImNyZWF0ZVBsYWNlIiwicHJlcGFyZWRQbGFjZSIsInNhdmVkUGxhY2UiLCJzYXZlIiwic3RhdHVzIiwicHV0UGxhY2UiLCJwbGFjZUlkIiwicGFyYW1zIiwidXBkYXRlZFBsYWNlIiwicmVwbGFjZU9uZSIsIl9pZCIsIm4iLCJuTW9kaWZpZWQiLCJyZW1vdmVQbGFjZSIsInBsYWNlRGVsZXRlZCIsImZpbmRPbmVBbmREZWxldGUiLCJnZXRQbGFjZSIsInBsYWNlRm91bmQiLCJmaW5kT25lIiwicmVjb21tZW5kZWRQbGFjZXMiLCJzaW1pbGFyUGxhY2VzIiwiZ2FsbGVyeSIsImNvbnRhY3QiLCJkZXNjcmlwdGlvbiIsInViaWNhdGlvbiIsInJhdGluZyIsInNjaGVkdWxlIiwibmFtZSIsInNlYXJjaEJ5Q2F0ZWdvcmllcyIsImNhdGVnb3J5IiwiZ2V0TGlrZXMiLCJ1c2VySWQiLCJsaWtlZFBsYWNlcyIsIiRlbGVtTWF0Y2giLCJ1c2VyIiwibGlrZUFQbGFjZSIsImlzTmFOIiwicGxhY2UiLCJmb3VuZCIsImZpbmRJbmRleCIsInJhdGUiLCJ0b1N0cmluZyIsInB1c2giLCJyYXRpbmdTYXZlZCIsImNhdGVnb3JpZXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUNPLE1BQU1BLFNBQVMsR0FBRyxP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LEtBQUssR0FBRyxDQUFDLENBQWIsRUFBZ0I7QUFDZEQsSUFBQUEsS0FBSyxDQUFDWixNQUFOLENBQWFhLEtBQWIsRUFBb0JFLElBQXBCLEdBQTJCZixNQUEzQjtBQUNELEdBRkQsTUFFTztBQUNMWSxJQUFBQSxLQUFLLENBQUNaLE1BQU4sQ0FBYWlCLElBQWIsQ0FBa0I7QUFDaEJSLE1BQUFBLElBQUksRUFBRUgsTUFEVTtBQUVoQlMsTUFBQUEsSUFBSSxFQUFFZjtBQUZVLEtBQWxCO0FBSUQ7O0FBQ0QsUUFBTWtCLFdBQVcsR0FBRyxNQUFNTixLQUFLLENBQUNsQyxJQUFOLEVBQTFCO0FBQ0E5QixFQUFBQSxHQUFHLENBQUNJLElBQUosQ0FBU2tFLFdBQVQ7QUFDRCxDQWhDTTs7OztBQWlDUCxNQUFNZixrQkFBa0IsR0FBSWdCLFVBQUQsSUFBZ0I7QUFDekMsT0FBSyxNQUFNZixRQUFYLElBQXVCZSxVQUF2QixFQUFtQztBQUNqQ2hELElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZZ0MsUUFBWjtBQUNEO0FBQ0YsQ0FKRCIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBsYWNlIGZyb20gJy4uL21vZGVscy9wbGFjZXMnXG5pbXBvcnQgeyBpc1ZhbGlkT2JqZWN0SWQgfSBmcm9tICcuLi9saWJzL3ZhbGlkYXRpb25zJ1xuZXhwb3J0IGNvbnN0IGdldFBsYWNlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIGRpc3RhbmNpYSwgdWJpY2FjaW9uLCB5IGZpbHRyb3MgZGUgbGEgYnVzcXVlZGFcbiAgLy8gdmFsaWRhciBkYXRvcyBkZSBlbnRyYWRhXG4gIC8vIGJ1c2NhciBlbiBsYSBiYXNlIGRlIGRhdG9zIGxvcyBzaXRpb3MgY2VyY2Fub3NcbiAgLy8gY29udGFyIGVsIHJlc3VsdGFkb1xuICBjb25zdCB7IGRpc3RhbmNlID0gMzAwLCBjb29yZGluYXRlcyA9IFsxMy40ODI5MDMsIC04OC4xNzU0MjddIH0gPSByZXEuYm9keVxuICBpZiAodHlwZW9mIChkaXN0YW5jZSkgIT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdEYXRvIGRlIGxhIGRpc3RhbmNpYSBlcnJvbmVvJ1xuICAgIH0pXG4gIH1cbiAgaWYgKHR5cGVvZiAoY29vcmRpbmF0ZXMpICE9PSAnb2JqZWN0JyB8fCBjb29yZGluYXRlcy5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHsgbWVzc2FnZTogJ05vIGhhIHByb3BvcmNpb25hZG8gdWJpY2FjacOzbicgfSlcbiAgfVxuICBjb25zdCB7IGZpbHRlcnMgPSB7IGRlbGl2ZXJ5OiBudWxsLCBzZXJ2aWNlOiBudWxsIH0gfSA9IHJlcS5ib2R5XG4gIGNvbnN0IHBsYWNlcyA9IGF3YWl0IFBsYWNlLmZpbmQoe1xuICAgIGxvY2F0aW9uOiB7XG4gICAgICAkbmVhclNwaGVyZToge1xuICAgICAgICAkZ2VvbWV0cnk6IHtcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgICAgICB9LFxuICAgICAgICAkbWF4RGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgICB9XG4gICAgfVxuICB9KVxuICBjb25zdCBpc0ZpbHRlcmVkID0gT2JqZWN0LnZhbHVlcyhmaWx0ZXJzKS5zb21lKChmaWx0ZXJWYWx1ZSkgPT4gZmlsdGVyVmFsdWUgIT09IG51bGwpXG4gIGNvbnNvbGUubG9nKGlzRmlsdGVyZWQpXG4gIC8vIGNvbnN0IGFycmF5RmlsdGVycyA9IE9iamVjdC5lbnRyaWVzKGZpbHRlcnMpXG4gIC8vIGFycmF5RmlsdGVycy5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgLy8gICAgIGlmIChmaWx0ZXJbMV0pIHtcbiAgLy8gICAgICAgICBjb25zb2xlLmxvZyhmaWx0ZXJbMV0pXG4gIC8vICAgICAgICAgcGxhY2VzLndoZXJlKGZpbHRlclswXSwgZmlsdGVyWzFdKVxuICAvLyAgICAgfVxuICAvLyB9KVxuICByZXMuanNvbih7XG4gICAgcmVzdWx0OiBwbGFjZXMsXG4gICAgY291bnQ6IHBsYWNlcy5sZW5ndGhcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBjcmVhdGVQbGFjZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIGluZm9ybWFjaW9uIGRlIGxhcyBwcm9waWVkYWRlcyBkZWwgc2l0aW9cbiAgLy8gZ3VhcmRhIGVuIGxhIGJhc2UgZGUgZGF0b3MgZWwgc2l0aW9cbiAgY29uc3QgcHJlcGFyZWRQbGFjZSA9IG5ldyBQbGFjZShyZXEuYm9keSlcbiAgY29uc3Qgc2F2ZWRQbGFjZSA9IGF3YWl0IHByZXBhcmVkUGxhY2Uuc2F2ZSgpXG4gIHJlcy5zdGF0dXMoMjAxKS5qc29uKHNhdmVkUGxhY2UpXG59XG5leHBvcnQgY29uc3QgcHV0UGxhY2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgLy8gb2J0ZW5lciBJRCBkZWwgc2l0aW9cbiAgLy8gb2J0ZW5lciBvYmpldG8gY29uIG51ZXZhcyB2YWxvcmVzIGRlbCBzaXRpb1xuICAvLyBhY3R1YWxpemFyIGVsIHNpdGlvIGNvbiBJRFxuICBjb25zdCB7IHBsYWNlSWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCFwbGFjZUlkKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlbCBsdWdhcidcbiAgICB9KVxuICB9XG4gIGlmICghaXNWYWxpZE9iamVjdElkKHBsYWNlSWQpKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdFbCBpZCBkZWwgbHVnYXIgbm8gZXMgdmFsaWRvJ1xuICAgIH0pXG4gIH1cbiAgY29uc3QgdXBkYXRlZFBsYWNlID0gYXdhaXQgUGxhY2UucmVwbGFjZU9uZSh7IF9pZDogcGxhY2VJZCB9LCByZXEuYm9keSlcbiAgaWYgKHVwZGF0ZWRQbGFjZS5uID09PSAwKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBleGlzdGUgZXNlIGx1Z2FyJ1xuICAgIH0pXG4gIH1cbiAgaWYgKHVwZGF0ZWRQbGFjZS5uTW9kaWZpZWQgPT09IDApIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ05vIHNlIHB1ZG8gZWRpdGFyIGVsIGx1Z2FyJ1xuICAgIH0pXG4gIH1cbiAgcmVzLmpzb24odXBkYXRlZFBsYWNlKVxufVxuZXhwb3J0IGNvbnN0IHJlbW92ZVBsYWNlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIG9idGVuZXIgSUQgZGVsIHNpdGlvXG4gIC8vIGVsaW1pbmFyIHVuIHNpdGlvIGNvbiBJRFxuICBjb25zdCB7IHBsYWNlSWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCFwbGFjZUlkKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlbCBsdWdhcidcbiAgICB9KVxuICB9XG4gIGlmICghaXNWYWxpZE9iamVjdElkKHBsYWNlSWQpKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdFbCBpZCBkZWwgbHVnYXIgbm8gZXMgdmFsaWRvJ1xuICAgIH0pXG4gIH1cbiAgY29uc3QgcGxhY2VEZWxldGVkID0gYXdhaXQgUGxhY2UuZmluZE9uZUFuZERlbGV0ZSh7IF9pZDogcGxhY2VJZCB9KVxuICAvLyAgY29uc3QgcGxhY2VEZWxldGVkID0gYXdhaXQgUGxhY2UuZmluZEJ5SWRBbmRSZW1vdmUocGxhY2VJZClcbiAgaWYgKCFwbGFjZURlbGV0ZWQpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ05vIGV4aXN0ZSBlc2UgbHVnYXInXG4gICAgfSlcbiAgfVxuXG4gIHJlcy5qc29uKHBsYWNlRGVsZXRlZClcbn1cbmV4cG9ydCBjb25zdCBnZXRQbGFjZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIElEIGRlbCBzaXRpb1xuICAvLyBvYnRlbmVyIGluZm9ybWFjaW9uIGRlbCBzaXRpbyBjb24gZWwgSURcbiAgY29uc3QgeyBwbGFjZUlkIH0gPSByZXEucGFyYW1zXG4gIGlmICghcGxhY2VJZCkge1xuICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiAnTm8gaGEgcHJvcG9yY2lvbmFkbyBpZCBkZWwgbHVnYXInXG4gICAgfSlcbiAgfVxuXG4gIGlmICghaXNWYWxpZE9iamVjdElkKHBsYWNlSWQpKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdFbCBpZCBkZWwgbHVnYXIgbm8gZXMgdmFsaWRvJ1xuICAgIH0pXG4gIH1cbiAgY29uc3QgcGxhY2VGb3VuZCA9IGF3YWl0IFBsYWNlLmZpbmRPbmUoeyBfaWQ6IHBsYWNlSWQgfSlcbiAgaWYgKCFwbGFjZUZvdW5kKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBleGlzdGUgZXNlIGx1Z2FyJ1xuICAgIH0pXG4gIH1cbiAgcmVzLmpzb24ocGxhY2VGb3VuZClcbn1cbmV4cG9ydCBjb25zdCByZWNvbW1lbmRlZFBsYWNlcyA9IChyZXEsIHJlcykgPT4ge1xuICAvLyBidXNjYXIgbG9zIGNlcmNhbm9zIGNvbiBsYXMgY2F0ZWdvcmlhcyBtYXMgYnVzY2FkYXMgZGVsIHVzdWFyaW9cbiAgLy8gb2J0ZW5lciBjYXRlZ29yaWFzIG1hcyBidXNjYWRhc1xuICAvLyBmaWx0cmFyIHBvciBsb3MgbWVqb3JlcyB2YWxvcmFkb3NcbiAgY29uc3QgeyBwbGFjZUlkIH0gPSByZXEucGFyYW1zXG4gIGNvbnNvbGUubG9nKGBJZCBQbGFjZSBpcyAke3BsYWNlSWR9YClcbiAgY29uc29sZS5sb2cocmVxLmJvZHkpXG4gIHJlcy5qc29uKHtcbiAgICBtZXNzYWdlOiAnR2V0IFJlY29tbWVuZGVkIFBsYWNlcydcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBzaW1pbGFyUGxhY2VzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIG9idGVuZXIgSUQgZGVsIHNpdGlvXG4gIC8vIG9idGVuZXIgY2F0ZWdvcmlhcyBkZWwgc2l0aW9cbiAgLy8gYnVzY2FyIHNpdGlvcyBjb24gbGFzIGNhdGVnb3JpYXMgZGVsIElEXG4gIGNvbnN0IHsgcGxhY2VJZCB9ID0gcmVxLnBhcmFtc1xuICBpZiAoIXBsYWNlSWQpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ05vIGhhIHByb3BvcmNpb25hZG8gaWQgZGVsIGx1Z2FyJ1xuICAgIH0pXG4gIH1cblxuICBpZiAoIWlzVmFsaWRPYmplY3RJZChwbGFjZUlkKSkge1xuICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiAnRWwgaWQgZGVsIGx1Z2FyIG5vIGVzIHZhbGlkbydcbiAgICB9KVxuICB9XG4gIGNvbnN0IHBsYWNlRm91bmQgPSBhd2FpdCBQbGFjZS5maW5kT25lKHtcbiAgICBfaWQ6IHBsYWNlSWRcbiAgfSwge1xuICAgIGdhbGxlcnk6IDAsXG4gICAgY29udGFjdDogMCxcbiAgICBkZXNjcmlwdGlvbjogMCxcbiAgICB1YmljYXRpb246IDAsXG4gICAgcmF0aW5nOiAwLFxuICAgIHNjaGVkdWxlOiAwLFxuICAgIG5hbWU6IDBcbiAgfSlcbiAgc2VhcmNoQnlDYXRlZ29yaWVzKHBsYWNlRm91bmQuY2F0ZWdvcnkpXG4gIHJlcy5qc29uKHtcbiAgICBtZXNzYWdlOiAnR2V0IFNpbWlsYXIgaW4gNTAwbXRzIFBsYWNlcydcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBnZXRMaWtlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBvYnRlbmVyIGVsIElEIGRlbCB1c3VhcmlvXG4gIC8vIG9idGVuZXIgdG9kb3MgbG9zIHNpdGlvcyBxdWUgZWwgdXN1YXJpbyBoYSBsaWtlYWRvXG4gIGNvbnN0IHsgdXNlcklkIH0gPSByZXFcbiAgY29uc29sZS5sb2codXNlcklkKVxuICBjb25zdCBsaWtlZFBsYWNlcyA9IGF3YWl0IFBsYWNlLmZpbmQoe1xuICAgIHJhdGluZzoge1xuICAgICAgJGVsZW1NYXRjaDoge1xuICAgICAgICB1c2VyOiB1c2VySWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIC8vICBjb25zb2xlLmxvZygnR2V0IExpa2VkIFBsYWNlcycpXG4gIHJlcy5qc29uKGxpa2VkUGxhY2VzKVxufVxuZXhwb3J0IGNvbnN0IGxpa2VBUGxhY2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgLy8gb2J0ZW5lciBJRCBkZWwgc2l0aW8geSBlbCB1c3VhcmlvXG4gIC8vIG9idGVuZXIgZWwgdmFsb3IgZGVsIFJhdGluZ1xuICAvLyBvYnRlbmVyIHNpdGlvIGRlbCBJRFxuICAvLyBtb2RpZmljYXIgZWwgYXJyZWdsbyBjb24gbG9zIGxpa2VzIGRlbCBzaXRpb1xuICBjb25zdCB7IHJhdGluZyB9ID0gcmVxLmJvZHlcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcVxuICBjb25zdCB7IHBsYWNlSWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCFpc1ZhbGlkT2JqZWN0SWQocGxhY2VJZCkpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ0VsIGlkIGRlbCBsdWdhciBubyBlcyB2YWxpZG8nXG4gICAgfSlcbiAgfVxuXG4gIGlmICgocmF0aW5nID4gNSB8fCByYXRpbmcgPCAwKSB8fCAhcmF0aW5nIHx8IGlzTmFOKHJhdGluZykpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ0NhbGlmaWNhY2lvbiBubyB2YWxpZGEnXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHBsYWNlID0gYXdhaXQgUGxhY2UuZmluZE9uZSh7IF9pZDogcGxhY2VJZCB9KVxuICBjb25zdCBmb3VuZCA9IHBsYWNlLnJhdGluZy5maW5kSW5kZXgoKHJhdGUpID0+IHJhdGUudXNlci50b1N0cmluZygpID09PSB1c2VySWQpXG4gIGlmIChmb3VuZCA+IC0xKSB7XG4gICAgcGxhY2UucmF0aW5nW2ZvdW5kXS5yYXRlID0gcmF0aW5nXG4gIH0gZWxzZSB7XG4gICAgcGxhY2UucmF0aW5nLnB1c2goe1xuICAgICAgdXNlcjogdXNlcklkLFxuICAgICAgcmF0ZTogcmF0aW5nXG4gICAgfSlcbiAgfVxuICBjb25zdCByYXRpbmdTYXZlZCA9IGF3YWl0IHBsYWNlLnNhdmUoKVxuICByZXMuanNvbihyYXRpbmdTYXZlZClcbn1cbmNvbnN0IHNlYXJjaEJ5Q2F0ZWdvcmllcyA9IChjYXRlZ29yaWVzKSA9PiB7XG4gIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgIGNvbnNvbGUubG9nKGNhdGVnb3J5KVxuICB9XG59XG4iXX0=","map":{"version":3,"sources":["places.js"],"names":["getPlaces","req","res","distance","coordinates","body","json","message","length","filters","delivery","service","places","Place","find","location","$nearSphere","$geometry","type","$maxDistance","isFiltered","Object","values","some","filterValue","console","log","result","count","createPlace","preparedPlace","savedPlace","save","status","putPlace","placeId","params","updatedPlace","replaceOne","_id","n","nModified","removePlace","placeDeleted","findOneAndDelete","getPlace","placeFound","findOne","recommendedPlaces","similarPlaces","gallery","contact","description","ubication","rating","schedule","name","searchByCategories","category","getLikes","userId","likedPlaces","$elemMatch","user","likeAPlace","isNaN","place","found","findIndex","rate","toString","push","ratingSaved","categories"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/","sourcesContent":["import Place from '../models/places'\nimport { isValidObjectId } from '../libs/validations'\nexport const getPlaces = async (req, res) => {\n  // obtener distancia, ubicacion, y filtros de la busqueda\n  // validar datos de entrada\n  // buscar en la base de datos los sitios cercanos\n  // contar el resultado\n  const { distance = 300, coordinates = [13.482903, -88.175427] } = req.body\n  if (typeof (distance) !== 'number') {\n    return res.json({\n      message: 'Dato de la distancia erroneo'\n    })\n  }\n  if (typeof (coordinates) !== 'object' || coordinates.length < 2) {\n    return res.json({ message: 'No ha proporcionado ubicaciÃ³n' })\n  }\n  const { filters = { delivery: null, service: null } } = req.body\n  const places = await Place.find({\n    location: {\n      $nearSphere: {\n        $geometry: {\n          type: 'Point',\n          coordinates: coordinates\n        },\n        $maxDistance: distance\n      }\n    }\n  })\n  const isFiltered = Object.values(filters).some((filterValue) => filterValue !== null)\n  console.log(isFiltered)\n  // const arrayFilters = Object.entries(filters)\n  // arrayFilters.forEach((filter) => {\n  //     if (filter[1]) {\n  //         console.log(filter[1])\n  //         places.where(filter[0], filter[1])\n  //     }\n  // })\n  res.json({\n    result: places,\n    count: places.length\n  })\n}\nexport const createPlace = async (req, res) => {\n  // obtener informacion de las propiedades del sitio\n  // guarda en la base de datos el sitio\n  const preparedPlace = new Place(req.body)\n  const savedPlace = await preparedPlace.save()\n  res.status(201).json(savedPlace)\n}\nexport const putPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener objeto con nuevas valores del sitio\n  // actualizar el sitio con ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const updatedPlace = await Place.replaceOne({ _id: placeId }, req.body)\n  if (updatedPlace.n === 0) {\n    return res.json({\n      message: 'No existe ese lugar'\n    })\n  }\n  if (updatedPlace.nModified === 0) {\n    return res.json({\n      message: 'No se pudo editar el lugar'\n    })\n  }\n  res.json(updatedPlace)\n}\nexport const removePlace = async (req, res) => {\n  // obtener ID del sitio\n  // eliminar un sitio con ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const placeDeleted = await Place.findOneAndDelete({ _id: placeId })\n  //  const placeDeleted = await Place.findByIdAndRemove(placeId)\n  if (!placeDeleted) {\n    return res.json({\n      message: 'No existe ese lugar'\n    })\n  }\n\n  res.json(placeDeleted)\n}\nexport const getPlace = async (req, res) => {\n  // obtener ID del sitio\n  // obtener informacion del sitio con el ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const placeFound = await Place.findOne({ _id: placeId })\n  if (!placeFound) {\n    return res.json({\n      message: 'No existe ese lugar'\n    })\n  }\n  res.json(placeFound)\n}\nexport const recommendedPlaces = (req, res) => {\n  // buscar los cercanos con las categorias mas buscadas del usuario\n  // obtener categorias mas buscadas\n  // filtrar por los mejores valorados\n  const { placeId } = req.params\n  console.log(`Id Place is ${placeId}`)\n  console.log(req.body)\n  res.json({\n    message: 'Get Recommended Places'\n  })\n}\nexport const similarPlaces = async (req, res) => {\n  // obtener ID del sitio\n  // obtener categorias del sitio\n  // buscar sitios con las categorias del ID\n  const { placeId } = req.params\n  if (!placeId) {\n    return res.json({\n      message: 'No ha proporcionado id del lugar'\n    })\n  }\n\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n  const placeFound = await Place.findOne({\n    _id: placeId\n  }, {\n    gallery: 0,\n    contact: 0,\n    description: 0,\n    ubication: 0,\n    rating: 0,\n    schedule: 0,\n    name: 0\n  })\n  searchByCategories(placeFound.category)\n  res.json({\n    message: 'Get Similar in 500mts Places'\n  })\n}\nexport const getLikes = async (req, res) => {\n  // obtener el ID del usuario\n  // obtener todos los sitios que el usuario ha likeado\n  const { userId } = req\n  console.log(userId)\n  const likedPlaces = await Place.find({\n    rating: {\n      $elemMatch: {\n        user: userId\n      }\n    }\n  })\n  //  console.log('Get Liked Places')\n  res.json(likedPlaces)\n}\nexport const likeAPlace = async (req, res) => {\n  // obtener ID del sitio y el usuario\n  // obtener el valor del Rating\n  // obtener sitio del ID\n  // modificar el arreglo con los likes del sitio\n  const { rating } = req.body\n  const { userId } = req\n  const { placeId } = req.params\n  if (!isValidObjectId(placeId)) {\n    return res.json({\n      message: 'El id del lugar no es valido'\n    })\n  }\n\n  if ((rating > 5 || rating < 0) || !rating || isNaN(rating)) {\n    return res.json({\n      message: 'Calificacion no valida'\n    })\n  }\n\n  const place = await Place.findOne({ _id: placeId })\n  const found = place.rating.findIndex((rate) => rate.user.toString() === userId)\n  if (found > -1) {\n    place.rating[found].rate = rating\n  } else {\n    place.rating.push({\n      user: userId,\n      rate: rating\n    })\n  }\n  const ratingSaved = await place.save()\n  res.json(ratingSaved)\n}\nconst searchByCategories = (categories) => {\n  for (const category of categories) {\n    console.log(category)\n  }\n}\n"]}},"mtime":1647679208771},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/places.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst socialMediaSchema = new _mongoose.Schema({\n  media: {\n    type: String,\n    enum: ['Instagram', 'Facebook', 'Twitter'],\n    required: true\n  },\n  user: {\n    type: String,\n    require: true\n  }\n});\nconst contactSchema = new _mongoose.Schema({\n  socialMedia: [socialMediaSchema],\n  telephone: [String]\n});\nconst locationSchema = new _mongoose.Schema({\n  type: {\n    type: String,\n    enum: ['Point'],\n    required: true\n  },\n  coordinates: {\n    type: [Number],\n    required: true\n  }\n});\nconst ratingScheme = new _mongoose.Schema({\n  user: {\n    ref: 'User',\n    type: _mongoose.Schema.Types.ObjectId\n  },\n  rate: Number\n});\nconst workDays = new _mongoose.Schema({\n  interval: String | [String],\n  from: String,\n  to: String\n}); // const foodSchema = new Schema({\n//     name: {\n//         type: String,\n//         required: true\n//     },\n//     description: {\n//         type: String,\n//         required: true,\n//     },\n//     price: {\n//         type: Number,\n//         required: true\n//     },\n//     photo: {\n//         type: String,\n//         required: true\n//     },\n//     category: {\n//         type: [String],\n//         required: true\n//     }\n// })\n\nconst placeSchema = new _mongoose.Schema({\n  category: {\n    type: [String],\n    required: [true, 'No se proporcionÃ³ categoria']\n  },\n  contact: contactSchema,\n  description: String,\n  gallery: [String],\n  ubication: String,\n  location: locationSchema,\n  name: {\n    type: String,\n    required: [true, 'No se proporcionÃ³ nombre']\n  },\n  rating: [ratingScheme],\n  schedule: [workDays] // menu: [foodSchema]\n\n});\nplaceSchema.index({\n  location: '2dsphere'\n}); // placeModel.createIndexes({ location: '2dsphere' })\n\nvar _default = (0, _mongoose.model)('Place', placeSchema);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlcy5qcyJdLCJuYW1lcyI6WyJzb2NpYWxNZWRpYVNjaGVtYSIsIlNjaGVtYSIsIm1lZGlhIiwidHlwZSIsIlN0cmluZyIsImVudW0iLCJyZXF1aXJlZCIsInVzZXIiLCJyZXF1aXJlIiwiY29udGFjdFNjaGVtYSIsInNvY2lhbE1lZGlhIiwidGVsZXBob25lIiwibG9jYXRpb25TY2hlbWEiLCJjb29yZGluYXRlcyIsIk51bWJlciIsInJhdGluZ1NjaGVtZSIsInJlZiIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyYXRlIiwid29ya0RheXMiLCJpbnRlcnZhbCIsImZyb20iLCJ0byIsInBsYWNlU2NoZW1hIiwiY2F0ZWdvcnkiLCJjb250YWN0IiwiZGVzY3JpcHRpb24iLCJnYWxsZXJ5IiwidWJpY2F0aW9uIiwibG9jYXRpb24iLCJuYW1lIiwicmF0aW5nIiwic2NoZWR1bGUiLCJpbmRleCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBLE1BQU1BLGlCQUFpQixHQUFHLElBQUlDLGdCQUFKLENBQVc7QUFDbkNDLEVBQUFBLEtBQUssRUFBRTtBQUNMQyxJQUFBQSxJQUFJLEVBQUVDLE1BREQ7QUFFTEMsSUFBQUEsSUFBSSxFQUFFLENBQUMsV0FBRCxFQUFjLFVBQWQsRUFBMEIsU0FBMUIsQ0FGRDtBQUdMQyxJQUFBQSxRQUFRLEVBQUU7QUFITCxHQUQ0QjtBQU1uQ0MsRUFBQUEsSUFBSSxFQUFFO0FBQ0pKLElBQUFBLElBQUksRUFBRUMsTUFERjtBQUVKSSxJQUFBQSxPQUFPLEVBQUU7QUFGTDtBQU42QixDQUFYLENBQTFCO0FBV0EsTUFBTUMsYUFBYSxHQUFHLElBQUlSLGdCQUFKLENBQVc7QUFDL0JTLEVBQUFBLFdBQVcsRUFBRSxDQUFDVixpQkFBRCxDQURrQjtBQUUvQlcsRUFBQUEsU0FBUyxFQUFFLENBQUNQLE1BQUQ7QUFGb0IsQ0FBWCxDQUF0QjtBQUlBLE1BQU1RLGNBQWMsR0FBRyxJQUFJWCxnQkFBSixDQUFXO0FBQ2hDRSxFQUFBQSxJQUFJLEVBQUU7QUFDSkEsSUFBQUEsSUFBSSxFQUFFQyxNQURGO0FBRUpDLElBQUFBLElBQUksRUFBRSxDQUFDLE9BQUQsQ0FGRjtBQUdKQyxJQUFBQSxRQUFRLEVBQUU7QUFITixHQUQwQjtBQU1oQ08sRUFBQUEsV0FBVyxFQUFFO0FBQ1hWLElBQUFBLElBQUksRUFBRSxDQUFDVyxNQUFELENBREs7QUFFWFIsSUFBQUEsUUFBUSxFQUFFO0FBRkM7QUFObUIsQ0FBWCxDQUF2QjtBQVdBLE1BQU1TLFlBQVksR0FBRyxJQUFJZCxnQkFBSixDQUFXO0FBQzlCTSxFQUFBQSxJQUFJLEVBQUU7QUFDSlMsSUFBQUEsR0FBRyxFQUFFLE1BREQ7QUFFSmIsSUFBQUEsSUFBSSxFQUFFRixpQkFBT2dCLEtBQVAsQ0FBYUM7QUFGZixHQUR3QjtBQUs5QkMsRUFBQUEsSUFBSSxFQUFFTDtBQUx3QixDQUFYLENBQXJCO0FBT0EsTUFBTU0sUUFBUSxHQUFHLElBQUluQixnQkFBSixDQUFXO0FBQzFCb0IsRUFBQUEsUUFBUSxFQUFFakIsTUFBTSxHQUFHLENBQUNBLE1BQUQsQ0FETztBQUUxQmtCLEVBQUFBLElBQUksRUFBRWxCLE1BRm9CO0FBRzFCbUIsRUFBQUEsRUFBRSxFQUFFbkI7QUFIc0IsQ0FBWCxDQUFqQixDLENBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsTUFBTW9CLFdBQVcsR0FBRyxJQUFJdkIsZ0JBQUosQ0FBVztBQUM3QndCLEVBQUFBLFFBQVEsRUFBRTtBQUNSdEIsSUFBQUEsSUFBSSxFQUFFLENBQUNDLE1BQUQsQ0FERTtBQUVSRSxJQUFBQSxRQUFRLEVBQUUsQ0FBQyxJQUFELEVBQU8sNkJBQVA7QUFGRixHQURtQjtBQUs3Qm9CLEVBQUFBLE9BQU8sRUFBRWpCLGFBTG9CO0FBTTdCa0IsRUFBQUEsV0FBVyxFQUFFdkIsTUFOZ0I7QUFPN0J3QixFQUFBQSxPQUFPLEVBQUUsQ0FBQ3hCLE1BQUQsQ0FQb0I7QUFRN0J5QixFQUFBQSxTQUFTLEVBQUV6QixNQVJrQjtBQVM3QjBCLEVBQUFBLFFBQVEsRUFBRWxCLGNBVG1CO0FBVTdCbUIsRUFBQUEsSUFBSSxFQUFFO0FBQ0o1QixJQUFBQSxJQUFJLEVBQUVDLE1BREY7QUFFSkUsSUFBQUEsUUFBUSxFQUFFLENBQUMsSUFBRCxFQUFPLDBCQUFQO0FBRk4sR0FWdUI7QUFjN0IwQixFQUFBQSxNQUFNLEVBQUUsQ0FBQ2pCLFlBQUQsQ0FkcUI7QUFlN0JrQixFQUFBQSxRQUFRLEVBQUUsQ0FBQ2IsUUFBRCxDQWZtQixDQWdCN0I7O0FBaEI2QixDQUFYLENBQXBCO0FBbUJBSSxXQUFXLENBQUNVLEtBQVosQ0FBa0I7QUFBRUosRUFBQUEsUUFBUSxFQUFFO0FBQVosQ0FBbEIsRSxDQUNBOztlQUNlLHFCQUFNLE9BQU4sRUFBZU4sV0FBZixDIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hLCBtb2RlbCB9IGZyb20gJ21vbmdvb3NlJ1xuY29uc3Qgc29jaWFsTWVkaWFTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgbWVkaWE6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydJbnN0YWdyYW0nLCAnRmFjZWJvb2snLCAnVHdpdHRlciddLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIHVzZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZTogdHJ1ZVxuICB9XG59KVxuY29uc3QgY29udGFjdFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBzb2NpYWxNZWRpYTogW3NvY2lhbE1lZGlhU2NoZW1hXSxcbiAgdGVsZXBob25lOiBbU3RyaW5nXVxufSlcbmNvbnN0IGxvY2F0aW9uU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHR5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydQb2ludCddLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIGNvb3JkaW5hdGVzOiB7XG4gICAgdHlwZTogW051bWJlcl0sXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfVxufSlcbmNvbnN0IHJhdGluZ1NjaGVtZSA9IG5ldyBTY2hlbWEoe1xuICB1c2VyOiB7XG4gICAgcmVmOiAnVXNlcicsXG4gICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkXG4gIH0sXG4gIHJhdGU6IE51bWJlclxufSlcbmNvbnN0IHdvcmtEYXlzID0gbmV3IFNjaGVtYSh7XG4gIGludGVydmFsOiBTdHJpbmcgfCBbU3RyaW5nXSxcbiAgZnJvbTogU3RyaW5nLFxuICB0bzogU3RyaW5nXG59KVxuLy8gY29uc3QgZm9vZFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuLy8gICAgIG5hbWU6IHtcbi8vICAgICAgICAgdHlwZTogU3RyaW5nLFxuLy8gICAgICAgICByZXF1aXJlZDogdHJ1ZVxuLy8gICAgIH0sXG4vLyAgICAgZGVzY3JpcHRpb246IHtcbi8vICAgICAgICAgdHlwZTogU3RyaW5nLFxuLy8gICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbi8vICAgICB9LFxuLy8gICAgIHByaWNlOiB7XG4vLyAgICAgICAgIHR5cGU6IE51bWJlcixcbi8vICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbi8vICAgICB9LFxuLy8gICAgIHBob3RvOiB7XG4vLyAgICAgICAgIHR5cGU6IFN0cmluZyxcbi8vICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbi8vICAgICB9LFxuLy8gICAgIGNhdGVnb3J5OiB7XG4vLyAgICAgICAgIHR5cGU6IFtTdHJpbmddLFxuLy8gICAgICAgICByZXF1aXJlZDogdHJ1ZVxuLy8gICAgIH1cbi8vIH0pXG5jb25zdCBwbGFjZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBjYXRlZ29yeToge1xuICAgIHR5cGU6IFtTdHJpbmddLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ05vIHNlIHByb3BvcmNpb27DsyBjYXRlZ29yaWEnXVxuICB9LFxuICBjb250YWN0OiBjb250YWN0U2NoZW1hLFxuICBkZXNjcmlwdGlvbjogU3RyaW5nLFxuICBnYWxsZXJ5OiBbU3RyaW5nXSxcbiAgdWJpY2F0aW9uOiBTdHJpbmcsXG4gIGxvY2F0aW9uOiBsb2NhdGlvblNjaGVtYSxcbiAgbmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogW3RydWUsICdObyBzZSBwcm9wb3JjaW9uw7Mgbm9tYnJlJ11cbiAgfSxcbiAgcmF0aW5nOiBbcmF0aW5nU2NoZW1lXSxcbiAgc2NoZWR1bGU6IFt3b3JrRGF5c11cbiAgLy8gbWVudTogW2Zvb2RTY2hlbWFdXG59KVxuXG5wbGFjZVNjaGVtYS5pbmRleCh7IGxvY2F0aW9uOiAnMmRzcGhlcmUnIH0pXG4vLyBwbGFjZU1vZGVsLmNyZWF0ZUluZGV4ZXMoeyBsb2NhdGlvbjogJzJkc3BoZXJlJyB9KVxuZXhwb3J0IGRlZmF1bHQgbW9kZWwoJ1BsYWNlJywgcGxhY2VTY2hlbWEpXG4iXX0=","map":{"version":3,"sources":["places.js"],"names":["socialMediaSchema","Schema","media","type","String","enum","required","user","require","contactSchema","socialMedia","telephone","locationSchema","coordinates","Number","ratingScheme","ref","Types","ObjectId","rate","workDays","interval","from","to","placeSchema","category","contact","description","gallery","ubication","location","name","rating","schedule","index"],"mappings":";;;;;;;AAAA;;AACA,MAAMA,iBAAiB,GAAG,IAAIC,gBAAJ,CAAW;AACnCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,IAAI,EAAE,CAAC,WAAD,EAAc,UAAd,EAA0B,SAA1B,CAFD;AAGLC,IAAAA,QAAQ,EAAE;AAHL,GAD4B;AAMnCC,EAAAA,IAAI,EAAE;AACJJ,IAAAA,IAAI,EAAEC,MADF;AAEJI,IAAAA,OAAO,EAAE;AAFL;AAN6B,CAAX,CAA1B;AAWA,MAAMC,aAAa,GAAG,IAAIR,gBAAJ,CAAW;AAC/BS,EAAAA,WAAW,EAAE,CAACV,iBAAD,CADkB;AAE/BW,EAAAA,SAAS,EAAE,CAACP,MAAD;AAFoB,CAAX,CAAtB;AAIA,MAAMQ,cAAc,GAAG,IAAIX,gBAAJ,CAAW;AAChCE,EAAAA,IAAI,EAAE;AACJA,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,IAAI,EAAE,CAAC,OAAD,CAFF;AAGJC,IAAAA,QAAQ,EAAE;AAHN,GAD0B;AAMhCO,EAAAA,WAAW,EAAE;AACXV,IAAAA,IAAI,EAAE,CAACW,MAAD,CADK;AAEXR,IAAAA,QAAQ,EAAE;AAFC;AANmB,CAAX,CAAvB;AAWA,MAAMS,YAAY,GAAG,IAAId,gBAAJ,CAAW;AAC9BM,EAAAA,IAAI,EAAE;AACJS,IAAAA,GAAG,EAAE,MADD;AAEJb,IAAAA,IAAI,EAAEF,iBAAOgB,KAAP,CAAaC;AAFf,GADwB;AAK9BC,EAAAA,IAAI,EAAEL;AALwB,CAAX,CAArB;AAOA,MAAMM,QAAQ,GAAG,IAAInB,gBAAJ,CAAW;AAC1BoB,EAAAA,QAAQ,EAAEjB,MAAM,GAAG,CAACA,MAAD,CADO;AAE1BkB,EAAAA,IAAI,EAAElB,MAFoB;AAG1BmB,EAAAA,EAAE,EAAEnB;AAHsB,CAAX,CAAjB,C,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMoB,WAAW,GAAG,IAAIvB,gBAAJ,CAAW;AAC7BwB,EAAAA,QAAQ,EAAE;AACRtB,IAAAA,IAAI,EAAE,CAACC,MAAD,CADE;AAERE,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,6BAAP;AAFF,GADmB;AAK7BoB,EAAAA,OAAO,EAAEjB,aALoB;AAM7BkB,EAAAA,WAAW,EAAEvB,MANgB;AAO7BwB,EAAAA,OAAO,EAAE,CAACxB,MAAD,CAPoB;AAQ7ByB,EAAAA,SAAS,EAAEzB,MARkB;AAS7B0B,EAAAA,QAAQ,EAAElB,cATmB;AAU7BmB,EAAAA,IAAI,EAAE;AACJ5B,IAAAA,IAAI,EAAEC,MADF;AAEJE,IAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,0BAAP;AAFN,GAVuB;AAc7B0B,EAAAA,MAAM,EAAE,CAACjB,YAAD,CAdqB;AAe7BkB,EAAAA,QAAQ,EAAE,CAACb,QAAD,CAfmB,CAgB7B;;AAhB6B,CAAX,CAApB;AAmBAI,WAAW,CAACU,KAAZ,CAAkB;AAAEJ,EAAAA,QAAQ,EAAE;AAAZ,CAAlB,E,CACA;;eACe,qBAAM,OAAN,EAAeN,WAAf,C","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/","sourcesContent":["import { Schema, model } from 'mongoose'\nconst socialMediaSchema = new Schema({\n  media: {\n    type: String,\n    enum: ['Instagram', 'Facebook', 'Twitter'],\n    required: true\n  },\n  user: {\n    type: String,\n    require: true\n  }\n})\nconst contactSchema = new Schema({\n  socialMedia: [socialMediaSchema],\n  telephone: [String]\n})\nconst locationSchema = new Schema({\n  type: {\n    type: String,\n    enum: ['Point'],\n    required: true\n  },\n  coordinates: {\n    type: [Number],\n    required: true\n  }\n})\nconst ratingScheme = new Schema({\n  user: {\n    ref: 'User',\n    type: Schema.Types.ObjectId\n  },\n  rate: Number\n})\nconst workDays = new Schema({\n  interval: String | [String],\n  from: String,\n  to: String\n})\n// const foodSchema = new Schema({\n//     name: {\n//         type: String,\n//         required: true\n//     },\n//     description: {\n//         type: String,\n//         required: true,\n//     },\n//     price: {\n//         type: Number,\n//         required: true\n//     },\n//     photo: {\n//         type: String,\n//         required: true\n//     },\n//     category: {\n//         type: [String],\n//         required: true\n//     }\n// })\nconst placeSchema = new Schema({\n  category: {\n    type: [String],\n    required: [true, 'No se proporcionÃ³ categoria']\n  },\n  contact: contactSchema,\n  description: String,\n  gallery: [String],\n  ubication: String,\n  location: locationSchema,\n  name: {\n    type: String,\n    required: [true, 'No se proporcionÃ³ nombre']\n  },\n  rating: [ratingScheme],\n  schedule: [workDays]\n  // menu: [foodSchema]\n})\n\nplaceSchema.index({ location: '2dsphere' })\n// placeModel.createIndexes({ location: '2dsphere' })\nexport default model('Place', placeSchema)\n"]}},"mtime":1647678627799},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/validations.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidObjectId = void 0;\n\nconst isValidObjectId = id => id.match(/^[0-9a-fA-F]{24}$/);\n\nexports.isValidObjectId = isValidObjectId;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRpb25zLmpzIl0sIm5hbWVzIjpbImlzVmFsaWRPYmplY3RJZCIsImlkIiwibWF0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTyxNQUFNQSxlQUFlLEdBQUlDLEVBQUQsSUFBUUEsRUFBRSxDQUFDQyxLQUFILENBQVMsbUJBQVQsQ0FBaEMiLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjL2xpYnMvIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlzVmFsaWRPYmplY3RJZCA9IChpZCkgPT4gaWQubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLylcbiJdfQ==","map":{"version":3,"sources":["validations.js"],"names":["isValidObjectId","id","match"],"mappings":";;;;;;;AAAO,MAAMA,eAAe,GAAIC,EAAD,IAAQA,EAAE,CAACC,KAAH,CAAS,mBAAT,CAAhC","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/","sourcesContent":["export const isValidObjectId = (id) => id.match(/^[0-9a-fA-F]{24}$/)\n"]}},"mtime":1647679332634},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/middlewares/authorization.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tokenVerification = exports.isSeller = exports.isModerator = exports.isAdmin = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _users = _interopRequireDefault(require(\"../models/users\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst noNeededInfo = {\n  password: 0,\n  photoUrl: 0,\n  email: 0,\n  fullName: 0,\n  createdAt: 0,\n  updatedAt: 0\n};\n\nconst tokenVerification = async (req, res, next) => {\n  const {\n    authorization\n  } = req.headers;\n  if (!authorization) return res.status(403).json({\n    message: 'No token provided'\n  });\n\n  try {\n    const decoded = _jsonwebtoken.default.verify(authorization, process.env.TOKEN_SECRET);\n\n    req.userId = decoded?.id; //  console.log(`userId is ${req.userId}`)\n\n    const userFound = await _users.default.findOne({\n      _id: decoded?.id\n    }, {\n      password: 0\n    });\n    if (!userFound) return res.status(404).json({\n      message: 'User doesnt exist'\n    });\n    next();\n  } catch (error) {\n    //  console.error(error)\n    if (error.name === 'TokenExpiredError') res.status(401).json({\n      message: 'Token Expired'\n    });\n    if (error.name === 'JsonWebTokenError') res.status(401).json({\n      message: 'Token Invalido'\n    });\n  }\n};\n\nexports.tokenVerification = tokenVerification;\n\nconst isModerator = async (req, res, next) => {\n  const user = await _users.default.findOne({\n    _id: req.userId\n  }, {\n    noNeededInfo\n  }).populate('roles');\n\n  for (const role of user.roles) {\n    if (role.name === 'Moderator') {\n      next();\n      return;\n    }\n  }\n\n  res.status(403).json(getMessageResponse({\n    role: 'Moderator'\n  }));\n};\n\nexports.isModerator = isModerator;\n\nconst isAdmin = async (req, res, next) => {\n  const user = await _users.default.findOne({\n    _id: req.userId\n  }, {\n    noNeededInfo\n  }).populate('roles');\n\n  for (const role of user.roles) {\n    if (role.name === 'Admin') {\n      next();\n      return;\n    }\n  }\n\n  res.status(403).json(getMessageResponse({\n    role: 'Admin'\n  }));\n};\n\nexports.isAdmin = isAdmin;\n\nconst isSeller = async (req, res, next) => {\n  const user = await _users.default.findOne({\n    _id: req.userId\n  }, {\n    noNeededInfo\n  }).populate('roles');\n\n  for (const role of user.roles) {\n    if (role.name === 'Seller') {\n      next();\n      return;\n    }\n  }\n\n  res.status(403).json(getMessageResponse({\n    role: 'Seller'\n  }));\n};\n\nexports.isSeller = isSeller;\n\nconst getMessageResponse = ({\n  role\n}) => {\n  return {\n    message: `Require ${role} Role`\n  };\n}; // (getMessageResponse('admin'))()\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsibm9OZWVkZWRJbmZvIiwicGFzc3dvcmQiLCJwaG90b1VybCIsImVtYWlsIiwiZnVsbE5hbWUiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJ0b2tlblZlcmlmaWNhdGlvbiIsInJlcSIsInJlcyIsIm5leHQiLCJhdXRob3JpemF0aW9uIiwiaGVhZGVycyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZGVjb2RlZCIsImp3dCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJUT0tFTl9TRUNSRVQiLCJ1c2VySWQiLCJpZCIsInVzZXJGb3VuZCIsIlVzZXIiLCJmaW5kT25lIiwiX2lkIiwiZXJyb3IiLCJuYW1lIiwiaXNNb2RlcmF0b3IiLCJ1c2VyIiwicG9wdWxhdGUiLCJyb2xlIiwicm9sZXMiLCJnZXRNZXNzYWdlUmVzcG9uc2UiLCJpc0FkbWluIiwiaXNTZWxsZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLFlBQVksR0FBRztBQUNuQkMsRUFBQUEsUUFBUSxFQUFFLENBRFM7QUFFbkJDLEVBQUFBLFFBQVEsRUFBRSxDQUZTO0FBR25CQyxFQUFBQSxLQUFLLEVBQUUsQ0FIWTtBQUluQkMsRUFBQUEsUUFBUSxFQUFFLENBSlM7QUFLbkJDLEVBQUFBLFNBQVMsRUFBRSxDQUxRO0FBTW5CQyxFQUFBQSxTQUFTLEVBQUU7QUFOUSxDQUFyQjs7QUFTTyxNQUFNQyxpQkFBaUIsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0FBQ3pELFFBQU07QUFBRUMsSUFBQUE7QUFBRixNQUFvQkgsR0FBRyxDQUFDSSxPQUE5QjtBQUNBLE1BQUksQ0FBQ0QsYUFBTCxFQUFvQixPQUFPRixHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFQyxJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUFyQixDQUFQOztBQUNw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bkIsR0FBRyxDQUFDYztBQUFYLEdBQWIsRUFBa0M7QUFBRXRCLElBQUFBO0FBQUYsR0FBbEMsRUFBb0RnQyxRQUFwRCxDQUE2RCxPQUE3RCxDQUFuQjs7QUFDQSxPQUFLLE1BQU1DLElBQVgsSUFBbUJGLElBQUksQ0FBQ0csS0FBeEIsRUFBK0I7QUFDN0IsUUFBSUQsSUFBSSxDQUFDSixJQUFMLEtBQWMsUUFBbEIsRUFBNEI7QUFDMUJuQixNQUFBQSxJQUFJO0FBQ0o7QUFDRDtBQUNGOztBQUNERCxFQUFBQSxHQUFHLENBQUNJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQnFCLGtCQUFrQixDQUFDO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQUQsQ0FBdkM7QUFDRCxDQVRNOzs7O0FBV1AsTUFBTUUsa0JBQWtCLEdBQUcsQ0FBQztBQUFFRixFQUFBQTtBQUFGLENBQUQsS0FBYztBQUN2QyxTQUFPO0FBQUVsQixJQUFBQSxPQUFPLEVBQUcsV0FBVWtCLElBQUs7QUFBM0IsR0FBUDtBQUNELENBRkQsQyxDQUdBIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VycydcblxuY29uc3Qgbm9OZWVkZWRJbmZvID0ge1xuICBwYXNzd29yZDogMCxcbiAgcGhvdG9Vcmw6IDAsXG4gIGVtYWlsOiAwLFxuICBmdWxsTmFtZTogMCxcbiAgY3JlYXRlZEF0OiAwLFxuICB1cGRhdGVkQXQ6IDBcbn1cblxuZXhwb3J0IGNvbnN0IHRva2VuVmVyaWZpY2F0aW9uID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgYXV0aG9yaXphdGlvbiB9ID0gcmVxLmhlYWRlcnNcbiAgaWYgKCFhdXRob3JpemF0aW9uKSByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnTm8gdG9rZW4gcHJvdmlkZWQnIH0pXG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkoYXV0aG9yaXphdGlvbiwgcHJvY2Vzcy5lbnYuVE9LRU5fU0VDUkVUKVxuICAgIHJlcS51c2VySWQgPSBkZWNvZGVkPy5pZFxuICAgIC8vICBjb25zb2xlLmxvZyhgdXNlcklkIGlzICR7cmVxLnVzZXJJZH1gKVxuICAgIGNvbnN0IHVzZXJGb3VuZCA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogZGVjb2RlZD8uaWQgfSwgeyBwYXNzd29yZDogMCB9KVxuICAgIGlmICghdXNlckZvdW5kKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBkb2VzbnQgZXhpc3QnIH0pXG4gICAgbmV4dCgpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdUb2tlbkV4cGlyZWRFcnJvcicpIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1Rva2VuIEV4cGlyZWQnIH0pXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdKc29uV2ViVG9rZW5FcnJvcicpIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1Rva2VuIEludmFsaWRvJyB9KVxuICB9XG59XG5leHBvcnQgY29uc3QgaXNNb2RlcmF0b3IgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogcmVxLnVzZXJJZCB9LCB7IG5vTmVlZGVkSW5mbyB9KS5wb3B1bGF0ZSgncm9sZXMnKVxuICBmb3IgKGNvbnN0IHJvbGUgb2YgdXNlci5yb2xlcykge1xuICAgIGlmIChyb2xlLm5hbWUgPT09ICdNb2RlcmF0b3InKSB7XG4gICAgICBuZXh0KClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxuICByZXMuc3RhdHVzKDQwMykuanNvbihnZXRNZXNzYWdlUmVzcG9uc2UoeyByb2xlOiAnTW9kZXJhdG9yJyB9KSlcbn1cbmV4cG9ydCBjb25zdCBpc0FkbWluID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHJlcS51c2VySWQgfSwgeyBub05lZWRlZEluZm8gfSkucG9wdWxhdGUoJ3JvbGVzJylcbiAgZm9yIChjb25zdCByb2xlIG9mIHVzZXIucm9sZXMpIHtcbiAgICBpZiAocm9sZS5uYW1lID09PSAnQWRtaW4nKSB7XG4gICAgICBuZXh0KClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxuICByZXMuc3RhdHVzKDQwMykuanNvbihnZXRNZXNzYWdlUmVzcG9uc2UoeyByb2xlOiAnQWRtaW4nIH0pKVxufVxuZXhwb3J0IGNvbnN0IGlzU2VsbGVyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHJlcS51c2VySWQgfSwgeyBub05lZWRlZEluZm8gfSkucG9wdWxhdGUoJ3JvbGVzJylcbiAgZm9yIChjb25zdCByb2xlIG9mIHVzZXIucm9sZXMpIHtcbiAgICBpZiAocm9sZS5uYW1lID09PSAnU2VsbGVyJykge1xuICAgICAgbmV4dCgpXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cbiAgcmVzLnN0YXR1cyg0MDMpLmpzb24oZ2V0TWVzc2FnZVJlc3BvbnNlKHsgcm9sZTogJ1NlbGxlcicgfSkpXG59XG5cbmNvbnN0IGdldE1lc3NhZ2VSZXNwb25zZSA9ICh7IHJvbGUgfSkgPT4ge1xuICByZXR1cm4geyBtZXNzYWdlOiBgUmVxdWlyZSAke3JvbGV9IFJvbGVgIH1cbn1cbi8vIChnZXRNZXNzYWdlUmVzcG9uc2UoJ2FkbWluJykpKClcbiJdfQ==","map":{"version":3,"sources":["authorization.js"],"names":["noNeededInfo","password","photoUrl","email","fullName","createdAt","updatedAt","tokenVerification","req","res","next","authorization","headers","status","json","message","decoded","jwt","verify","process","env","TOKEN_SECRET","userId","id","userFound","User","findOne","_id","error","name","isModerator","user","populate","role","roles","getMessageResponse","isAdmin","isSeller"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/middlewares/","sourcesContent":["import jwt from 'jsonwebtoken'\nimport User from '../models/users'\n\nconst noNeededInfo = {\n  password: 0,\n  photoUrl: 0,\n  email: 0,\n  fullName: 0,\n  createdAt: 0,\n  updatedAt: 0\n}\n\nexport const tokenVerification = async (req, res, next) => {\n  const { authorization } = req.headers\n  if (!authorization) return res.status(403).json({ message: 'No token provided' })\n  try {\n    const decoded = jwt.verify(authorization, process.env.TOKEN_SECRET)\n    req.userId = decoded?.id\n    //  console.log(`userId is ${req.userId}`)\n    const userFound = await User.findOne({ _id: decoded?.id }, { password: 0 })\n    if (!userFound) return res.status(404).json({ message: 'User doesnt exist' })\n    next()\n  } catch (error) {\n    //  console.error(error)\n    if (error.name === 'TokenExpiredError') res.status(401).json({ message: 'Token Expired' })\n    if (error.name === 'JsonWebTokenError') res.status(401).json({ message: 'Token Invalido' })\n  }\n}\nexport const isModerator = async (req, res, next) => {\n  const user = await User.findOne({ _id: req.userId }, { noNeededInfo }).populate('roles')\n  for (const role of user.roles) {\n    if (role.name === 'Moderator') {\n      next()\n      return\n    }\n  }\n  res.status(403).json(getMessageResponse({ role: 'Moderator' }))\n}\nexport const isAdmin = async (req, res, next) => {\n  const user = await User.findOne({ _id: req.userId }, { noNeededInfo }).populate('roles')\n  for (const role of user.roles) {\n    if (role.name === 'Admin') {\n      next()\n      return\n    }\n  }\n  res.status(403).json(getMessageResponse({ role: 'Admin' }))\n}\nexport const isSeller = async (req, res, next) => {\n  const user = await User.findOne({ _id: req.userId }, { noNeededInfo }).populate('roles')\n  for (const role of user.roles) {\n    if (role.name === 'Seller') {\n      next()\n      return\n    }\n  }\n  res.status(403).json(getMessageResponse({ role: 'Seller' }))\n}\n\nconst getMessageResponse = ({ role }) => {\n  return { message: `Require ${role} Role` }\n}\n// (getMessageResponse('admin'))()\n"]}},"mtime":1647678294668},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userSchema = new _mongoose.Schema({\n  email: {\n    type: String,\n    require: true,\n    unique: true\n  },\n  fullName: {\n    type: String,\n    require: true\n  },\n  password: {\n    type: String,\n    require: true\n  },\n  roles: [{\n    ref: 'Role',\n    type: _mongoose.Schema.Types.ObjectId\n  }],\n  photoUrl: {\n    type: String,\n    default: 'http://localhost:3000/users/photo/default.png'\n  }\n}, {\n  timestamps: true,\n  versionKey: false\n});\n\nuserSchema.statics.encryptPassword = async password => {\n  const salt = await _bcrypt.default.genSalt(12);\n  return await _bcrypt.default.hash(password, salt);\n};\n\nuserSchema.statics.verifyPassword = async (password, hash) => {\n  return await _bcrypt.default.compare(password, hash);\n};\n\nvar _default = (0, _mongoose.model)('User', userSchema);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJlbWFpbCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlIiwidW5pcXVlIiwiZnVsbE5hbWUiLCJwYXNzd29yZCIsInJvbGVzIiwicmVmIiwiVHlwZXMiLCJPYmplY3RJZCIsInBob3RvVXJsIiwiZGVmYXVsdCIsInRpbWVzdGFtcHMiLCJ2ZXJzaW9uS2V5Iiwic3RhdGljcyIsImVuY3J5cHRQYXNzd29yZCIsInNhbHQiLCJiY3J5cHQiLCJnZW5TYWx0IiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBQ0EsTUFBTUEsVUFBVSxHQUFHLElBQUlDLGdCQUFKLENBQVc7QUFDNUJDLEVBQUFBLEtBQUssRUFBRTtBQUNMQyxJQUFBQSxJQUFJLEVBQUVDLE1BREQ7QUFFTEMsSUFBQUEsT0FBTyxFQUFFLElBRko7QUFHTEMsSUFBQUEsTUFBTSxFQUFFO0FBSEgsR0FEcUI7QUFNNUJDLEVBQUFBLFFBQVEsRUFBRTtBQUNSSixJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUkMsSUFBQUEsT0FBTyxFQUFFO0FBRkQsR0FOa0I7QUFVNUJHLEVBQUFBLFFBQVEsRUFBRTtBQUNSTCxJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUkMsSUFBQUEsT0FBTyxFQUFFO0FBRkQsR0FWa0I7QUFjNUJJLEVBQUFBLEtBQUssRUFBRSxDQUNMO0FBQ0VDLElBQUFBLEdBQUcsRUFBRSxNQURQO0FBRUVQLElBQUFBLElBQUksRUFBRUYsaUJBQU9VLEtBQVAsQ0FBYUM7QUFGckIsR0FESyxDQWRxQjtBQW9CNUJDLEVBQUFBLFFBQVEsRUFBRTtBQUNSVixJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUlUsSUFBQUEsT0FBTyxFQUFFO0FBRkQ7QUFwQmtCLENBQVgsRUF3QmhCO0FBQ0RDLEVBQUFBLFVBQVUsRUFBRSxJQURYO0FBRURDLEVBQUFBLFVBQVUsRUFBRTtBQUZYLENBeEJnQixDQUFuQjs7QUE0QkFoQixVQUFVLENBQUNpQixPQUFYLENBQW1CQyxlQUFuQixHQUFxQyxNQUFPVixRQUFQLElBQW9CO0FBQ3ZELFFBQU1XLElBQUksR0FBRyxNQUFNQyxnQkFBT0MsT0FBUCxDQUFlLEVBQWYsQ0FBbkI7QUFDQSxTQUFPLE1BQU1ELGdCQUFPRSxJQUFQLENBQVlkLFFBQVosRUFBc0JXLElBQXRCLENBQWI7QUFDRCxDQUhEOztBQUlBbkIsVUFBVSxDQUFDaUIsT0FBWCxDQUFtQk0sY0FBbkIsR0FBb0MsT0FBT2YsUUFBUCxFQUFpQmMsSUFBakIsS0FBMEI7QUFDNUQsU0FBTyxNQUFNRixnQkFBT0ksT0FBUCxDQUFlaEIsUUFBZixFQUF5QmMsSUFBekIsQ0FBYjtBQUNELENBRkQ7O2VBR2UscUJBQU0sTUFBTixFQUFjdEIsVUFBZCxDIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hLCBtb2RlbCB9IGZyb20gJ21vbmdvb3NlJ1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGVtYWlsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmU6IHRydWUsXG4gICAgdW5pcXVlOiB0cnVlXG4gIH0sXG4gIGZ1bGxOYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmU6IHRydWVcbiAgfSxcbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZTogdHJ1ZVxuICB9LFxuICByb2xlczogW1xuICAgIHtcbiAgICAgIHJlZjogJ1JvbGUnLFxuICAgICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkXG4gICAgfVxuICBdLFxuICBwaG90b1VybDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzL3Bob3RvL2RlZmF1bHQucG5nJ1xuICB9XG59LCB7XG4gIHRpbWVzdGFtcHM6IHRydWUsXG4gIHZlcnNpb25LZXk6IGZhbHNlXG59KVxudXNlclNjaGVtYS5zdGF0aWNzLmVuY3J5cHRQYXNzd29yZCA9IGFzeW5jIChwYXNzd29yZCkgPT4ge1xuICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTIpXG4gIHJldHVybiBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdClcbn1cbnVzZXJTY2hlbWEuc3RhdGljcy52ZXJpZnlQYXNzd29yZCA9IGFzeW5jIChwYXNzd29yZCwgaGFzaCkgPT4ge1xuICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2gpXG59XG5leHBvcnQgZGVmYXVsdCBtb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpXG4iXX0=","map":{"version":3,"sources":["users.js"],"names":["userSchema","Schema","email","type","String","require","unique","fullName","password","roles","ref","Types","ObjectId","photoUrl","default","timestamps","versionKey","statics","encryptPassword","salt","bcrypt","genSalt","hash","verifyPassword","compare"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,OAAO,EAAE,IAFJ;AAGLC,IAAAA,MAAM,EAAE;AAHH,GADqB;AAM5BC,EAAAA,QAAQ,EAAE;AACRJ,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,OAAO,EAAE;AAFD,GANkB;AAU5BG,EAAAA,QAAQ,EAAE;AACRL,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,OAAO,EAAE;AAFD,GAVkB;AAc5BI,EAAAA,KAAK,EAAE,CACL;AACEC,IAAAA,GAAG,EAAE,MADP;AAEEP,IAAAA,IAAI,EAAEF,iBAAOU,KAAP,CAAaC;AAFrB,GADK,CAdqB;AAoB5BC,EAAAA,QAAQ,EAAE;AACRV,IAAAA,IAAI,EAAEC,MADE;AAERU,IAAAA,OAAO,EAAE;AAFD;AApBkB,CAAX,EAwBhB;AACDC,EAAAA,UAAU,EAAE,IADX;AAEDC,EAAAA,UAAU,EAAE;AAFX,CAxBgB,CAAnB;;AA4BAhB,UAAU,CAACiB,OAAX,CAAmBC,eAAnB,GAAqC,MAAOV,QAAP,IAAoB;AACvD,QAAMW,IAAI,GAAG,MAAMC,gBAAOC,OAAP,CAAe,EAAf,CAAnB;AACA,SAAO,MAAMD,gBAAOE,IAAP,CAAYd,QAAZ,EAAsBW,IAAtB,CAAb;AACD,CAHD;;AAIAnB,UAAU,CAACiB,OAAX,CAAmBM,cAAnB,GAAoC,OAAOf,QAAP,EAAiBc,IAAjB,KAA0B;AAC5D,SAAO,MAAMF,gBAAOI,OAAP,CAAehB,QAAf,EAAyBc,IAAzB,CAAb;AACD,CAFD;;eAGe,qBAAM,MAAN,EAActB,UAAd,C","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/","sourcesContent":["import { Schema, model } from 'mongoose'\nimport bcrypt from 'bcrypt'\nconst userSchema = new Schema({\n  email: {\n    type: String,\n    require: true,\n    unique: true\n  },\n  fullName: {\n    type: String,\n    require: true\n  },\n  password: {\n    type: String,\n    require: true\n  },\n  roles: [\n    {\n      ref: 'Role',\n      type: Schema.Types.ObjectId\n    }\n  ],\n  photoUrl: {\n    type: String,\n    default: 'http://localhost:3000/users/photo/default.png'\n  }\n}, {\n  timestamps: true,\n  versionKey: false\n})\nuserSchema.statics.encryptPassword = async (password) => {\n  const salt = await bcrypt.genSalt(12)\n  return await bcrypt.hash(password, salt)\n}\nuserSchema.statics.verifyPassword = async (password, hash) => {\n  return await bcrypt.compare(password, hash)\n}\nexport default model('User', userSchema)\n"]}},"mtime":1647678695356},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/authentication.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar authenticationController = _interopRequireWildcard(require(\"../controllers/authentication\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.post('/signup', authenticationController.signUp);\nrouter.post('/login', authenticationController.login);\nrouter.post('/resetPassword', authenticationController.changePassword);\nrouter.post('/forgotPassword', authenticationController.forgotPassword);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInBvc3QiLCJhdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIiLCJzaWduVXAiLCJsb2dpbiIsImNoYW5nZVBhc3N3b3JkIiwiZm9yZ290UGFzc3dvcmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7Ozs7O0FBQ0EsTUFBTUEsTUFBTSxHQUFHLHNCQUFmO0FBQ0FBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZLFNBQVosRUFBdUJDLHdCQUF3QixDQUFDQyxNQUFoRDtBQUNBSCxNQUFNLENBQUNDLElBQVAsQ0FBWSxRQUFaLEVBQXNCQyx3QkFBd0IsQ0FBQ0UsS0FBL0M7QUFDQUosTUFBTSxDQUFDQyxJQUFQLENBQVksZ0JBQVosRUFBOEJDLHdCQUF3QixDQUFDRyxjQUF2RDtBQUNBTCxNQUFNLENBQUNDLElBQVAsQ0FBWSxpQkFBWixFQUErQkMsd0JBQXdCLENBQUNJLGNBQXhEO2VBRWVOLE0iLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0ICogYXMgYXV0aGVudGljYXRpb25Db250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL2F1dGhlbnRpY2F0aW9uJ1xuY29uc3Qgcm91dGVyID0gUm91dGVyKClcbnJvdXRlci5wb3N0KCcvc2lnbnVwJywgYXV0aGVudGljYXRpb25Db250cm9sbGVyLnNpZ25VcClcbnJvdXRlci5wb3N0KCcvbG9naW4nLCBhdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIubG9naW4pXG5yb3V0ZXIucG9zdCgnL3Jlc2V0UGFzc3dvcmQnLCBhdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIuY2hhbmdlUGFzc3dvcmQpXG5yb3V0ZXIucG9zdCgnL2ZvcmdvdFBhc3N3b3JkJywgYXV0aGVudGljYXRpb25Db250cm9sbGVyLmZvcmdvdFBhc3N3b3JkKVxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXJcbiJdfQ==","map":{"version":3,"sources":["authentication.js"],"names":["router","post","authenticationController","signUp","login","changePassword","forgotPassword"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AACA,MAAMA,MAAM,GAAG,sBAAf;AACAA,MAAM,CAACC,IAAP,CAAY,SAAZ,EAAuBC,wBAAwB,CAACC,MAAhD;AACAH,MAAM,CAACC,IAAP,CAAY,QAAZ,EAAsBC,wBAAwB,CAACE,KAA/C;AACAJ,MAAM,CAACC,IAAP,CAAY,gBAAZ,EAA8BC,wBAAwB,CAACG,cAAvD;AACAL,MAAM,CAACC,IAAP,CAAY,iBAAZ,EAA+BC,wBAAwB,CAACI,cAAxD;eAEeN,M","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/","sourcesContent":["import { Router } from 'express'\nimport * as authenticationController from '../controllers/authentication'\nconst router = Router()\nrouter.post('/signup', authenticationController.signUp)\nrouter.post('/login', authenticationController.login)\nrouter.post('/resetPassword', authenticationController.changePassword)\nrouter.post('/forgotPassword', authenticationController.forgotPassword)\n\nexport default router\n"]}},"mtime":1647674487752},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/authentication.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signUp = exports.login = exports.forgotPassword = exports.changePassword = void 0;\n\nvar _users = _interopRequireDefault(require(\"../models/users\"));\n\nvar _roles = _interopRequireDefault(require(\"../models/roles\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst signUp = async (req, res) => {\n  const {\n    email,\n    password,\n    fullName,\n    roles\n  } = req.body;\n  const existingUser = await _users.default.findOne({\n    email\n  });\n  if (existingUser) return res.json({\n    message: 'Ese correo ya esta registrado'\n  });\n  const newUser = new _users.default({\n    email,\n    password: await _users.default.encryptPassword(password),\n    fullName\n  });\n\n  if (roles) {\n    const foundRoles = await _roles.default.find({\n      name: {\n        $in: roles\n      }\n    });\n    newUser.roles = foundRoles.map(role => role._id);\n  } else {\n    const role = await _roles.default.findOne({\n      name: 'User'\n    });\n    newUser.roles = [role._id];\n  }\n\n  const savedUser = await newUser.save();\n\n  const token = _jsonwebtoken.default.sign({\n    id: savedUser._id\n  }, process.env.TOKEN_SECRET, {\n    expiresIn: 86400\n  });\n\n  res.json({\n    token\n  });\n};\n\nexports.signUp = signUp;\n\nconst login = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  const existingUser = await _users.default.findOne({\n    email\n  }); //  const existingUser = await User.findOne({ email }).populate('roles')\n\n  if (!existingUser) return res.status(400).json({\n    message: 'Ese correo electrÃ³nico no estÃ¡ registrado'\n  });\n  const matchedPassword = await _users.default.verifyPassword(password, existingUser.password);\n  if (!matchedPassword) return res.status(401).json({\n    message: 'VerifÃ­que el correo o la contraseÃ±a'\n  });\n\n  const token = _jsonwebtoken.default.sign({\n    id: existingUser._id\n  }, process.env.TOKEN_SECRET, {\n    expiresIn: 86400\n  });\n\n  res.json({\n    token\n  });\n};\n\nexports.login = login;\n\nconst changePassword = async (req, res) => {\n  const {\n    email,\n    password,\n    newPassword,\n    newPasswordConfirmation\n  } = req.body;\n  if (!email) return res.json({\n    message: 'No se proporcionÃ³ correo'\n  });\n  const existingUser = await _users.default.findOne({\n    email\n  });\n  if (!existingUser) return res.status(400).json({\n    message: 'Ese correo electrÃ³nico no estÃ¡ registrado'\n  });\n  const matchedPassword = await _users.default.verifyPassword(password, existingUser.password);\n  if (!matchedPassword) return res.status(401).json({\n    message: 'La contraseÃ±a actual es erronea'\n  });\n  if (newPassword !== newPasswordConfirmation) return res.status(401).json({\n    message: 'Nueva contraseÃ±a y confirmacion de nueva contraseÃ±a no coinciden'\n  });\n  existingUser.password = await _users.default.encryptPassword(newPassword);\n  const userUpdated = await _users.default.findOneAndUpdate({\n    _id: existingUser._id\n  }, existingUser, {\n    new: true\n  });\n  res.json({\n    userUpdated\n  });\n};\n\nexports.changePassword = changePassword;\n\nconst forgotPassword = (req, res) => {\n  const {\n    email\n  } = req.body;\n  res.json({\n    message: `Sending email to ${email}`\n  });\n};\n\nexports.forgotPassword = forgotPassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uLmpzIl0sIm5hbWVzIjpbInNpZ25VcCIsInJlcSIsInJlcyIsImVtYWlsIiwicGFzc3dvcmQiLCJmdWxsTmFtZSIsInJvbGVzIiwiYm9keSIsImV4aXN0aW5nVXNlciIsIlVzZXIiLCJmaW5kT25lIiwianNvbiIsIm1lc3NhZ2UiLCJuZXdVc2VyIiwiZW5jcnlwdFBhc3N3b3JkIiwiZm91bmRSb2xlcyIsIlJvbGUiLCJmaW5kIiwibmFtZSIsIiRpbiIsIm1hcCIsInJvbGUiLCJfaWQiLCJzYXZlZFVzZXIiLCJzYXZlIiwidG9rZW4iLCJqd3QiLCJzaWduIiwiaWQiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU5fU0VDUkVUIiwiZXhwaXJlc0luIiwibG9naW4iLCJzdGF0dXMiLCJtYXRjaGVkUGFzc3dvcmQiLCJ2ZXJpZnlQYXNzd29yZCIsImNoYW5nZVBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJuZXdQYXNzd29yZENvbmZpcm1hdGlvbiIsInVzZXJVcGRhdGVkIiwiZmluZE9uZUFuZFVwZGF0ZSIsIm5ldyIsImZvcmdvdFBhc3N3b3JkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDTyxNQUFNQSxNQUFNLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3hDLFFBQU07QUFBRUMsSUFBQUEsS0FBRjtBQUFTQyxJQUFBQSxRQUFUO0FBQW1CQyxJQUFBQSxRQUFuQjtBQUE2QkMsSUFBQUE7QUFBN0IsTUFBdUNMLEdBQUcsQ0FBQ00sSUFBakQ7QUFDQSxRQUFNQyxZQUFZLEdBQUcsTUFBTUMsZUFBS0MsT0FBTCxDQUFhO0FBQUVQLElBQUFBO0FBQUYsR0FBYixDQUEzQjtBQUNBLE1BQUlLLFlBQUosRUFBa0IsT0FBT04sR0FBRyxDQUFDUyxJQUFKLENBQVM7QUFBRUMsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBVCxDQUFQO0FBQ2xCLFFBQU1DLE9BQU8sR0FBRyxJQUFJSixjQUFKLENBQVM7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SUFBdEI7QUFDQUwsRUFBQUEsR0FBRyxDQUFDUyxJQUFKLENBQVM7QUFBRUMsSUFBQUEsT0FBTyxFQUFHLG9CQUFtQlQsS0FBTTtBQUFyQyxHQUFUO0FBQ0QsQ0FITSIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXJzJ1xuaW1wb3J0IFJvbGUgZnJvbSAnLi4vbW9kZWxzL3JvbGVzJ1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5leHBvcnQgY29uc3Qgc2lnblVwID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBmdWxsTmFtZSwgcm9sZXMgfSA9IHJlcS5ib2R5XG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pXG4gIGlmIChleGlzdGluZ1VzZXIpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdFc2UgY29ycmVvIHlhIGVzdGEgcmVnaXN0cmFkbycgfSlcbiAgY29uc3QgbmV3VXNlciA9IG5ldyBVc2VyKHsgZW1haWwsIHBhc3N3b3JkOiBhd2FpdCBVc2VyLmVuY3J5cHRQYXNzd29yZChwYXNzd29yZCksIGZ1bGxOYW1lIH0pXG4gIGlmIChyb2xlcykge1xuICAgIGNvbnN0IGZvdW5kUm9sZXMgPSBhd2FpdCBSb2xlLmZpbmQoeyBuYW1lOiB7ICRpbjogcm9sZXMgfSB9KVxuICAgIG5ld1VzZXIucm9sZXMgPSBmb3VuZFJvbGVzLm1hcChyb2xlID0+IHJvbGUuX2lkKVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJvbGUgPSBhd2FpdCBSb2xlLmZpbmRPbmUoeyBuYW1lOiAnVXNlcicgfSlcbiAgICBuZXdVc2VyLnJvbGVzID0gW3JvbGUuX2lkXVxuICB9XG4gIGNvbnN0IHNhdmVkVXNlciA9IGF3YWl0IG5ld1VzZXIuc2F2ZSgpXG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogc2F2ZWRVc2VyLl9pZCB9LCBwcm9jZXNzLmVudi5UT0tFTl9TRUNSRVQsIHsgZXhwaXJlc0luOiA4NjQwMCB9KVxuICByZXMuanNvbih7IHRva2VuIH0pXG59XG5leHBvcnQgY29uc3QgbG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5XG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pXG4gIC8vICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KS5wb3B1bGF0ZSgncm9sZXMnKVxuICBpZiAoIWV4aXN0aW5nVXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0VzZSBjb3JyZW8gZWxlY3Ryw7NuaWNvIG5vIGVzdMOhIHJlZ2lzdHJhZG8nIH0pXG4gIGNvbnN0IG1hdGNoZWRQYXNzd29yZCA9IGF3YWl0IFVzZXIudmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIGV4aXN0aW5nVXNlci5wYXNzd29yZClcbiAgaWYgKCFtYXRjaGVkUGFzc3dvcmQpIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdWZXJpZsOtcXVlIGVsIGNvcnJlbyBvIGxhIGNvbnRyYXNlw7FhJyB9KVxuICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgaWQ6IGV4aXN0aW5nVXNlci5faWQgfSwgcHJvY2Vzcy5lbnYuVE9LRU5fU0VDUkVULCB7IGV4cGlyZXNJbjogODY0MDAgfSlcbiAgcmVzLmpzb24oeyB0b2tlbiB9KVxufVxuZXhwb3J0IGNvbnN0IGNoYW5nZVBhc3N3b3JkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBuZXdQYXNzd29yZCwgbmV3UGFzc3dvcmRDb25maXJtYXRpb24gfSA9IHJlcS5ib2R5XG4gIGlmICghZW1haWwpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdObyBzZSBwcm9wb3JjaW9uw7MgY29ycmVvJyB9KVxuICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KVxuICBpZiAoIWV4aXN0aW5nVXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0VzZSBjb3JyZW8gZWxlY3Ryw7NuaWNvIG5vIGVzdMOhIHJlZ2lzdHJhZG8nIH0pXG4gIGNvbnN0IG1hdGNoZWRQYXNzd29yZCA9IGF3YWl0IFVzZXIudmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIGV4aXN0aW5nVXNlci5wYXNzd29yZClcbiAgaWYgKCFtYXRjaGVkUGFzc3dvcmQpIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdMYSBjb250cmFzZcOxYSBhY3R1YWwgZXMgZXJyb25lYScgfSlcbiAgaWYgKG5ld1Bhc3N3b3JkICE9PSBuZXdQYXNzd29yZENvbmZpcm1hdGlvbikgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ051ZXZhIGNvbnRyYXNlw7FhIHkgY29uZmlybWFjaW9uIGRlIG51ZXZhIGNvbnRyYXNlw7FhIG5vIGNvaW5jaWRlbicgfSlcbiAgZXhpc3RpbmdVc2VyLnBhc3N3b3JkID0gYXdhaXQgVXNlci5lbmNyeXB0UGFzc3dvcmQobmV3UGFzc3dvcmQpXG4gIGNvbnN0IHVzZXJVcGRhdGVkID0gYXdhaXQgVXNlci5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiBleGlzdGluZ1VzZXIuX2lkIH0sIGV4aXN0aW5nVXNlciwgeyBuZXc6IHRydWUgfSlcbiAgcmVzLmpzb24oeyB1c2VyVXBkYXRlZCB9KVxufVxuZXhwb3J0IGNvbnN0IGZvcmdvdFBhc3N3b3JkID0gKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5XG4gIHJlcy5qc29uKHsgbWVzc2FnZTogYFNlbmRpbmcgZW1haWwgdG8gJHtlbWFpbH1gIH0pXG59XG4iXX0=","map":{"version":3,"sources":["authentication.js"],"names":["signUp","req","res","email","password","fullName","roles","body","existingUser","User","findOne","json","message","newUser","encryptPassword","foundRoles","Role","find","name","$in","map","role","_id","savedUser","save","token","jwt","sign","id","process","env","TOKEN_SECRET","expiresIn","login","status","matchedPassword","verifyPassword","changePassword","newPassword","newPasswordConfirmation","userUpdated","findOneAndUpdate","new","forgotPassword"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/","sourcesContent":["import User from '../models/users'\nimport Role from '../models/roles'\nimport jwt from 'jsonwebtoken'\nexport const signUp = async (req, res) => {\n  const { email, password, fullName, roles } = req.body\n  const existingUser = await User.findOne({ email })\n  if (existingUser) return res.json({ message: 'Ese correo ya esta registrado' })\n  const newUser = new User({ email, password: await User.encryptPassword(password), fullName })\n  if (roles) {\n    const foundRoles = await Role.find({ name: { $in: roles } })\n    newUser.roles = foundRoles.map(role => role._id)\n  } else {\n    const role = await Role.findOne({ name: 'User' })\n    newUser.roles = [role._id]\n  }\n  const savedUser = await newUser.save()\n  const token = jwt.sign({ id: savedUser._id }, process.env.TOKEN_SECRET, { expiresIn: 86400 })\n  res.json({ token })\n}\nexport const login = async (req, res) => {\n  const { email, password } = req.body\n  const existingUser = await User.findOne({ email })\n  //  const existingUser = await User.findOne({ email }).populate('roles')\n  if (!existingUser) return res.status(400).json({ message: 'Ese correo electrÃ³nico no estÃ¡ registrado' })\n  const matchedPassword = await User.verifyPassword(password, existingUser.password)\n  if (!matchedPassword) return res.status(401).json({ message: 'VerifÃ­que el correo o la contraseÃ±a' })\n  const token = jwt.sign({ id: existingUser._id }, process.env.TOKEN_SECRET, { expiresIn: 86400 })\n  res.json({ token })\n}\nexport const changePassword = async (req, res) => {\n  const { email, password, newPassword, newPasswordConfirmation } = req.body\n  if (!email) return res.json({ message: 'No se proporcionÃ³ correo' })\n  const existingUser = await User.findOne({ email })\n  if (!existingUser) return res.status(400).json({ message: 'Ese correo electrÃ³nico no estÃ¡ registrado' })\n  const matchedPassword = await User.verifyPassword(password, existingUser.password)\n  if (!matchedPassword) return res.status(401).json({ message: 'La contraseÃ±a actual es erronea' })\n  if (newPassword !== newPasswordConfirmation) return res.status(401).json({ message: 'Nueva contraseÃ±a y confirmacion de nueva contraseÃ±a no coinciden' })\n  existingUser.password = await User.encryptPassword(newPassword)\n  const userUpdated = await User.findOneAndUpdate({ _id: existingUser._id }, existingUser, { new: true })\n  res.json({ userUpdated })\n}\nexport const forgotPassword = (req, res) => {\n  const { email } = req.body\n  res.json({ message: `Sending email to ${email}` })\n}\n"]}},"mtime":1647678545781},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst roleSchema = new _mongoose.Schema({\n  name: String\n}, {\n  versionKey: false\n});\n\nvar _default = (0, _mongoose.model)('Role', roleSchema);\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvbGVzLmpzIl0sIm5hbWVzIjpbInJvbGVTY2hlbWEiLCJTY2hlbWEiLCJuYW1lIiwiU3RyaW5nIiwidmVyc2lvbktleSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0FBQzVCQyxFQUFBQSxJQUFJLEVBQUVDO0FBRHNCLENBQVgsRUFFaEI7QUFDREMsRUFBQUEsVUFBVSxFQUFFO0FBRFgsQ0FGZ0IsQ0FBbkI7O2VBS2UscUJBQU0sTUFBTixFQUFjSixVQUFkLEMiLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjL21vZGVscy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2hlbWEsIG1vZGVsIH0gZnJvbSAnbW9uZ29vc2UnXG5jb25zdCByb2xlU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIG5hbWU6IFN0cmluZ1xufSwge1xuICB2ZXJzaW9uS2V5OiBmYWxzZVxufSlcbmV4cG9ydCBkZWZhdWx0IG1vZGVsKCdSb2xlJywgcm9sZVNjaGVtYSlcbiJdfQ==","map":{"version":3,"sources":["roles.js"],"names":["roleSchema","Schema","name","String","versionKey"],"mappings":";;;;;;;AAAA;;AACA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CAAW;AAC5BC,EAAAA,IAAI,EAAEC;AADsB,CAAX,EAEhB;AACDC,EAAAA,UAAU,EAAE;AADX,CAFgB,CAAnB;;eAKe,qBAAM,MAAN,EAAcJ,UAAd,C","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/models/","sourcesContent":["import { Schema, model } from 'mongoose'\nconst roleSchema = new Schema({\n  name: String\n}, {\n  versionKey: false\n})\nexport default model('Role', roleSchema)\n"]}},"mtime":1647679434368},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar userController = _interopRequireWildcard(require(\"../controllers/users\"));\n\nvar authorization = _interopRequireWildcard(require(\"../middlewares/authorization\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// import multer from 'multer'\nconst router = (0, _express.Router)(); // const store = multer.diskStorage({\n//   destination: (req, file, cb) => {\n//     cb(null, 'uploads/profile')\n//   },\n//   filename: (req, file, cb) => {\n//     const uniqueName = Date.now().toString()\n//     const extension = file.originalname.split('.').at(-1)\n//     cb(null, `${uniqueName}.${extension}`)\n//   }\n// })\n// const upload = multer({ storage: store })\n\nrouter.get('/', [authorization.tokenVerification, authorization.isModerator], userController.getAllUsers);\nrouter.get('/:userId', [authorization.tokenVerification], userController.getUserInfo);\nrouter.put('/:userId', [authorization.tokenVerification, authorization.isModerator], userController.updateUser);\nrouter.delete('/:userId', [authorization.tokenVerification, authorization.isAdmin], userController.deleteUser);\nrouter.post('/photo/:userId', [authorization.tokenVerification,\n/*  upload.single('avatar'),  */\nuserController.prepareToUpdateImage], userController.updateUser);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsImdldCIsImF1dGhvcml6YXRpb24iLCJ0b2tlblZlcmlmaWNhdGlvbiIsImlzTW9kZXJhdG9yIiwidXNlckNvbnRyb2xsZXIiLCJnZXRBbGxVc2VycyIsImdldFVzZXJJbmZvIiwicHV0IiwidXBkYXRlVXNlciIsImRlbGV0ZSIsImlzQWRtaW4iLCJkZWxldGVVc2VyIiwicG9zdCIsInByZXBhcmVUb1VwZGF0ZUltYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUNBO0FBQ0EsTUFBTUEsTUFBTSxHQUFHLHNCQUFmLEMsQ0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBQSxNQUFNLENBQUNDLEdBQVAsQ0FBVyxHQUFYLEVBQWdCLENBQUNDLGFBQWEsQ0FBQ0MsaUJBQWYsRUFBa0NELGFBQWEsQ0FBQ0UsV0FBaEQsQ0FBaEIsRUFBOEVDLGNBQWMsQ0FBQ0MsV0FBN0Y7QUFDQU4sTUFBTSxDQUFDQyxHQUFQLENBQVcsVUFBWCxFQUF1QixDQUFDQyxhQUFhLENBQUNDLGlCQUFmLENBQXZCLEVBQTBERSxjQUFjLENBQUNFLFdBQXpFO0FBQ0FQLE1BQU0sQ0FBQ1EsR0FBUCxDQUFXLFVBQVgsRUFBdUIsQ0FBQ04sYUFBYSxDQUFDQyxpQkFBZixFQUFrQ0QsYUFBYSxDQUFDRSxXQUFoRCxDQUF2QixFQUFxRkMsY0FBYyxDQUFDSSxVQUFwRztBQUNBVCxNQUFNLENBQUNVLE1BQVAsQ0FBYyxVQUFkLEVBQTBCLENBQUNSLGFBQWEsQ0FBQ0MsaUJBQWYsRUFBa0NELGFBQWEsQ0FBQ1MsT0FBaEQsQ0FBMUIsRUFBb0ZOLGNBQWMsQ0FBQ08sVUFBbkc7QUFDQVosTUFBTSxDQUFDYSxJQUFQLENBQVksZ0JBQVosRUFBOEIsQ0FBQ1gsYUFBYSxDQUFDQyxpQkFBZjtBQUFrQztBQUFpQ0UsY0FBYyxDQUFDUyxvQkFBbEYsQ0FBOUIsRUFBdUlULGNBQWMsQ0FBQ0ksVUFBdEo7ZUFFZVQsTSIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgKiBhcyB1c2VyQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy91c2VycydcbmltcG9ydCAqIGFzIGF1dGhvcml6YXRpb24gZnJvbSAnLi4vbWlkZGxld2FyZXMvYXV0aG9yaXphdGlvbidcbi8vIGltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJ1xuY29uc3Qgcm91dGVyID0gUm91dGVyKClcblxuLy8gY29uc3Qgc3RvcmUgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xuLy8gICBkZXN0aW5hdGlvbjogKHJlcSwgZmlsZSwgY2IpID0+IHtcbi8vICAgICBjYihudWxsLCAndXBsb2Fkcy9wcm9maWxlJylcbi8vICAgfSxcbi8vICAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XG4vLyAgICAgY29uc3QgdW5pcXVlTmFtZSA9IERhdGUubm93KCkudG9TdHJpbmcoKVxuLy8gICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGUub3JpZ2luYWxuYW1lLnNwbGl0KCcuJykuYXQoLTEpXG4vLyAgICAgY2IobnVsbCwgYCR7dW5pcXVlTmFtZX0uJHtleHRlbnNpb259YClcbi8vICAgfVxuLy8gfSlcblxuLy8gY29uc3QgdXBsb2FkID0gbXVsdGVyKHsgc3RvcmFnZTogc3RvcmUgfSlcbnJvdXRlci5nZXQoJy8nLCBbYXV0aG9yaXphdGlvbi50b2tlblZlcmlmaWNhdGlvbiwgYXV0aG9yaXphdGlvbi5pc01vZGVyYXRvcl0sIHVzZXJDb250cm9sbGVyLmdldEFsbFVzZXJzKVxucm91dGVyLmdldCgnLzp1c2VySWQnLCBbYXV0aG9yaXphdGlvbi50b2tlblZlcmlmaWNhdGlvbl0sIHVzZXJDb250cm9sbGVyLmdldFVzZXJJbmZvKVxucm91dGVyLnB1dCgnLzp1c2VySWQnLCBbYXV0aG9yaXphdGlvbi50b2tlblZlcmlmaWNhdGlvbiwgYXV0aG9yaXphdGlvbi5pc01vZGVyYXRvcl0sIHVzZXJDb250cm9sbGVyLnVwZGF0ZVVzZXIpXG5yb3V0ZXIuZGVsZXRlKCcvOnVzZXJJZCcsIFthdXRob3JpemF0aW9uLnRva2VuVmVyaWZpY2F0aW9uLCBhdXRob3JpemF0aW9uLmlzQWRtaW5dLCB1c2VyQ29udHJvbGxlci5kZWxldGVVc2VyKVxucm91dGVyLnBvc3QoJy9waG90by86dXNlcklkJywgW2F1dGhvcml6YXRpb24udG9rZW5WZXJpZmljYXRpb24sIC8qICB1cGxvYWQuc2luZ2xlKCdhdmF0YXInKSwgICovIHVzZXJDb250cm9sbGVyLnByZXBhcmVUb1VwZGF0ZUltYWdlXSwgdXNlckNvbnRyb2xsZXIudXBkYXRlVXNlcilcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXG4iXX0=","map":{"version":3,"sources":["users.js"],"names":["router","get","authorization","tokenVerification","isModerator","userController","getAllUsers","getUserInfo","put","updateUser","delete","isAdmin","deleteUser","post","prepareToUpdateImage"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AACA;AACA,MAAMA,MAAM,GAAG,sBAAf,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgB,CAACC,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACE,WAAhD,CAAhB,EAA8EC,cAAc,CAACC,WAA7F;AACAN,MAAM,CAACC,GAAP,CAAW,UAAX,EAAuB,CAACC,aAAa,CAACC,iBAAf,CAAvB,EAA0DE,cAAc,CAACE,WAAzE;AACAP,MAAM,CAACQ,GAAP,CAAW,UAAX,EAAuB,CAACN,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACE,WAAhD,CAAvB,EAAqFC,cAAc,CAACI,UAApG;AACAT,MAAM,CAACU,MAAP,CAAc,UAAd,EAA0B,CAACR,aAAa,CAACC,iBAAf,EAAkCD,aAAa,CAACS,OAAhD,CAA1B,EAAoFN,cAAc,CAACO,UAAnG;AACAZ,MAAM,CAACa,IAAP,CAAY,gBAAZ,EAA8B,CAACX,aAAa,CAACC,iBAAf;AAAkC;AAAiCE,cAAc,CAACS,oBAAlF,CAA9B,EAAuIT,cAAc,CAACI,UAAtJ;eAEeT,M","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/routes/","sourcesContent":["import { Router } from 'express'\nimport * as userController from '../controllers/users'\nimport * as authorization from '../middlewares/authorization'\n// import multer from 'multer'\nconst router = Router()\n\n// const store = multer.diskStorage({\n//   destination: (req, file, cb) => {\n//     cb(null, 'uploads/profile')\n//   },\n//   filename: (req, file, cb) => {\n//     const uniqueName = Date.now().toString()\n//     const extension = file.originalname.split('.').at(-1)\n//     cb(null, `${uniqueName}.${extension}`)\n//   }\n// })\n\n// const upload = multer({ storage: store })\nrouter.get('/', [authorization.tokenVerification, authorization.isModerator], userController.getAllUsers)\nrouter.get('/:userId', [authorization.tokenVerification], userController.getUserInfo)\nrouter.put('/:userId', [authorization.tokenVerification, authorization.isModerator], userController.updateUser)\nrouter.delete('/:userId', [authorization.tokenVerification, authorization.isAdmin], userController.deleteUser)\nrouter.post('/photo/:userId', [authorization.tokenVerification, /*  upload.single('avatar'),  */ userController.prepareToUpdateImage], userController.updateUser)\n\nexport default router\n"]}},"mtime":1647678378025},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUser = exports.prepareToUpdateImage = exports.getUserInfo = exports.getAllUsers = exports.deleteUser = void 0;\n\nvar _users = _interopRequireDefault(require(\"../models/users\"));\n\nvar _validations = require(\"../libs/validations\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getUserInfo = async (req, res) => {\n  const {\n    userId\n  } = req.params;\n  if (!userId) return res.json({\n    message: 'No se ha proporcionado id de usuario'\n  });\n  if (!(0, _validations.isValidObjectId)(userId)) return res.json({\n    message: 'Id no valido'\n  });\n  const userFound = await _users.default.findOne({\n    _id: userId\n  }, {\n    password: 0\n  });\n  res.json(userFound);\n};\n\nexports.getUserInfo = getUserInfo;\n\nconst getAllUsers = async (req, res) => {\n  res.json(await _users.default.find({}, {\n    password: 0,\n    createdAt: 0,\n    updatedAt: 0\n  }).populate('roles'));\n};\n\nexports.getAllUsers = getAllUsers;\n\nconst updateUser = async (req, res) => {\n  const {\n    userId\n  } = req.params;\n  const {\n    body\n  } = req;\n  if (!userId) return res.json({\n    message: 'No se ha proporcionado id de usuario'\n  });\n  if (!(0, _validations.isValidObjectId)(userId)) return res.json({\n    message: 'Id no valido'\n  }); //  if (req.userId === userId) return res.json({ message: 'No se puede actualizar usted mismo' })\n\n  console.log('updateUser', body);\n  const userUpdated = await _users.default.findOneAndUpdate({\n    _id: userId\n  }, body, {\n    new: true\n  });\n  res.json({\n    userUpdated\n  });\n};\n\nexports.updateUser = updateUser;\n\nconst deleteUser = async (req, res) => {\n  const {\n    userId\n  } = req.params;\n  if (!userId) return res.json({\n    message: 'No se ha proporcionado id de usuario'\n  });\n  if (!(0, _validations.isValidObjectId)(userId)) return res.json({\n    message: 'Id no valido'\n  });\n  if (req.userId === userId) return res.json({\n    message: 'No se puede eliminar usted mismo'\n  });\n  const userDeleted = await _users.default.findOneAndDelete({\n    _id: userId\n  });\n  if (!userDeleted) return res.json({\n    message: 'Usuario no existe'\n  });\n  res.json(userDeleted);\n};\n\nexports.deleteUser = deleteUser;\n\nconst prepareToUpdateImage = (req, res, next) => {\n  const {\n    file\n  } = req;\n  const {\n    filename\n  } = file;\n  const photoUrl = `${req.protocol}://${req.get('host')}/gallery/profile/${filename}`;\n  req.body = {\n    photoUrl\n  };\n  next();\n};\n\nexports.prepareToUpdateImage = prepareToUpdateImage;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImdldFVzZXJJbmZvIiwicmVxIiwicmVzIiwidXNlcklkIiwicGFyYW1zIiwianNvbiIsIm1lc3NhZ2UiLCJ1c2VyRm91bmQiLCJVc2VyIiwiZmluZE9uZSIsIl9pZCIsInBhc3N3b3JkIiwiZ2V0QWxsVXNlcnMiLCJmaW5kIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwicG9wdWxhdGUiLCJ1cGRhdGVVc2VyIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyVXBkYXRlZCIsImZpbmRPbmVBbmRVcGRhdGUiLCJuZXciLCJkZWxldGVVc2VyIiwidXNlckRlbGV0ZWQiLCJmaW5kT25lQW5kRGVsZXRlIiwicHJlcGFyZVRvVXBkYXRlSW1hZ2UiLCJuZXh0IiwiZmlsZSIsImZpbGVuYW1lIiwicGhvdG9VcmwiLCJwcm90b2NvbCIsImdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBQ08sTUFBTUEsV0FBVyxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtBQUM3QyxRQUFNO0FBQUVDLElBQUFBO0FBQUYsTUFBYUYsR0FBRyxDQUFDRyxNQUF2QjtBQUNBLE1BQUksQ0FBQ0QsTUFBTCxFQUFhLE9BQU9ELEdBQUcsQ0FBQ0csSUFBSixDQUFTO0FBQUVDLElBQUFBLE9BQU8sRUFBRTtBQUFYLEdBQVQsQ0FBUDtBQUNiLE1BQUksQ0FBQyxrQ0FBZ0JILE1BQWhCLENBQUwsRUFBOEIsT0FBT0QsR0FBRyxDQUFDRyxJQUFKLENBQVM7QUFBRUMsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBVCxDQUFQO0FBQzlCLFFBQU1DLFNBQVMsR0FBRyxNQUFNQyxlQUFLQyxPQUFMLENBQWE7QUFBRUMsSUFBQUEsR0FBRyxFQUFFUDtBQUFQLEdBQWIsRUFBOEI7QUFBRVEsSUFBQUEsUUFBUSxFQUFFO0FBQVosR0FBOUIsQ0FBeEI7QUFDQVQsRUFBQUEsR0FBRyxDQUFDRyxJQUFKLENBQVNFLFNBQVQ7QUFDRCxD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RixHQUFYO0FBQ0FILEVBQUFBLElBQUk7QUFDTCxDQU5NIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlcnMnXG5pbXBvcnQgeyBpc1ZhbGlkT2JqZWN0SWQgfSBmcm9tICcuLi9saWJzL3ZhbGlkYXRpb25zJ1xuZXhwb3J0IGNvbnN0IGdldFVzZXJJbmZvID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zXG4gIGlmICghdXNlcklkKSByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiAnTm8gc2UgaGEgcHJvcG9yY2lvbmFkbyBpZCBkZSB1c3VhcmlvJyB9KVxuICBpZiAoIWlzVmFsaWRPYmplY3RJZCh1c2VySWQpKSByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiAnSWQgbm8gdmFsaWRvJyB9KVxuICBjb25zdCB1c2VyRm91bmQgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHVzZXJJZCB9LCB7IHBhc3N3b3JkOiAwIH0pXG4gIHJlcy5qc29uKHVzZXJGb3VuZClcbn1cbmV4cG9ydCBjb25zdCBnZXRBbGxVc2VycyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbihhd2FpdCBVc2VyLmZpbmQoe30sIHsgcGFzc3dvcmQ6IDAsIGNyZWF0ZWRBdDogMCwgdXBkYXRlZEF0OiAwIH0pLnBvcHVsYXRlKCdyb2xlcycpKVxufVxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXNcbiAgY29uc3QgeyBib2R5IH0gPSByZXFcbiAgaWYgKCF1c2VySWQpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdObyBzZSBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlIHVzdWFyaW8nIH0pXG4gIGlmICghaXNWYWxpZE9iamVjdElkKHVzZXJJZCkpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdJZCBubyB2YWxpZG8nIH0pXG4gIC8vICBpZiAocmVxLnVzZXJJZCA9PT0gdXNlcklkKSByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiAnTm8gc2UgcHVlZGUgYWN0dWFsaXphciB1c3RlZCBtaXNtbycgfSlcbiAgY29uc29sZS5sb2coJ3VwZGF0ZVVzZXInLCBib2R5KVxuICBjb25zdCB1c2VyVXBkYXRlZCA9IGF3YWl0IFVzZXIuZmluZE9uZUFuZFVwZGF0ZSh7IF9pZDogdXNlcklkIH0sIGJvZHksIHsgbmV3OiB0cnVlIH0pXG4gIHJlcy5qc29uKHtcbiAgICB1c2VyVXBkYXRlZFxuICB9KVxufVxuZXhwb3J0IGNvbnN0IGRlbGV0ZVVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcS5wYXJhbXNcbiAgaWYgKCF1c2VySWQpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdObyBzZSBoYSBwcm9wb3JjaW9uYWRvIGlkIGRlIHVzdWFyaW8nIH0pXG4gIGlmICghaXNWYWxpZE9iamVjdElkKHVzZXJJZCkpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdJZCBubyB2YWxpZG8nIH0pXG4gIGlmIChyZXEudXNlcklkID09PSB1c2VySWQpIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6ICdObyBzZSBwdWVkZSBlbGltaW5hciB1c3RlZCBtaXNtbycgfSlcbiAgY29uc3QgdXNlckRlbGV0ZWQgPSBhd2FpdCBVc2VyLmZpbmRPbmVBbmREZWxldGUoeyBfaWQ6IHVzZXJJZCB9KVxuICBpZiAoIXVzZXJEZWxldGVkKSByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiAnVXN1YXJpbyBubyBleGlzdGUnIH0pXG4gIHJlcy5qc29uKHVzZXJEZWxldGVkKVxufVxuZXhwb3J0IGNvbnN0IHByZXBhcmVUb1VwZGF0ZUltYWdlID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgZmlsZSB9ID0gcmVxXG4gIGNvbnN0IHsgZmlsZW5hbWUgfSA9IGZpbGVcbiAgY29uc3QgcGhvdG9VcmwgPSBgJHtyZXEucHJvdG9jb2x9Oi8vJHtyZXEuZ2V0KCdob3N0Jyl9L2dhbGxlcnkvcHJvZmlsZS8ke2ZpbGVuYW1lfWBcbiAgcmVxLmJvZHkgPSB7IHBob3RvVXJsIH1cbiAgbmV4dCgpXG59XG4iXX0=","map":{"version":3,"sources":["users.js"],"names":["getUserInfo","req","res","userId","params","json","message","userFound","User","findOne","_id","password","getAllUsers","find","createdAt","updatedAt","populate","updateUser","body","console","log","userUpdated","findOneAndUpdate","new","deleteUser","userDeleted","findOneAndDelete","prepareToUpdateImage","next","file","filename","photoUrl","protocol","get"],"mappings":"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","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/controllers/","sourcesContent":["import User from '../models/users'\nimport { isValidObjectId } from '../libs/validations'\nexport const getUserInfo = async (req, res) => {\n  const { userId } = req.params\n  if (!userId) return res.json({ message: 'No se ha proporcionado id de usuario' })\n  if (!isValidObjectId(userId)) return res.json({ message: 'Id no valido' })\n  const userFound = await User.findOne({ _id: userId }, { password: 0 })\n  res.json(userFound)\n}\nexport const getAllUsers = async (req, res) => {\n  res.json(await User.find({}, { password: 0, createdAt: 0, updatedAt: 0 }).populate('roles'))\n}\nexport const updateUser = async (req, res) => {\n  const { userId } = req.params\n  const { body } = req\n  if (!userId) return res.json({ message: 'No se ha proporcionado id de usuario' })\n  if (!isValidObjectId(userId)) return res.json({ message: 'Id no valido' })\n  //  if (req.userId === userId) return res.json({ message: 'No se puede actualizar usted mismo' })\n  console.log('updateUser', body)\n  const userUpdated = await User.findOneAndUpdate({ _id: userId }, body, { new: true })\n  res.json({\n    userUpdated\n  })\n}\nexport const deleteUser = async (req, res) => {\n  const { userId } = req.params\n  if (!userId) return res.json({ message: 'No se ha proporcionado id de usuario' })\n  if (!isValidObjectId(userId)) return res.json({ message: 'Id no valido' })\n  if (req.userId === userId) return res.json({ message: 'No se puede eliminar usted mismo' })\n  const userDeleted = await User.findOneAndDelete({ _id: userId })\n  if (!userDeleted) return res.json({ message: 'Usuario no existe' })\n  res.json(userDeleted)\n}\nexport const prepareToUpdateImage = (req, res, next) => {\n  const { file } = req\n  const { filename } = file\n  const photoUrl = `${req.protocol}://${req.get('host')}/gallery/profile/${filename}`\n  req.body = { photoUrl }\n  next()\n}\n"]}},"mtime":1647679268664},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/initSetup.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createRoles = void 0;\n\nvar _roles = _interopRequireDefault(require(\"../models/roles\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst createRoles = async () => {\n  try {\n    const countRoles = await _roles.default.estimatedDocumentCount();\n    if (countRoles > 0) return;\n    const values = await Promise.all([new _roles.default({\n      name: 'Admin'\n    }).save(), new _roles.default({\n      name: 'Moderator'\n    }).save(), new _roles.default({\n      name: 'Seller'\n    }).save(), new _roles.default({\n      name: 'User'\n    }).save()]);\n    console.log(values);\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nexports.createRoles = createRoles;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaXRTZXR1cC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVSb2xlcyIsImNvdW50Um9sZXMiLCJSb2xlIiwiZXN0aW1hdGVkRG9jdW1lbnRDb3VudCIsInZhbHVlcyIsIlByb21pc2UiLCJhbGwiLCJuYW1lIiwic2F2ZSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ08sTUFBTUEsV0FBVyxHQUFHLFlBQVk7QUFDckMsTUFBSTtBQUNGLFVBQU1DLFVBQVUsR0FBRyxNQUFNQyxlQUFLQyxzQkFBTCxFQUF6QjtBQUNBLFFBQUlGLFVBQVUsR0FBRyxDQUFqQixFQUFvQjtBQUNwQixVQUFNRyxNQUFNLEdBQUcsTUFBTUMsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FDL0IsSUFBSUosY0FBSixDQUFTO0FBQUVLLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQVQsRUFBNEJDLElBQTVCLEVBRCtCLEVBRS9CLElBQUlOLGNBQUosQ0FBUztBQUFFSyxNQUFBQSxJQUFJLEVBQUU7QUFBUixLQUFULEVBQWdDQyxJQUFoQyxFQUYrQixFQUcvQixJQUFJTixjQUFKLENBQVM7QUFBRUssTUFBQUEsSUFBSSxFQUFFO0FBQVIsS0FBVCxFQUE2QkMsSUFBN0IsRUFIK0IsRUFJL0IsSUFBSU4sY0FBSixDQUFTO0FBQUVLLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQVQsRUFBMkJDLElBQTNCLEVBSitCLENBQVosQ0FBckI7QUFNQUMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlOLE1BQVo7QUFDRCxHQVZELENBVUUsT0FBT08sS0FBUCxFQUFjO0FBQ2RGLElBQUFBLE9BQU8sQ0FBQ0UsS0FBUixDQUFjQSxLQUFkO0FBQ0Q7QUFDRixDQWRNIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy9saWJzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb2xlIGZyb20gJy4uL21vZGVscy9yb2xlcydcbmV4cG9ydCBjb25zdCBjcmVhdGVSb2xlcyA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb3VudFJvbGVzID0gYXdhaXQgUm9sZS5lc3RpbWF0ZWREb2N1bWVudENvdW50KClcbiAgICBpZiAoY291bnRSb2xlcyA+IDApIHJldHVyblxuICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIG5ldyBSb2xlKHsgbmFtZTogJ0FkbWluJyB9KS5zYXZlKCksXG4gICAgICBuZXcgUm9sZSh7IG5hbWU6ICdNb2RlcmF0b3InIH0pLnNhdmUoKSxcbiAgICAgIG5ldyBSb2xlKHsgbmFtZTogJ1NlbGxlcicgfSkuc2F2ZSgpLFxuICAgICAgbmV3IFJvbGUoeyBuYW1lOiAnVXNlcicgfSkuc2F2ZSgpXG4gICAgXSlcbiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgfVxufVxuIl19","map":{"version":3,"sources":["initSetup.js"],"names":["createRoles","countRoles","Role","estimatedDocumentCount","values","Promise","all","name","save","console","log","error"],"mappings":";;;;;;;AAAA;;;;AACO,MAAMA,WAAW,GAAG,YAAY;AACrC,MAAI;AACF,UAAMC,UAAU,GAAG,MAAMC,eAAKC,sBAAL,EAAzB;AACA,QAAIF,UAAU,GAAG,CAAjB,EAAoB;AACpB,UAAMG,MAAM,GAAG,MAAMC,OAAO,CAACC,GAAR,CAAY,CAC/B,IAAIJ,cAAJ,CAAS;AAAEK,MAAAA,IAAI,EAAE;AAAR,KAAT,EAA4BC,IAA5B,EAD+B,EAE/B,IAAIN,cAAJ,CAAS;AAAEK,MAAAA,IAAI,EAAE;AAAR,KAAT,EAAgCC,IAAhC,EAF+B,EAG/B,IAAIN,cAAJ,CAAS;AAAEK,MAAAA,IAAI,EAAE;AAAR,KAAT,EAA6BC,IAA7B,EAH+B,EAI/B,IAAIN,cAAJ,CAAS;AAAEK,MAAAA,IAAI,EAAE;AAAR,KAAT,EAA2BC,IAA3B,EAJ+B,CAAZ,CAArB;AAMAC,IAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ;AACD,GAVD,CAUE,OAAOO,KAAP,EAAc;AACdF,IAAAA,OAAO,CAACE,KAAR,CAAcA,KAAd;AACD;AACF,CAdM","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/libs/","sourcesContent":["import Role from '../models/roles'\nexport const createRoles = async () => {\n  try {\n    const countRoles = await Role.estimatedDocumentCount()\n    if (countRoles > 0) return\n    const values = await Promise.all([\n      new Role({ name: 'Admin' }).save(),\n      new Role({ name: 'Moderator' }).save(),\n      new Role({ name: 'Seller' }).save(),\n      new Role({ name: 'User' }).save()\n    ])\n    console.log(values)\n  } catch (error) {\n    console.error(error)\n  }\n}\n"]}},"mtime":1647679317598},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFolder = void 0;\n\nvar _fs = require(\"fs\");\n\nvar _path = require(\"path\");\n\nconst createFolder = folders => {\n  for (const folder of folders) {\n    const path = `./${folder}`;\n    (0, _fs.access)(path, error => {\n      if (error) {\n        const newPath = (0, _path.join)(__dirname, `.${path}`);\n        (0, _fs.mkdir)(newPath, {\n          recursive: true\n        }, e => {\n          if (e) {\n            return console.error(e);\n          }\n\n          console.log(`${folder} Path Created`);\n        });\n      }\n    });\n  }\n};\n\nexports.createFolder = createFolder;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJuYW1lcyI6WyJjcmVhdGVGb2xkZXIiLCJmb2xkZXJzIiwiZm9sZGVyIiwicGF0aCIsImVycm9yIiwibmV3UGF0aCIsIl9fZGlybmFtZSIsInJlY3Vyc2l2ZSIsImUiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ08sTUFBTUEsWUFBWSxHQUFJQyxPQUFELElBQWE7QUFDdkMsT0FBSyxNQUFNQyxNQUFYLElBQXFCRCxPQUFyQixFQUE4QjtBQUM1QixVQUFNRSxJQUFJLEdBQUksS0FBSUQsTUFBTyxFQUF6QjtBQUNBLG9CQUFPQyxJQUFQLEVBQWNDLEtBQUQsSUFBVztBQUN0QixVQUFJQSxLQUFKLEVBQVc7QUFDVCxjQUFNQyxPQUFPLEdBQUcsZ0JBQUtDLFNBQUwsRUFBaUIsSUFBR0gsSUFBSyxFQUF6QixDQUFoQjtBQUNBLHVCQUFNRSxPQUFOLEVBQWU7QUFBRUUsVUFBQUEsU0FBUyxFQUFFO0FBQWIsU0FBZixFQUFxQ0MsQ0FBRCxJQUFPO0FBQ3pDLGNBQUlBLENBQUosRUFBTztBQUNMLG1CQUFPQyxPQUFPLENBQUNMLEtBQVIsQ0FBY0ksQ0FBZCxDQUFQO0FBQ0Q7O0FBQ0RDLFVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLEdBQUVSLE1BQU8sZUFBdEI7QUFDRCxTQUxEO0FBTUQ7QUFDRixLQVZEO0FBV0Q7QUFDRixDQWZNIiwic291cmNlUm9vdCI6Ii9ob21lL2FsY2lkZXNub2xhc2NvL0RvY3VtZW50cy9kZXZlbG9wbWVudC9ub2RlL1l1bW1pU2VydmVyL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhY2Nlc3MsIG1rZGlyIH0gZnJvbSAnZnMnXG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCdcbmV4cG9ydCBjb25zdCBjcmVhdGVGb2xkZXIgPSAoZm9sZGVycykgPT4ge1xuICBmb3IgKGNvbnN0IGZvbGRlciBvZiBmb2xkZXJzKSB7XG4gICAgY29uc3QgcGF0aCA9IGAuLyR7Zm9sZGVyfWBcbiAgICBhY2Nlc3MocGF0aCwgKGVycm9yKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgbmV3UGF0aCA9IGpvaW4oX19kaXJuYW1lLCBgLiR7cGF0aH1gKVxuICAgICAgICBta2RpcihuZXdQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9LCAoZSkgPT4ge1xuICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhgJHtmb2xkZXJ9IFBhdGggQ3JlYXRlZGApXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIl19","map":{"version":3,"sources":["config.js"],"names":["createFolder","folders","folder","path","error","newPath","__dirname","recursive","e","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACO,MAAMA,YAAY,GAAIC,OAAD,IAAa;AACvC,OAAK,MAAMC,MAAX,IAAqBD,OAArB,EAA8B;AAC5B,UAAME,IAAI,GAAI,KAAID,MAAO,EAAzB;AACA,oBAAOC,IAAP,EAAcC,KAAD,IAAW;AACtB,UAAIA,KAAJ,EAAW;AACT,cAAMC,OAAO,GAAG,gBAAKC,SAAL,EAAiB,IAAGH,IAAK,EAAzB,CAAhB;AACA,uBAAME,OAAN,EAAe;AAAEE,UAAAA,SAAS,EAAE;AAAb,SAAf,EAAqCC,CAAD,IAAO;AACzC,cAAIA,CAAJ,EAAO;AACL,mBAAOC,OAAO,CAACL,KAAR,CAAcI,CAAd,CAAP;AACD;;AACDC,UAAAA,OAAO,CAACC,GAAR,CAAa,GAAER,MAAO,eAAtB;AACD,SALD;AAMD;AACF,KAVD;AAWD;AACF,CAfM","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import { access, mkdir } from 'fs'\nimport { join } from 'path'\nexport const createFolder = (folders) => {\n  for (const folder of folders) {\n    const path = `./${folder}`\n    access(path, (error) => {\n      if (error) {\n        const newPath = join(__dirname, `.${path}`)\n        mkdir(newPath, { recursive: true }, (e) => {\n          if (e) {\n            return console.error(e)\n          }\n          console.log(`${folder} Path Created`)\n        })\n      }\n    })\n  }\n}\n"]}},"mtime":1647678695356},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/database.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst mongooseOptions = {\n  dbName: 'WTE',\n  useNewUrlParser: true,\n  useUnifiedTopology: true // useCreateIndex: true\n\n};\n\n_mongoose.default.connect('mongodb://localhost:27017', mongooseOptions).then(() => {\n  console.info('DB connected');\n}).catch(err => {\n  console.error(err);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlT3B0aW9ucyIsImRiTmFtZSIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsIm1vbmdvb3NlIiwiY29ubmVjdCIsInRoZW4iLCJjb25zb2xlIiwiaW5mbyIsImNhdGNoIiwiZXJyIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7QUFDQSxNQUFNQSxlQUFlLEdBQUc7QUFDdEJDLEVBQUFBLE1BQU0sRUFBRSxLQURjO0FBRXRCQyxFQUFBQSxlQUFlLEVBQUUsSUFGSztBQUd0QkMsRUFBQUEsa0JBQWtCLEVBQUUsSUFIRSxDQUl0Qjs7QUFKc0IsQ0FBeEI7O0FBT0FDLGtCQUFTQyxPQUFULENBQWlCLDJCQUFqQixFQUE4Q0wsZUFBOUMsRUFDR00sSUFESCxDQUNRLE1BQU07QUFBRUMsRUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEsY0FBYjtBQUE4QixDQUQ5QyxFQUVHQyxLQUZILENBRVVDLEdBQUQsSUFBUztBQUFFSCxFQUFBQSxPQUFPLENBQUNJLEtBQVIsQ0FBY0QsR0FBZDtBQUFvQixDQUZ4QyIsInNvdXJjZVJvb3QiOiIvaG9tZS9hbGNpZGVzbm9sYXNjby9Eb2N1bWVudHMvZGV2ZWxvcG1lbnQvbm9kZS9ZdW1taVNlcnZlci9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xuY29uc3QgbW9uZ29vc2VPcHRpb25zID0ge1xuICBkYk5hbWU6ICdXVEUnLFxuICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZVxuICAvLyB1c2VDcmVhdGVJbmRleDogdHJ1ZVxufVxuXG5tb25nb29zZS5jb25uZWN0KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3JywgbW9uZ29vc2VPcHRpb25zKVxuICAudGhlbigoKSA9PiB7IGNvbnNvbGUuaW5mbygnREIgY29ubmVjdGVkJykgfSlcbiAgLmNhdGNoKChlcnIpID0+IHsgY29uc29sZS5lcnJvcihlcnIpIH0pXG4iXX0=","map":{"version":3,"sources":["database.js"],"names":["mongooseOptions","dbName","useNewUrlParser","useUnifiedTopology","mongoose","connect","then","console","info","catch","err","error"],"mappings":";;AAAA;;;;AACA,MAAMA,eAAe,GAAG;AACtBC,EAAAA,MAAM,EAAE,KADc;AAEtBC,EAAAA,eAAe,EAAE,IAFK;AAGtBC,EAAAA,kBAAkB,EAAE,IAHE,CAItB;;AAJsB,CAAxB;;AAOAC,kBAASC,OAAT,CAAiB,2BAAjB,EAA8CL,eAA9C,EACGM,IADH,CACQ,MAAM;AAAEC,EAAAA,OAAO,CAACC,IAAR,CAAa,cAAb;AAA8B,CAD9C,EAEGC,KAFH,CAEUC,GAAD,IAAS;AAAEH,EAAAA,OAAO,CAACI,KAAR,CAAcD,GAAd;AAAoB,CAFxC","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import mongoose from 'mongoose'\nconst mongooseOptions = {\n  dbName: 'WTE',\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n  // useCreateIndex: true\n}\n\nmongoose.connect('mongodb://localhost:27017', mongooseOptions)\n  .then(() => { console.info('DB connected') })\n  .catch((err) => { console.error(err) })\n"]}},"mtime":1647678637887},"{\"assumptions\":{},\"sourceRoot\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"filename\":\"/home/alcidesnolasco/Documents/development/node/YummiServer/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/alcidesnolasco/Documents/development/node/YummiServer\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"method\":\"usage-global\",\"version\":\"3.17.2\",\"targets\":{\"node\":\"17.4.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _package = _interopRequireDefault(require(\"../package.json\"));\n\nvar _places = _interopRequireDefault(require(\"./routes/places\"));\n\nvar _authentication = _interopRequireDefault(require(\"./routes/authentication\"));\n\nvar _users = _interopRequireDefault(require(\"./routes/users\"));\n\nvar _initSetup = require(\"./libs/initSetup\");\n\nvar _config = require(\"./config\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import morgan from 'morgan'\n//  import { randomBytes } from 'crypto'\nconst app = (0, _express.default)();\n(0, _config.createFolder)(['uploads/profile']);\n(0, _initSetup.createRoles)(); //  console.log(randomBytes(64).toString('hex'))\n\napp.set('pkg', _package.default); // app.use(morgan('dev'))\n\napp.use(_express.default.json());\napp.use('/gallery/profile', _express.default.static('./uploads/profile'));\napp.get('/', (req, res) => {\n  const {\n    name,\n    author,\n    description,\n    version\n  } = app.get('pkg');\n  res.json({\n    author,\n    name,\n    description,\n    version\n  });\n});\napp.use('/api/places', _places.default);\napp.use('/api/authentication', _authentication.default);\napp.use('/api/users', _users.default);\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJzZXQiLCJwa2ciLCJ1c2UiLCJleHByZXNzIiwianNvbiIsInN0YXRpYyIsImdldCIsInJlcSIsInJlcyIsIm5hbWUiLCJhdXRob3IiLCJkZXNjcmlwdGlvbiIsInZlcnNpb24iLCJwbGFjZXNSb3V0ZXMiLCJhdXRoZW50aWNhdGlvblJvdXRlcyIsInVzZXJzUm91dGVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFOQTtBQU9BO0FBQ0EsTUFBTUEsR0FBRyxHQUFHLHVCQUFaO0FBQ0EsMEJBQWEsQ0FBQyxpQkFBRCxDQUFiO0FBQ0EsOEIsQ0FDQTs7QUFDQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsS0FBUixFQUFlQyxnQkFBZixFLENBQ0E7O0FBQ0FGLEdBQUcsQ0FBQ0csR0FBSixDQUFRQyxpQkFBUUMsSUFBUixFQUFSO0FBQ0FMLEdBQUcsQ0FBQ0csR0FBSixDQUFRLGtCQUFSLEVBQTRCQyxpQkFBUUUsTUFBUixDQUFlLG1CQUFmLENBQTVCO0FBQ0FOLEdBQUcsQ0FBQ08sR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN6QixRQUFNO0FBQUVDLElBQUFBLElBQUY7QUFBUUMsSUFBQUEsTUFBUjtBQUFnQkMsSUFBQUEsV0FBaEI7QUFBNkJDLElBQUFBO0FBQTdCLE1BQXlDYixHQUFHLENBQUNPLEdBQUosQ0FBUSxLQUFSLENBQS9DO0FBQ0FFLEVBQUFBLEdBQUcsQ0FBQ0osSUFBSixDQUFTO0FBQUVNLElBQUFBLE1BQUY7QUFBVUQsSUFBQUEsSUFBVjtBQUFnQkUsSUFBQUEsV0FBaEI7QUFBNkJDLElBQUFBO0FBQTdCLEdBQVQ7QUFDRCxDQUhEO0FBSUFiLEdBQUcsQ0FBQ0csR0FBSixDQUFRLGFBQVIsRUFBdUJXLGVBQXZCO0FBQ0FkLEdBQUcsQ0FBQ0csR0FBSixDQUFRLHFCQUFSLEVBQStCWSx1QkFBL0I7QUFDQWYsR0FBRyxDQUFDRyxHQUFKLENBQVEsWUFBUixFQUFzQmEsY0FBdEI7ZUFDZWhCLEciLCJzb3VyY2VSb290IjoiL2hvbWUvYWxjaWRlc25vbGFzY28vRG9jdW1lbnRzL2RldmVsb3BtZW50L25vZGUvWXVtbWlTZXJ2ZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG4vLyBpbXBvcnQgbW9yZ2FuIGZyb20gJ21vcmdhbidcbmltcG9ydCBwa2cgZnJvbSAnLi4vcGFja2FnZS5qc29uJ1xuaW1wb3J0IHBsYWNlc1JvdXRlcyBmcm9tICcuL3JvdXRlcy9wbGFjZXMnXG5pbXBvcnQgYXV0aGVudGljYXRpb25Sb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvYXV0aGVudGljYXRpb24nXG5pbXBvcnQgdXNlcnNSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvdXNlcnMnXG5pbXBvcnQgeyBjcmVhdGVSb2xlcyB9IGZyb20gJy4vbGlicy9pbml0U2V0dXAnXG5pbXBvcnQgeyBjcmVhdGVGb2xkZXIgfSBmcm9tICcuL2NvbmZpZydcbi8vICBpbXBvcnQgeyByYW5kb21CeXRlcyB9IGZyb20gJ2NyeXB0bydcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKVxuY3JlYXRlRm9sZGVyKFsndXBsb2Fkcy9wcm9maWxlJ10pXG5jcmVhdGVSb2xlcygpXG4vLyAgY29uc29sZS5sb2cocmFuZG9tQnl0ZXMoNjQpLnRvU3RyaW5nKCdoZXgnKSlcbmFwcC5zZXQoJ3BrZycsIHBrZylcbi8vIGFwcC51c2UobW9yZ2FuKCdkZXYnKSlcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpXG5hcHAudXNlKCcvZ2FsbGVyeS9wcm9maWxlJywgZXhwcmVzcy5zdGF0aWMoJy4vdXBsb2Fkcy9wcm9maWxlJykpXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgYXV0aG9yLCBkZXNjcmlwdGlvbiwgdmVyc2lvbiB9ID0gYXBwLmdldCgncGtnJylcbiAgcmVzLmpzb24oeyBhdXRob3IsIG5hbWUsIGRlc2NyaXB0aW9uLCB2ZXJzaW9uIH0pXG59KVxuYXBwLnVzZSgnL2FwaS9wbGFjZXMnLCBwbGFjZXNSb3V0ZXMpXG5hcHAudXNlKCcvYXBpL2F1dGhlbnRpY2F0aW9uJywgYXV0aGVudGljYXRpb25Sb3V0ZXMpXG5hcHAudXNlKCcvYXBpL3VzZXJzJywgdXNlcnNSb3V0ZXMpXG5leHBvcnQgZGVmYXVsdCBhcHBcbiJdfQ==","map":{"version":3,"sources":["app.js"],"names":["app","set","pkg","use","express","json","static","get","req","res","name","author","description","version","placesRoutes","authenticationRoutes","usersRoutes"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AANA;AAOA;AACA,MAAMA,GAAG,GAAG,uBAAZ;AACA,0BAAa,CAAC,iBAAD,CAAb;AACA,8B,CACA;;AACAA,GAAG,CAACC,GAAJ,CAAQ,KAAR,EAAeC,gBAAf,E,CACA;;AACAF,GAAG,CAACG,GAAJ,CAAQC,iBAAQC,IAAR,EAAR;AACAL,GAAG,CAACG,GAAJ,CAAQ,kBAAR,EAA4BC,iBAAQE,MAAR,CAAe,mBAAf,CAA5B;AACAN,GAAG,CAACO,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA,WAAhB;AAA6BC,IAAAA;AAA7B,MAAyCb,GAAG,CAACO,GAAJ,CAAQ,KAAR,CAA/C;AACAE,EAAAA,GAAG,CAACJ,IAAJ,CAAS;AAAEM,IAAAA,MAAF;AAAUD,IAAAA,IAAV;AAAgBE,IAAAA,WAAhB;AAA6BC,IAAAA;AAA7B,GAAT;AACD,CAHD;AAIAb,GAAG,CAACG,GAAJ,CAAQ,aAAR,EAAuBW,eAAvB;AACAd,GAAG,CAACG,GAAJ,CAAQ,qBAAR,EAA+BY,uBAA/B;AACAf,GAAG,CAACG,GAAJ,CAAQ,YAAR,EAAsBa,cAAtB;eACehB,G","sourceRoot":"/home/alcidesnolasco/Documents/development/node/YummiServer/src/","sourcesContent":["import express from 'express'\n// import morgan from 'morgan'\nimport pkg from '../package.json'\nimport placesRoutes from './routes/places'\nimport authenticationRoutes from './routes/authentication'\nimport usersRoutes from './routes/users'\nimport { createRoles } from './libs/initSetup'\nimport { createFolder } from './config'\n//  import { randomBytes } from 'crypto'\nconst app = express()\ncreateFolder(['uploads/profile'])\ncreateRoles()\n//  console.log(randomBytes(64).toString('hex'))\napp.set('pkg', pkg)\n// app.use(morgan('dev'))\napp.use(express.json())\napp.use('/gallery/profile', express.static('./uploads/profile'))\napp.get('/', (req, res) => {\n  const { name, author, description, version } = app.get('pkg')\n  res.json({ author, name, description, version })\n})\napp.use('/api/places', placesRoutes)\napp.use('/api/authentication', authenticationRoutes)\napp.use('/api/users', usersRoutes)\nexport default app\n"]}},"mtime":1647679548586}}